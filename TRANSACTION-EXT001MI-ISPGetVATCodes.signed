{"signature":"ArqTtdvfS5uV0UqGx9iZ4muByQx30jLZNL6WVSMICvrcC7+r/X89ikdZJU0exH5YoLbOOKcwVcZHK4zNyN7BB372Ex8wX5Ze+XHfTpkjcMrfQXY0MQ8j3PQSnRiD9pxh+D3gGLfpHfG3kEzprXe+oGC66HATFxkOklmEWsL1psr0vX22eSeiV2IteeG3gkPTKrduAW7XDtM9Vg8S1m2MSFxhYz/27f3OlB+Ln0amAvPuHtlQReJlOjE0lSP4949rM7gXXkAkIV9cluPUbNmocezOaYYB361caKGEvEviTWio/68RuVqjZ2JXepJKrO6TPIxfZ+ecg0eZyr+l/DJWik5IbDYLCZ6a23ylpewezX8jXhMb0NYcNGWSMCmMGAxI93aIB6l7FSEbUe3fmHge5B/Q8wNfghfqmCiw4Fj5OBWGD8d5NyTy4gfXJCY9dRwM+EV5EK6qOtiOkF+UuOnaicXt802mfusC6SODhhbAEuSX1t7BndRBdS23MAz9ub5AeQi/1rRugsBwEoNPrh/gSBhO9yICykLr1w8WtYnDYD1c8nCT6WNQD+vsSN97hSvSQEJlddIE1pYUwGzgyN65laqrO0ulOpfdnavS+XfuDe09ZkQxfqjDY2zter9salxdykt69F8EGwfHhFf8Krl9Z8bfyRgcudgk4XtR0tP0lZNj","signedBy":"Erfan Yousefi","signed":1689857716417,"message":"Signed by XtendM3 Team","extension":"{\"programModules\":{\"EXT001MI\":{\"program\":\"EXT001MI\",\"triggers\":{},\"transactions\":{\"ISPGetVATCodes\":{\"sourceUuid\":\"508ac32e-ae10-4688-a843-f94531ab82b8\",\"name\":\"ISPGetVATCodes\",\"program\":\"EXT001MI\",\"description\":\"ALL_MI_0001_GetVATCodes\",\"active\":true,\"multi\":true,\"modified\":1689255172438,\"modifiedBy\":\"MALSHA01\",\"outputFields\":[{\"name\":\"DIVI\",\"description\":\"division\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"VTCD\",\"description\":\"VAT code\",\"length\":2,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"TX40\",\"description\":\"description\",\"length\":40,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"VTD1\",\"description\":\"nondeductible VAT 1\",\"length\":5,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"VTP1\",\"description\":\"VAT rate 1\",\"length\":5,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"VTD2\",\"description\":\"nondeductible VAT 2\",\"length\":5,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"VTP2\",\"description\":\"VAT rate 2\",\"length\":5,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"FRDT\",\"description\":\"from date\",\"length\":8,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"ONSR\",\"description\":\"VAT on service\",\"length\":1,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"VATT\",\"description\":\"VAT method\",\"length\":20,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"CSCD\",\"description\":\"country\",\"length\":3,\"mandatory\":false,\"type\":\"A\"}],\"inputFields\":[{\"name\":\"DIVI\",\"description\":\"Division\",\"length\":3,\"mandatory\":false,\"type\":\"A\"}],\"utilities\":[]}},\"batches\":{}}},\"utilities\":{},\"sources\":{\"508ac32e-ae10-4688-a843-f94531ab82b8\":{\"uuid\":\"508ac32e-ae10-4688-a843-f94531ab82b8\",\"updated\":1689592779440,\"updatedBy\":\"MALSHA01\",\"created\":1689254891497,\"createdBy\":\"MALSHA01\",\"apiVersion\":\"0.9\",\"beVersion\":\"16.0.0.20230516150031.5\",\"codeHash\":\"9BDE4D8454391AC60CB939299038EE347C9C2010C4B62137941FA6E57ACEE95D\",\"code\":\"LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogKiBFeHRlbnNpb24gTmFtZTogRVhUMDAxTUkuSVNQR2V0VkFUQ29kZXMNCiAqIFR5cGU6IFRyYW5zYWN0aW9uDQogKiBEZXNjcmlwdGlvbjogVGhpcyBleHRlbnNpb24gc2VuZHMgTTMgVkFUIGNvZGUgZGV0YWlscyB0byAzcmQgcGFydHkgYXBwbGljYXRpb24gSVNQLg0KICoNCiAqIERhdGUgICAgICAgICBDaGFuZ2VkIEJ5ICAgICAgICAgICAgICBWZXJzaW9uICAgICAgICAgICAgIERlc2NyaXB0aW9uDQogKiAyMDIyLTA1LTE5ICAgSGl0ZXNoIENob3RyYW5pICAgICAgICAgMS4wICAgICAgICAgICAgICAgICBJbml0aWFsIFJlbGVhc2UNCiAqIDIwMjMtMDMtMjEgICBTaGFzaGFuayBNYWxhbGkgICAgICAgICAxLjEgICAgICAgICAgICAgICAgIENvZGUgY2xlYW51cCBhbmQgbG93ZXJDYW1lbENhc2UgdXNhZ2UNCiAqIDIwMjMtMDYtMjAgICBTaGFzaGFuayBNYWxhbGkgICAgICAgICAxLjMgICAgICAgICAgICAgICAgIEFkZGVkIGxvZ2ljIHRvIGZpbHRlciB2YXQgY29kZXMgYmFzZWQgb24gQ1VHRVgxIGVudHJ5IGFuZCB6ZXJvDQogKg0KICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KDQpwdWJsaWMgY2xhc3MgSVNQR2V0VkFUQ29kZXMgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsNCiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQ0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQ0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyDQogIHByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2UNCiAgcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyDQogIHByaXZhdGUgU3RyaW5nIENPTk8gPSAiIg0KICBwcml2YXRlIFN0cmluZyBkaXZpc2lvbiA9ICIiDQogIHByaXZhdGUgU3RyaW5nIHN0YXJ0RGl2aSA9ICIiDQogIHByaXZhdGUgU3RyaW5nIGlnbm9yZUJsYW5rRGl2aXNpb24gPSAiIg0KDQogIHByaXZhdGUgQXJyYXlMaXN0IDwgU3RyaW5nID4gbWV0aG9kUG9zaXRpb25MaXN0ID0gbnVsbA0KICBwcml2YXRlIEFycmF5TGlzdCA8IFN0cmluZyA+IG9uU2VydmljZVBvc2l0aW9uTGlzdCA9IG51bGwNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBTdHJpbmcgPiBpZ25vcmVWYXRDb2Rlc0xpc3QgPSBudWxsDQogIHByaXZhdGUgQXJyYXlMaXN0IDwgU3RyaW5nID4gZGl2aXNpb25MaXN0ID0gbnVsbA0KICBwcml2YXRlIGJvb2xlYW4gaGFzRGF0YSA9IGZhbHNlDQoNCiAgcHVibGljIElTUEdldFZBVENvZGVzKE1JQVBJIG1pLCBQcm9ncmFtQVBJIHByb2dyYW0sIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgTG9nZ2VyQVBJIGxvZ2dlcikgew0KICAgIHRoaXMubWkgPSBtaQ0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcg0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0NCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UNCiAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcg0KICB9DQoNCiAgcHVibGljIHZvaWQgbWFpbigpIHsNCiAgICBDT05PID0gcHJvZ3JhbS5MREFaRC5nZXQoJ0NPTk8nKQ0KDQogICAgcG9wdWxhdGVDb250cm9sUHJvcGVydGllcygpDQoNCiAgICBpZiAoaWdub3JlQmxhbmtEaXZpc2lvbi50cmltKCkuZXF1YWxzKCIxIikpIHsNCiAgICAgIHN0YXJ0RGl2aSA9ICIwIg0KICAgIH0NCiAgICBpZiAoIWRpdmlzaW9uLnRyaW0oKS5pc0VtcHR5KCkgJiYgZGl2aXNpb24gIT0gbnVsbCkgew0KDQogICAgfSBlbHNlIHsNCiAgICAgIGdhdGhlckFsbERpdmlzaW9ucygpDQogICAgICBkaXZpc2lvbkxpc3QuZWFjaCB7DQogICAgICAgIHZhbHVlIC0+DQogICAgICAgICAgU3RyaW5nIGVhY2hEaXZpc2lvbiA9IHZhbHVlDQogICAgICAgIGlmIChlYWNoRGl2aXNpb24udHJpbSgpLmlzRW1wdHkoKSAmJiBpZ25vcmVCbGFua0RpdmlzaW9uID09ICIxIikgew0KDQogICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICBnZXRWYXRDb2RlcyhlYWNoRGl2aXNpb24pDQoNCiAgICAgICAgICBpZiAoIWlnbm9yZVZhdENvZGVzTGlzdC5jb250YWlucygiMDAiKSkgew0KDQogICAgICAgICAgICBnZXRaZXJvVmF0Q29kZShlYWNoRGl2aXNpb24pDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgaWYgKGhhc0RhdGEpIHsNCiAgICAgIG1pLm91dERhdGEucHV0KCdUWDQwJywgJyUlRU9GJSUnKQ0KICAgICAgbWkud3JpdGUoKQ0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBHZXQgY29udHJvbCBwcm9wZXJ0aWVzIGZyb20gQ1VHRVgxDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgcG9wdWxhdGVDb250cm9sUHJvcGVydGllcygpIHsNCg0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZQ0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKQ0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBpZ25vcmVCbGFua0RpdmlzaW9uID0gcmVzdWx0cy5nZXQoJ0ExMjEnKQ0KDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiUGxlYXNlIG1haW50YWluIHJlY29yZCBpbiBDVUdFWDEgZm9yIElHTk9SRUJMQU5LRElWSSIpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJGSUxFIjogIklTUEZJTEUiLCAiUEswMSI6ICJHRVRWQVRDT0RFUyIsICJQSzAyIjogIklHTk9SRUJMQU5LRElWSSJdDQogICAgbWlDYWxsZXIuY2FsbCgiQ1VTRVhUTUkiLCAiR2V0RmllbGRWYWx1ZSIsIHBhcmFtcywgY2FsbGJhY2spDQoNCiAgICBtZXRob2RQb3NpdGlvbkxpc3QgPSBuZXcgQXJyYXlMaXN0IDwgU3RyaW5nID4gKCkNCiAgICByZWNvcmRFeGlzdHMgPSB0cnVlDQogICAgZGVmIGNhbGxiYWNrMiA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKQ0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBTdHJpbmcgbWV0aG9kUG9zaXRpb25zID0gcmVzdWx0cy5nZXQoJ0ExMjEnKQ0KICAgICAgICBTdHJpbmdbXSBtZXRob2RQb3NpdGlvbnNBcnJheSA9IG1ldGhvZFBvc2l0aW9ucy5zcGxpdCgnOycpDQogICAgICAgIG1ldGhvZFBvc2l0aW9uc0FycmF5LmVhY2ggew0KICAgICAgICAgIHZhbHVlIC0+DQogICAgICAgICAgICBTdHJpbmcgbWV0aG9kUG9zaXRpb24gPSB2YWx1ZQ0KICAgICAgICAgIG1ldGhvZFBvc2l0aW9uTGlzdC5hZGQobWV0aG9kUG9zaXRpb24udHJpbSgpKQ0KDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJQbGVhc2UgbWFpbnRhaW4gcmVjb3JkIGluIENVR0VYMSBmb3IgTUVUSE9EUE9TSVRJT04iKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtczIgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVFZBVENPREVTIiwgIlBLMDIiOiAiTUVUSE9EUE9TSVRJT04iXQ0KICAgIG1pQ2FsbGVyLmNhbGwoIkNVU0VYVE1JIiwgIkdldEZpZWxkVmFsdWUiLCBwYXJhbXMyLCBjYWxsYmFjazIpDQoNCiAgICBvblNlcnZpY2VQb3NpdGlvbkxpc3QgPSBuZXcgQXJyYXlMaXN0IDwgU3RyaW5nID4gKCkNCg0KICAgIHJlY29yZEV4aXN0cyA9IHRydWUNCiAgICBkZWYgY2FsbGJhY2szID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpDQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFN0cmluZyBvblNlcnZpY2VQb3NpdGlvbnMgPSByZXN1bHRzLmdldCgnQTEyMScpDQogICAgICAgIFN0cmluZ1tdIG9uU2VydmljZVBvc2l0aW9uc0FycmF5ID0gb25TZXJ2aWNlUG9zaXRpb25zLnNwbGl0KCc7JykNCiAgICAgICAgb25TZXJ2aWNlUG9zaXRpb25zQXJyYXkuZWFjaCB7DQogICAgICAgICAgdmFsdWUgLT4NCiAgICAgICAgICAgIFN0cmluZyBvblNlcnZpY2VQb3NpdGlvbiA9IHZhbHVlDQogICAgICAgICAgb25TZXJ2aWNlUG9zaXRpb25MaXN0LmFkZChvblNlcnZpY2VQb3NpdGlvbi50cmltKCkpDQoNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBPTlNFUlZJQ0VQT1NJVElPTiIpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zMyA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUVkFUQ09ERVMiLCAiUEswMiI6ICJPTlNFUlZJQ0VQT1NJVElPTiJdDQogICAgbWlDYWxsZXIuY2FsbCgiQ1VTRVhUTUkiLCAiR2V0RmllbGRWYWx1ZSIsIHBhcmFtczMsIGNhbGxiYWNrMykNCg0KICAgIGlnbm9yZVZhdENvZGVzTGlzdCA9IG5ldyBBcnJheUxpc3QgPCBTdHJpbmcgPiAoKQ0KICAgIHJlY29yZEV4aXN0cyA9IHRydWUNCiAgICBkZWYgY2FsbGJhY2s0ID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpDQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFN0cmluZyBpZ25vcmVWYXRDb2RlcyA9IHJlc3VsdHMuZ2V0KCdBMTIxJykNCiAgICAgICAgU3RyaW5nW10gaWdub3JlVmF0Q29kZXNBcnJheSA9IGlnbm9yZVZhdENvZGVzLnNwbGl0KCc7JykNCiAgICAgICAgaWdub3JlVmF0Q29kZXNBcnJheS5lYWNoIHsNCiAgICAgICAgICB2YWx1ZSAtPg0KICAgICAgICAgICAgU3RyaW5nIGlnbm9yZVZhdENvZGUgPSB2YWx1ZQ0KICAgICAgICAgIGlnbm9yZVZhdENvZGVzTGlzdC5hZGQoaWdub3JlVmF0Q29kZS50cmltKCkpDQoNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zNCA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUVkFUQ09ERVMiLCAiUEswMiI6ICJGSUxURVJWQVRDT0RFUyJdDQogICAgbWlDYWxsZXIuY2FsbCgiQ1VTRVhUTUkiLCAiR2V0RmllbGRWYWx1ZSIsIHBhcmFtczQsIGNhbGxiYWNrNCkNCg0KICB9DQoNCiAgLyoqDQogICAqIExpc3QgYWxsIE0zIGRpdmlzaW9ucw0KICAgKiANCiAgICovDQogIHB1YmxpYyBnYXRoZXJBbGxEaXZpc2lvbnMoKSB7DQogICAgZGl2aXNpb25MaXN0ID0gbmV3IEFycmF5TGlzdCA8IFN0cmluZyA+ICgpDQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlDQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpDQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFN0cmluZyBESVZJID0gcmVzdWx0cy5nZXQoJ0RJVkknKQ0KICAgICAgICBkaXZpc2lvbkxpc3QuYWRkKERJVkkudHJpbSgpKQ0KDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiTm8gRGl2aXNpb25zIGZvdW5kIikNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLCAiRElWSSI6IHN0YXJ0RGl2aV0NCiAgICBtaUNhbGxlci5jYWxsKCJNTlMxMDBNSSIsICJMc3REaXZpc2lvbnMiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KICB9DQoNCiAgLyoqDQogICAqIFJlYWQgYWxsIFZBVCBjb2RlIA0KICAgKiANCiAgICovDQoNCiAgcHVibGljIGdldFZhdENvZGVzKFN0cmluZyBlYWNoRGl2aXNpb24pIHsNCiAgICBEQkFjdGlvbiBxdWVyeUN2YXRwYyA9IGRhdGFiYXNlLnRhYmxlKCJDVkFUUEMiKQ0KICAgICAgLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiQ1ZDT05PIiwgIkNWRElWSSIsICJDVlZUQ0QiLCAiQ1ZGUkRUIiwgIkNWVFg0MCIsICJDVlZUUDEiLCAiQ1ZWVFAyIiwgIkNWVlREMSIsICJDVlZURDIiLCAiQ1ZDU0NEIikNCiAgICAgIC5idWlsZCgpDQogICAgREJDb250YWluZXIgcmVjb3JkQ3ZhdHBjID0gcXVlcnlDdmF0cGMuZ2V0Q29udGFpbmVyKCkNCiAgICByZWNvcmRDdmF0cGMuc2V0KCJDVkNPTk8iLCBDT05PLnRvSW50ZWdlcigpKQ0KICAgIHJlY29yZEN2YXRwYy5zZXQoIkNWRElWSSIsIGVhY2hEaXZpc2lvbikNCg0KICAgIGludCByZWFkcyA9IHF1ZXJ5Q3ZhdHBjLnJlYWRBbGwocmVjb3JkQ3ZhdHBjLCAyLCBnZXRDdmF0cGNSZWNvcmRzKQ0KDQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IGdldEN2YXRwY1JlY29yZHMgPSB7DQogICAgREJDb250YWluZXIgcmVjb3JkIC0+DQogICAgU3RyaW5nIFZUQ0QgPSByZWNvcmQuZ2V0KCJDVlZUQ0QiKQ0KICAgIFN0cmluZyBESVZJID0gcmVjb3JkLmdldCgiQ1ZESVZJIikNCiAgICBTdHJpbmcgRlJEVCA9IHJlY29yZC5nZXQoIkNWRlJEVCIpDQogICAgU3RyaW5nIFRYNDAgPSByZWNvcmQuZ2V0KCJDVlRYNDAiKQ0KICAgIFN0cmluZyBWVFAxID0gcmVjb3JkLmdldCgiQ1ZWVFAxIikNCiAgICBTdHJpbmcgVlRQMiA9IHJlY29yZC5nZXQoIkNWVlRQMiIpDQogICAgU3RyaW5nIFZURDEgPSByZWNvcmQuZ2V0KCJDVlZURDEiKQ0KICAgIFN0cmluZyBWVEQyID0gcmVjb3JkLmdldCgiQ1ZWVEQyIikNCiAgICBTdHJpbmcgQ1NDRCA9IHJlY29yZC5nZXQoIkNWQ1NDRCIpDQogICAgVlRDRCA9IFN0cmluZy5mb3JtYXQoIiUwMmQiLCBWVENELnRyaW0oKS50b0ludGVnZXIoKSkNCiAgICBTdHJpbmdbXSB2YXREZXRhaWxzID0gZ2V0VmF0RGV0YWlscyhWVENELCBESVZJKQ0KDQogICAgaWYgKCFpZ25vcmVWYXRDb2Rlc0xpc3QuY29udGFpbnMoVlRDRCkpIHsNCg0KICAgICAgaWYgKHZhdERldGFpbHMubGVuZ3RoID09IDIpIHsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZBVFQnLCB2YXREZXRhaWxzWzBdKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT05TUicsIHZhdERldGFpbHNbMV0pDQogICAgICB9DQogICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsIFZUQ0QpDQogICAgICBtaS5vdXREYXRhLnB1dCgnRElWSScsIERJVkkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnRlJEVCcsIEZSRFQpDQogICAgICBtaS5vdXREYXRhLnB1dCgnVFg0MCcsIFRYNDApDQogICAgICBtaS5vdXREYXRhLnB1dCgnVlRQMScsIFZUUDEpDQogICAgICBtaS5vdXREYXRhLnB1dCgnVlRQMicsIFZUUDIpDQogICAgICBtaS5vdXREYXRhLnB1dCgnVlREMScsIFZURDEpDQogICAgICBtaS5vdXREYXRhLnB1dCgnVlREMicsIFZURDIpDQogICAgICBtaS5vdXREYXRhLnB1dCgnQ1NDRCcsIENTQ0QpDQogICAgICBtaS53cml0ZSgpDQogICAgICBoYXNEYXRhID0gdHJ1ZQ0KICAgIH0NCg0KICB9DQoNCiAgLyoqDQogICAqIERlcGVuZCB1cG9uIGNvbnRyb2wgcHJvcGVydHkgZ2V0IFZBVCBjb2RlIGRldGFpbHMNCiAgICogDQogICAqLw0KICBwdWJsaWMgU3RyaW5nW10gZ2V0VmF0RGV0YWlscyhTdHJpbmcgVlRDRCwgU3RyaW5nIERJVkkpIHsNCiAgICBTdHJpbmdbXSB2YXREZXRhaWxzID0gbmV3IFN0cmluZ1syXQ0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZQ0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKQ0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBTdHJpbmcgUEFSTSA9IHJlc3VsdHMuZ2V0KCdQQVJNJykNCiAgICAgICAgaW50IG1ldGhvZFN0YXJ0UG9zaXRpb24gPSBtZXRob2RQb3NpdGlvbkxpc3QuZ2V0KDApLnRvSW50ZWdlcigpDQogICAgICAgIGludCBtZXRob2RQb3NpdGlvbkxlbmd0aCA9IG1ldGhvZFBvc2l0aW9uTGlzdC5nZXQoMSkudG9JbnRlZ2VyKCkNCiAgICAgICAgaW50IG9uU2VydmljZVN0YXJ0UG9zaXRpb24gPSBvblNlcnZpY2VQb3NpdGlvbkxpc3QuZ2V0KDApLnRvSW50ZWdlcigpDQogICAgICAgIGludCBvblNlcnZpY2VMZW5ndGggPSBvblNlcnZpY2VQb3NpdGlvbkxpc3QuZ2V0KDEpLnRvSW50ZWdlcigpDQoNCiAgICAgICAgU3RyaW5nIFZBVFQgPSBQQVJNLmxlbmd0aCgpIDwgbWV0aG9kU3RhcnRQb3NpdGlvbiArIG1ldGhvZFBvc2l0aW9uTGVuZ3RoID8gIiIgOiBQQVJNLnN1YnN0cmluZyhtZXRob2RTdGFydFBvc2l0aW9uLCBtZXRob2RTdGFydFBvc2l0aW9uICsgbWV0aG9kUG9zaXRpb25MZW5ndGgpDQogICAgICAgIFN0cmluZyBWQVRPblNlcnZpY2VzID0gUEFSTS5sZW5ndGgoKSA8IG9uU2VydmljZVN0YXJ0UG9zaXRpb24gKyBvblNlcnZpY2VMZW5ndGggPyAiIiA6IFBBUk0uc3Vic3RyaW5nKG9uU2VydmljZVN0YXJ0UG9zaXRpb24sIG9uU2VydmljZVN0YXJ0UG9zaXRpb24gKyBvblNlcnZpY2VMZW5ndGgpDQogICAgICAgIHZhdERldGFpbHNbMF0gPSBWQVRUDQogICAgICAgIHZhdERldGFpbHNbMV0gPSBWQVRPblNlcnZpY2VzDQogICAgICB9DQoNCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJESVZJIjogRElWSSwgIlNUQ08iOiAiVlRDRCIsICJTVEtZIjogVlRDRF0NCiAgICBtaUNhbGxlci5jYWxsKCJDUlMxNzVNSSIsICJHZXRHZW5lcmFsQ29kZSIsIHBhcmFtcywgY2FsbGJhY2spDQogICAgcmV0dXJuIHZhdERldGFpbHMNCiAgfQ0KDQogIC8qKg0KICAgKiBEZXBlbmQgdXBvbiBjb250cm9sIHByb3BlcnR5IGdldCBWQVQgY29kZSBkZXRhaWxzDQogICAqIA0KICAgKi8NCiAgcHVibGljIGdldFplcm9WYXRDb2RlKFN0cmluZyBlYWNoRGl2aXNpb24pIHsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWUNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJykNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgU3RyaW5nIFRYNDAgPSByZXN1bHRzLmdldCgnVFg0MCcpDQogICAgICAgIFN0cmluZyBQQVJNID0gcmVzdWx0cy5nZXQoJ1BBUk0nKQ0KICAgICAgICBpbnQgbWV0aG9kU3RhcnRQb3NpdGlvbiA9IG1ldGhvZFBvc2l0aW9uTGlzdC5nZXQoMCkudG9JbnRlZ2VyKCkNCiAgICAgICAgaW50IG1ldGhvZFBvc2l0aW9uTGVuZ3RoID0gbWV0aG9kUG9zaXRpb25MaXN0LmdldCgxKS50b0ludGVnZXIoKQ0KICAgICAgICBpbnQgb25TZXJ2aWNlU3RhcnRQb3NpdGlvbiA9IG9uU2VydmljZVBvc2l0aW9uTGlzdC5nZXQoMCkudG9JbnRlZ2VyKCkNCiAgICAgICAgaW50IG9uU2VydmljZUxlbmd0aCA9IG9uU2VydmljZVBvc2l0aW9uTGlzdC5nZXQoMSkudG9JbnRlZ2VyKCkNCg0KICAgICAgICBTdHJpbmcgVkFUVCA9IFBBUk0ubGVuZ3RoKCkgPCBtZXRob2RTdGFydFBvc2l0aW9uICsgbWV0aG9kUG9zaXRpb25MZW5ndGggPyAiIiA6IFBBUk0uc3Vic3RyaW5nKG1ldGhvZFN0YXJ0UG9zaXRpb24sIG1ldGhvZFN0YXJ0UG9zaXRpb24gKyBtZXRob2RQb3NpdGlvbkxlbmd0aCkNCg0KICAgICAgICBTdHJpbmcgVkFUT25TZXJ2aWNlcyA9IFBBUk0ubGVuZ3RoKCkgPCBvblNlcnZpY2VTdGFydFBvc2l0aW9uICsgb25TZXJ2aWNlTGVuZ3RoID8gIiIgOiBQQVJNLnN1YnN0cmluZyhvblNlcnZpY2VTdGFydFBvc2l0aW9uLCBvblNlcnZpY2VTdGFydFBvc2l0aW9uICsgb25TZXJ2aWNlTGVuZ3RoKQ0KDQogICAgICAgIG1pLm91dERhdGEucHV0KCdESVZJJywgZWFjaERpdmlzaW9uKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsICIwMCIpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdUWDQwJywgVFg0MCkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09OU1InLCBWQVRPblNlcnZpY2VzKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnVkFUVCcsIFZBVFQpDQogICAgICAgIG1pLndyaXRlKCkNCg0KICAgICAgfQ0KDQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLCAiRElWSSI6IGVhY2hEaXZpc2lvbiwgIlNUQ08iOiAiVlRDRCIsICJTVEtZIjogIjAwIl0NCiAgICBtaUNhbGxlci5jYWxsKCJDUlMxNzVNSSIsICJHZXRHZW5lcmFsQ29kZSIsIHBhcmFtcywgY2FsbGJhY2spDQogIH0NCn0=\"}}}"}