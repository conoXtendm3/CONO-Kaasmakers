{"signature":"AhyWPp1Y4+KnEqPSGeP0HaggOary5FCnjtQKrMdRE8ywN+updx52DbvfM19DWNsaSWpmD95Xo0eJMy61RZSbEd2z70npynzVmo6zpt+cUZ4CcBaVF9nOv7HuO8Bz6j18uydBPzlKDotHhcZgKObwgZZhwLnLszUIxdmbjt6V0KC59aVfDjl/6dW4Cg/6rkcVXxVit/YryOUdolwS4+g8F7T06VoQQ/dUujFlFWzQDAr0H+TCgl/BupGvHRtTOKu+fcbwmvlOXZfZonrzXV7TG1nkiVuDsUohjHrb+KO/OF4hDkIw1jSsPtNFOGwCcypO2pMuNIs9QaYARPIGAObz/3OhYqMo416kAuTAyQ+Gm4FscoDTXajIVStcA79wrMm8FX8PtmeroPOQBsHy391AB7K83FANC6KGacGRm2y0pNpSPEWggzWERPUzaP/YgHeALSRBcyivUzkCdskarrLrsAZRBSZd78MaGBLjewZjdVbwUzbB72t29IfdZCiRkp3ZxgJEAbPFFLqvny1Dy4OYr7amtBPiQ1sXJZpH1Y6SU2EM4dvAgcNWPwJMaOb6mxquappMxKguutZ/BrXQQwf3l1CizhK/oo+UD9kKOt5gMBxS3xBQq2qPWgpvCen2L6K7XJIbfw3klClHupGXH0tNoPRqErnJ5OcCtcWfd9s05eWf","signedBy":"Erfan Yousefi","signed":1689857716640,"message":"Signed by XtendM3 Team","extension":"{\"programModules\":{\"EXT001MI\":{\"program\":\"EXT001MI\",\"triggers\":{},\"transactions\":{\"ISPGetPrchseOrd\":{\"sourceUuid\":\"f65058ed-dac1-40d1-a9ed-feebcaf6a608\",\"name\":\"ISPGetPrchseOrd\",\"program\":\"EXT001MI\",\"description\":\"ALL_MI_0001_GetPurchaseOrders\",\"active\":true,\"multi\":true,\"modified\":1689255131453,\"modifiedBy\":\"MALSHA01\",\"outputFields\":[{\"name\":\"RCTP\",\"description\":\"Record Type (OH,OC,OL,LR,LC)\",\"length\":2,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"DIVI\",\"description\":\"division\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"FACI\",\"description\":\"facility\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"WHLO\",\"description\":\"warehouse\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PUNO\",\"description\":\"purchase order number\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"SUNO\",\"description\":\"supplier\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"SUNM\",\"description\":\"supplier name\",\"length\":700,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"RENM\",\"description\":\"name\",\"length\":36,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"BUYE\",\"description\":\"buyer\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"CSCD\",\"description\":\"country\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"CUCD\",\"description\":\"currency\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"DATE\",\"description\":\"entry date\",\"length\":8,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"PUDT\",\"description\":\"order date\",\"length\":8,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"DWDT\",\"description\":\"requested delivery date\",\"length\":8,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"YRE1\",\"description\":\"your reference\",\"length\":36,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PHNO\",\"description\":\"telephone number 1\",\"length\":16,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"TFNO\",\"description\":\"facsimile transmission number\",\"length\":16,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"REMK\",\"description\":\"remark\",\"length\":30,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"ORTY\",\"description\":\"order type\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"COAM\",\"description\":\"total order cost\",\"length\":17,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"TOQT\",\"description\":\"total quantity\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"TEPY\",\"description\":\"payment terms\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"MODL\",\"description\":\"delivery method\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"TEDL\",\"description\":\"delivery terms\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"TEPA\",\"description\":\"packaging terms\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"TEL1\",\"description\":\"terms text\",\"length\":36,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PUSL\",\"description\":\"lowest status - purchase order\",\"length\":2,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PUST\",\"description\":\"highest status - purchase order\",\"length\":2,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"CDSE\",\"description\":\"sequence number - costing element\",\"length\":4,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"REPN\",\"description\":\"receiving number\",\"length\":10,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"EXTY\",\"description\":\"charge type\",\"length\":1,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"TX30\",\"description\":\"description\",\"length\":30,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"EXIC\",\"description\":\"charge invoicing\",\"length\":1,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"WSOP\",\"description\":\"costing operator\",\"length\":2,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"CCUC\",\"description\":\"Charge Currency\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"CEVA\",\"description\":\"costing element amount\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"CEVJ\",\"description\":\"adjusted costing element amount\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"THPR\",\"description\":\"3rd party charges\",\"length\":1,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"IVCQ\",\"description\":\"invoice charge quantity\",\"length\":1,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"CEID\",\"description\":\"costing element\",\"length\":6,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PNLI\",\"description\":\"purchase order line\",\"length\":3,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"PNLS\",\"description\":\"purchase order line subnumber\",\"length\":3,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"ITNO\",\"description\":\"item number\",\"length\":15,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"ADQA\",\"description\":\"transport notified quantit alternate U/M\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"ORQT\",\"description\":\"ordered quantity - basic U/M\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"TRDT\",\"description\":\"transaction date\",\"length\":8,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"LWHL\",\"description\":\"Line Warehouse\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PITD\",\"description\":\"purchase order item name\",\"length\":60,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PITT\",\"description\":\"purchase order item description\",\"length\":120,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"SITE\",\"description\":\"supplier item number\",\"length\":30,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"CAQA\",\"description\":\"approved quantity - alternate U/M\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"RJQA\",\"description\":\"rejected quantity\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"SDQA\",\"description\":\"stored quantity\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"ORQA\",\"description\":\"ordered quantity - alternate U/M\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"IVQA\",\"description\":\"invoiced quantity - alternate U/M\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"RVQA\",\"description\":\"received quantity\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"CFQA\",\"description\":\"confirmed quantity\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"OQPU\",\"description\":\"Open Quantity Price UM\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PURC\",\"description\":\"requisition by\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"LBUY\",\"description\":\"Line Buyer\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"STUM\",\"description\":\"Standard UM\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"UNMS\",\"description\":\"basic unit of measure\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"ALUM\",\"description\":\"Alternative UM\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"CWUN\",\"description\":\"Catch weight UM\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"LNAM\",\"description\":\"line amount - order currency\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"PUPR\",\"description\":\"purchase price\",\"length\":17,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"PUQT\",\"description\":\"purchased quantity\",\"length\":15,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"ALPR\",\"description\":\"Alternative Price\",\"length\":17,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"PTCD\",\"description\":\"purchase price text\",\"length\":1,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"VTCD\",\"description\":\"VAT code\",\"length\":2,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"GRMT\",\"description\":\"goods receiving method\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"LMOD\",\"description\":\"Line MODL\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"LTED\",\"description\":\"Line TEDL\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"LTEL\",\"description\":\"Line TEL1\",\"length\":36,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"LPSL\",\"description\":\"Line PUSL\",\"length\":2,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"LPST\",\"description\":\"Line PUST\",\"length\":2,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"POPN\",\"description\":\"alias number\",\"length\":30,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"RORC\",\"description\":\"reference order category\",\"length\":1,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"RORN\",\"description\":\"reference order number\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"RORL\",\"description\":\"reference order line\",\"length\":6,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"RORX\",\"description\":\"line suffix\",\"length\":3,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"SUDO\",\"description\":\"delivery note number\",\"length\":20,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"FRRC\",\"description\":\"freight reference type\",\"length\":1,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"FRRE\",\"description\":\"freight reference\",\"length\":12,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"AMOP\",\"description\":\"Amount Open Std Unit Value\",\"length\":17,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"AMOR\",\"description\":\"Amount Ordered Std Unit Value\",\"length\":17,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PRCE\",\"description\":\"Price Std Unit Value\",\"length\":17,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"UNIT\",\"description\":\"Unit - Std Unit Value\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"OPQT\",\"description\":\"Open Quantity Std Unit Value\",\"length\":17,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"QTIV\",\"description\":\"Quantity Invoice Std Unit Value\",\"length\":17,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"QTOR\",\"description\":\"Quantity Ordered Std Unit Value\",\"length\":17,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"QTRV\",\"description\":\"Quantity Received - Std Unit Value\",\"length\":17,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"ALTU\",\"description\":\"Alternative Unit - Unit Value\",\"length\":3,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"ALQO\",\"description\":\"Alternative Quanity Open Unit Value\",\"length\":17,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"ALTP\",\"description\":\"Alternative Price Unit Value\",\"length\":17,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"RPNM\",\"description\":\"Receipt Number\",\"length\":15,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"RELP\",\"description\":\"receipt type\",\"length\":1,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"RPDT\",\"description\":\"Receipt Date\",\"length\":8,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"RPQT\",\"description\":\"Receipt Quantity\",\"length\":17,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"RQAL\",\"description\":\"Receipt Quantity Alternative UM\",\"length\":17,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"OAOU\",\"description\":\"Open Amount Order UM\",\"length\":17,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"OALC\",\"description\":\"Open Amount Local Currency\",\"length\":17,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"OPCW\",\"description\":\"Open Catch Weight\",\"length\":17,\"mandatory\":false,\"type\":\"N\"},{\"name\":\"OQOU\",\"description\":\"Open Quantity Order UM\",\"length\":17,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"OQPM\",\"description\":\"Open Quantity Purchase Order Price UM\",\"length\":17,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"CELD\",\"description\":\"Costing element Description\",\"length\":20,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"IVCS\",\"description\":\"Invoice Costs\",\"length\":20,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"CHFC\",\"description\":\"Charge Factor\",\"length\":20,\"mandatory\":false,\"type\":\"A\"}],\"inputFields\":[{\"name\":\"SUNO\",\"description\":\"supplier\",\"length\":10,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PUNO\",\"description\":\"Purchase Orders List (semi-colon separated)\",\"length\":500,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PUSL\",\"description\":\"lowest status - purchase order\",\"length\":2,\"mandatory\":false,\"type\":\"A\"},{\"name\":\"PUST\",\"description\":\"highest status - purchase order\",\"length\":2,\"mandatory\":false,\"type\":\"A\"}],\"utilities\":[]}},\"batches\":{}}},\"utilities\":{},\"sources\":{\"f65058ed-dac1-40d1-a9ed-feebcaf6a608\":{\"uuid\":\"f65058ed-dac1-40d1-a9ed-feebcaf6a608\",\"updated\":1689591185360,\"updatedBy\":\"MALSHA01\",\"created\":1689254959958,\"createdBy\":\"MALSHA01\",\"apiVersion\":\"0.9\",\"beVersion\":\"16.0.0.20230516150031.5\",\"codeHash\":\"793747C76A0AB56BD7DFF652581C6F171E36DC1C12758E9CE735901DCAA449D5\",\"code\":\"IC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAqIEV4dGVuc2lvbiBOYW1lOiBFWFQwMDFNSS5JU1BHZXRQcmNoc2VPcmQNCiAgKiBUeXBlOiBUcmFuc2FjdGlvbg0KICAqIERlc2NyaXB0aW9uOiBUaGlzIGV4dGVuc2lvbiBzZW5kcyBNMyBQdXJjaGFzZSBvcmRlciBkZXRhaWxzIChQTyBMaW5lIGRldGFpbHMsUmVjZWlwdCBkZXRhaWxzLGNoYXJnZSBkZXRhaWxzLGl0ZW0gZGV0YWlscyxzdXBwbGllciBkZXRhaWxzKSB0byAzcmQgcGFydHkgYXBwbGljYXRpb24gSVNQLg0KICAqDQogICogRGF0ZSAgICAgICAgIENoYW5nZWQgQnkgICAgICAgICAgICAgIFZlcnNpb24gICAgICAgICAgICAgRGVzY3JpcHRpb24NCiAgKiAyMDIyLTA1LTE5ICAgSGl0ZXNoIENob3RyYW5pICAgICAgICAgMS4wICAgICAgICAgICAgICAgICBJbml0aWFsIFJlbGVhc2UNCiAgKiAyMDIzLTAzLTIxICAgU2hhc2hhbmsgTWFsYWxpICAgICAgICAgMS4xICAgICAgICAgICAgICAgICBDb2RlIGNsZWFudXAgYW5kIGxvd2VyQ2FtZWxDYXNlIHVzYWdlDQogICogMjAyMy0wNi0xMyAgIFNoYXNoYW5rIE1hbGFsaSAgICAgICAgIDEuMgkJCSAgICAgICAgICAgQ2hhbmdlZCAuc2l6ZSBtZXRob2QgdG8gc2l6ZSgpDQogICogMjAyMy0wNi0yMCAgIFNoYXNoYW5rIE1hbGFsaSAgICAgICAgIDEuMyAgICAgICAgICAgICAgICAgQ2hhbmdlZCBsb2dpYyBmb3IgUHJpY2UsIFF0eSBhbmQgYW1vdW50cw0KICAqIA0KICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCg0KaW1wb3J0IGdyb292eS5qc29uLioNCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlDQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcg0KaW1wb3J0IGphdmEudGV4dC5EZWNpbWFsRm9ybWF0DQppbXBvcnQgamF2YS5sYW5nLkRvdWJsZQ0KaW1wb3J0IGphdmEubGFuZy5JbnRlZ2VyDQppbXBvcnQgamF2YS5tYXRoLioNCg0KcHVibGljIGNsYXNzIElTUEdldFByY2hzZU9yZCBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pDQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXINCiAgcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyDQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtDQogIHByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2UNCiAgcHJpdmF0ZSBmaW5hbCBJb25BUEkgaW9uDQogIHByaXZhdGUgU3RyaW5nIENPTk8gPSAiIg0KICBwcml2YXRlIFN0cmluZyBTVU5PID0gIiINCiAgcHJpdmF0ZSBTdHJpbmcgUFVOTyA9ICIiDQogIHByaXZhdGUgU3RyaW5nIGlucHV0UHVzbCA9ICIiDQogIHByaXZhdGUgU3RyaW5nIGlucHV0UHVzdCA9ICIiDQogIHByaXZhdGUgU3RyaW5nIGNoZWNrUHVzbCA9ICIiDQogIHByaXZhdGUgU3RyaW5nIGNoZWNrUHVzdCA9ICIiDQogIHByaXZhdGUgU3RyaW5nIGNoZWNrQ29hbSA9ICIiDQogIHByaXZhdGUgU3RyaW5nIGNoZWNrUG90YyA9ICIiDQogIHByaXZhdGUgU3RyaW5nIGNoZWNrVG9xdCA9ICIiDQogIHByaXZhdGUgU3RyaW5nIG51bWJlck9mRGVjaW1hbHMgPSAiIg0KICBwcml2YXRlIFN0cmluZyBwcmljZVVuaXRTdGFuZGFyZCA9ICIiDQogIHByaXZhdGUgU3RyaW5nIGV4cG9ydEVtcHR5ID0gIiINCiAgcHJpdmF0ZSBTdHJpbmcgdmFsaWRDaGFyZ2VUeXBlcyA9ICIiDQogIHByaXZhdGUgU3RyaW5nIHJlY2VpcHRRdWFudGl0eSA9ICIiDQogIHByaXZhdGUgU3RyaW5nIG9wZW5BbW91bnRMb2NhbEN1cnJlbmN5ID0gIiINCiAgcHJpdmF0ZSBTdHJpbmcgZml4ZWRDaGFyZ2VUeXBlcyA9ICIiDQogIHByaXZhdGUgQXJyYXlMaXN0IDwgU3RyaW5nID4gdmFsaWRQdXJjaGFzZU9yZGVyTGlzdCA9IG51bGwNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBTdHJpbmcgPiB0ZW1wUHVubyA9IG51bGwNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiBjaGFyZ2VMaXN0ID0gbnVsbA0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IGxpbmVMaXN0ID0gbnVsbA0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IGxpbmVSZWNlaXB0TGlzdCA9IG51bGwNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiBvcGVuTGluZVJlY2VpcHRMaXN0ID0gbnVsbA0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IGxpbmVDaGFyZ2VSZWNlaXB0TGlzdCA9IG51bGwNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiBsaW5lT3BlbkNoYXJnZVJlY2VpcHRMaXN0ID0gbnVsbA0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IHRlbXBMaW5lQ2hhcmdlTGlzdCA9IG51bGwNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiBsaW5lQ2hhcmdlTGlzdCA9IG51bGwNCiAgcHJpdmF0ZSBTdHJpbmcgb0RpdmkgPSAiIiwgb0ZhY2kgPSAiIiwgb1dobG8gPSAiIiwgb1B1bm8gPSAiIiwgb1N1bm8gPSAiIiwgb1N1bm0gPSAiIiwgb1Jlbm0gPSAiIiwgb0J1eWUgPSAiIiwgb09ydHkgPSAiIg0KICBwcml2YXRlIFN0cmluZyBvQ3NjZCA9ICIiLCBvQ3VjZCA9ICIiLCBvRGF0ZSA9ICIiLCBvUHVkdCA9ICIiLCBvRHdkdCA9ICIiLCBvWXJlMSA9ICIiLCBvUGhubyA9ICIiLCBvVGZubyA9ICIiDQogIHByaXZhdGUgU3RyaW5nIG9JYXBjID0gIiINCiAgcHJpdmF0ZSBTdHJpbmcgb1JlbWsgPSAiIiwgb09ydGsgPSAiIiwgb0NvYW0gPSAiIiwgb1RvcXQgPSAiIiwgb01vZGwgPSAiIiwgb1RlcHkgPSAiIiwgb1RlcGEgPSAiIiwgb1RlbDEgPSAiIiwgb1B1c2wgPSAiIiwgb1B1c3QgPSAiIg0KICBwcml2YXRlIFN0cmluZyBvRG1jdSA9ICIiLCBvVGVkbCA9ICIiDQogIHByaXZhdGUgU3RyaW5nIHN0YW5kYXJkVW5pdE1lYXN1cmUgPSAiIg0KICBwcml2YXRlIFN0cmluZyB1bml0TWVhc3VyZSA9ICIiLCBpbnZRdHksIHJlcFF0eQ0KICBwcml2YXRlIFN0cmluZyBhbHRlcm5hdGVVbml0TWVhc3VyZSA9ICIiLCBvcGVuUXVhbnRpdHlPcmRlclVtYSA9ICIiDQogIHByaXZhdGUgU3RyaW5nIHByaWNlVW1EY2NkID0gIiIsIHByaWNlVW1EbWNmID0gIiIsIHByaWNlVW1Db2ZhID0gIiIsIG9yZGVyVW1EY2NkID0gIiIsIG9yZGVyVW1EbWNmID0gIiIsIG9yZGVyVW1Db2ZhID0gIiIsIGJhc2ljVW1EY2NkID0gIiIsIHBvcG5FYTEzID0gIiIsIElWUVQgPSAiIiwgZWFjaExpbmVQdXVuID0gIiIsIGVhY2hMaW5lUHB1biA9ICIiDQogIHByaXZhdGUgU3RyaW5nIG9yZGVyZFF1YW50aXR5UHJpY2VVbSwgcmVjZWl2ZWRRdWFudGl0eVByaWNlVW0sIGludm9pY2VkUXVhbnRpdHlQcmljZVVtLCBvcGVuUXVhbnRpdHlQcmljZVVtLCBvcGVRdWFudGl0eU9yZGVyVW0sIGFtb3VudE9wZW4sIHByaWNQZXJQaWVjZVByaWNlVW0sIHByaWNQZXJQaWVjZU9yZGVyVW0NCiAgcHJpdmF0ZSBTdHJpbmcgcHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0sIHByaWNlcGVyUGllY2VPdW0sIG9wZW5RdWFudGl0eVN0YW5kYXJkVW0sIGludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVtLCBvcmRlcmVkUXVhbnRpdHlTdGFuZGFyZFVtLCByZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbSwgYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4sIGFsdGVybmF0aXZlUHJpY2UNCiAgcHJpdmF0ZSBTdHJpbmcgQVVUUEEgPSAiIiwgcmVjZWl2ZWRRdWFudGl0eU9yZGVyVW0gPSAiIiwgcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5ID0gIiIsIGFtb3VudFJlY2VpdmVkUHJpY2VVbSA9ICIiLCBhbW91bnRPcGVuUHJpY2VVbSA9ICIiLCBhbW91bnRPcGVuT3JkZXJVbSA9ICIiDQogIHByaXZhdGUgYm9vbGVhbiBpc0VuZE9mRmlsZSA9IGZhbHNlDQogIHByaXZhdGUgRG91YmxlIGRDcHByID0gMC4wZA0KICBwcml2YXRlIEhhc2h0YWJsZSB0ZW1wVGFibGVDaGFyZ2VzID0gbnVsbA0KICBwcml2YXRlIEhhc2h0YWJsZSB0ZW1wVGFibGVDaGFyZ2VzMSA9IG51bGwNCg0KICBwdWJsaWMgSVNQR2V0UHJjaHNlT3JkKE1JQVBJIG1pLCBNSUNhbGxlckFQSSBtaUNhbGxlciwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgSW9uQVBJIGlvbiwgTG9nZ2VyQVBJIGxvZ2dlcikgew0KICAgIHRoaXMubWkgPSBtaQ0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0NCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXINCiAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcg0KICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZQ0KICAgIHRoaXMuaW9uID0gaW9uDQogIH0NCg0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIGdldENvbnRyb2xQcm9wZXJ0aWVzKCkNCiAgICB2YWxpZFB1cmNoYXNlT3JkZXJMaXN0ID0gbmV3IEFycmF5TGlzdCA8IFN0cmluZyA+ICgpDQogICAgdGVtcFRhYmxlQ2hhcmdlcyA9IG5ldyBIYXNodGFibGUgPCBTdHJpbmcsIFN0cmluZyA+ICgpDQogICAgdGVtcFRhYmxlQ2hhcmdlczEgPSBuZXcgSGFzaHRhYmxlIDwgU3RyaW5nLCBTdHJpbmcgPiAoKQ0KICAgIENPTk8gPSBwcm9ncmFtLkxEQVpELmdldCgnQ09OTycpDQogICAgU1VOTyA9IG1pLmluRGF0YS5nZXQoJ1NVTk8nKQ0KICAgIFBVTk8gPSBtaS5pbkRhdGEuZ2V0KCdQVU5PJykNCiAgICBpbnB1dFB1c2wgPSBtaS5pbkRhdGEuZ2V0KCdQVVNMJykNCiAgICBpbnB1dFB1c3QgPSBtaS5pbkRhdGEuZ2V0KCdQVVNUJykNCiAgICBpZiAoaW5wdXRQdXNsID09IG51bGwgfHwgaW5wdXRQdXNsLnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgIGlucHV0UHVzbCA9ICIwIg0KICAgIH0NCiAgICBpZiAoaW5wdXRQdXN0ID09IG51bGwgfHwgaW5wdXRQdXN0LnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgIGlucHV0UHVzdCA9ICIxMDAiDQogICAgfQ0KICAgIGludCBvcmRlckFycmF5TGVuZ3RoID0gMA0KICAgIGlmICghUFVOTy50cmltKCkuaXNFbXB0eSgpICYmIFNVTk8udHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgICAgU3RyaW5nW10gb3JkZXJBcnJheSA9IFBVTk8uc3BsaXQoJzsnKQ0KICAgICAgb3JkZXJBcnJheUxlbmd0aCA9IG9yZGVyQXJyYXkubGVuZ3RoDQogICAgICBvcmRlckFycmF5LmVhY2ggew0KICAgICAgICB2YWx1ZSAtPg0KICAgICAgICAgIFN0cmluZyBlYWNoUHVubyA9IHZhbHVlDQoNCiAgICAgICAgZ2V0SGVhZEJhc2ljKGVhY2hQdW5vKQ0KICAgICAgICBnZXRIZWFkKGVhY2hQdW5vKQ0KICAgICAgICB2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LmFkZChlYWNoUHVuby50cmltKCkpDQoNCiAgICAgIH0NCg0KICAgIH0gZWxzZSBpZiAoIVNVTk8udHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgZ2V0UHVyY2hhc2VPcmRlckZvclN1cHBsaWVyKCkNCiAgICB9DQoNCiAgICBpbnQgcHVyY2hhc2VPcmRlckNhcCA9IDANCiAgICBpZiAob3JkZXJBcnJheUxlbmd0aCA9PSAwKSB7DQogICAgICBvcmRlckFycmF5TGVuZ3RoID0gMjAwDQogICAgfQ0KICAgIGlmICh2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LnNpemUoKSA+IDEwMCkgew0KDQogICAgfQ0KICAgIGlmICh2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LnNpemUoKSA8IDIwMCkgew0KICAgICAgaXNFbmRPZkZpbGUgPSB0cnVlDQogICAgfQ0KICAgIHZhbGlkUHVyY2hhc2VPcmRlckxpc3QuZWFjaCB7DQogICAgICB2YWx1ZSAtPg0KICAgICAgICBTdHJpbmcgZWFjaFB1bm8gPSB2YWx1ZQ0KICAgICAgY2xlYXJQb0hlYWRlckZpZWxkcygpDQogICAgICBib29sZWFuIHJlY29yZEZvdW5kID0gZ2V0T3JkZXJEZXRhaWxzKGVhY2hQdW5vLnRyaW0oKSkNCiAgICAgIGdldFBvU3RhdHVzKGVhY2hQdW5vLnRyaW0oKSkNCiAgICAgIGdldEN1cnJlbmN5Q29udmVyc2lvbihvRGl2aS50cmltKCkpDQogICAgICBnZXRTdXBwbGllck5hbWUob1N1bm8udHJpbSgpKQ0KICAgICAgaWYgKHJlY29yZEZvdW5kICYmIHB1cmNoYXNlT3JkZXJDYXAgPCBvcmRlckFycmF5TGVuZ3RoKSB7DQogICAgICAgIHB1cmNoYXNlT3JkZXJDYXArKw0KICAgICAgICB3cml0ZVB1cmNoYXNlT3JkZXIoKQ0KICAgICAgICBnZXRDaGFyZ2VzKGVhY2hQdW5vLnRyaW0oKSkNCiAgICAgICAgY2hhcmdlTGlzdC5lYWNoIHsNCiAgICAgICAgICB2YWx1ZTEgLT4NCiAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoQ2hhcmdlID0gdmFsdWUxDQogICAgICAgICAgd3JpdGVDaGFyZ2VzKGVhY2hQdW5vLCBlYWNoQ2hhcmdlKQ0KICAgICAgICB9DQoNCiAgICAgICAgZ2V0TGluZURldGFpbHMoZWFjaFB1bm8pDQogICAgICAgIGxpbmVMaXN0LmVhY2ggew0KICAgICAgICAgIHZhbHVlMiAtPg0KICAgICAgICAgICAgSGFzaHRhYmxlIGVhY2hMaW5lID0gdmFsdWUyDQogICAgICAgICAgZ2V0VW5pdE9mTWVhc3VyZW1lbnRDb252ZXJzaW9uKGVhY2hMaW5lKQ0KICAgICAgICAgIGdldEJhc2ljRGVjaW1hbENvZGUoZWFjaExpbmUpDQogICAgICAgICAgZ2V0SXRlbUFsaWFzKGVhY2hMaW5lKQ0KICAgICAgICAgIGdldE1wbGluZURldGFpbHMoZWFjaFB1bm8sIGVhY2hMaW5lKQ0KICAgICAgICAgIHVzZUNwcHJJZkF2YWlsYWJsZShlYWNoTGluZSkNCiAgICAgICAgICBjaGVja09yZGVyUHJpY2VBbmRCYXNlVW5pdHMoZWFjaExpbmUpDQogICAgICAgICAgd3JpdGVQdXJjaGFzZUxpbmUoZWFjaFB1bm8sIGVhY2hMaW5lKQ0KICAgICAgICAgIGdldExpbmVSZWNlaXB0cyhlYWNoUHVubywgZWFjaExpbmUpDQogICAgICAgICAgb3BlbkxpbmVSZWNlaXB0TGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKQ0KICAgICAgICAgIGxpbmVSZWNlaXB0TGlzdC5lYWNoIHsNCiAgICAgICAgICAgIGxpbmVSZWNlaXB0IC0+DQogICAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoTGluZVJlY2VpcHQgPSBsaW5lUmVjZWlwdA0KDQogICAgICAgICAgICBjYWxjdWxhdGVSZWNlaXB0UXVhbnRpdGllcyhlYWNoTGluZVJlY2VpcHQsIGVhY2hMaW5lKQ0KICAgICAgICAgICAgb3BlbkxpbmVSZWNlaXB0TGlzdC5hZGQoZWFjaExpbmVSZWNlaXB0KQ0KDQogICAgICAgICAgICBnYXRoZXJSZWNlaXB0Q2hhcmdlcyhlYWNoUHVubywgZWFjaExpbmVSZWNlaXB0LCBlYWNoTGluZSkNCg0KICAgICAgICAgICAgbGluZU9wZW5DaGFyZ2VSZWNlaXB0TGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKQ0KICAgICAgICAgICAgbGluZUNoYXJnZVJlY2VpcHRMaXN0LmVhY2ggew0KICAgICAgICAgICAgICBsaW5lQ2hhcmdlUmVjZWlwdCAtPg0KICAgICAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZVJlY2VpcHQgPSBsaW5lQ2hhcmdlUmVjZWlwdA0KICAgICAgICAgICAgICBnZXRDaGFyZ2VUZXh0KGVhY2hMaW5lQ2hhcmdlUmVjZWlwdCkNCiAgICAgICAgICAgICAgY2FsY3VsYXRlUmVjZWlwdENoYXJnZVF1YW50aXRpZXMoZWFjaExpbmUsIGVhY2hMaW5lUmVjZWlwdCwgZWFjaExpbmVDaGFyZ2VSZWNlaXB0KQ0KDQogICAgICAgICAgICAgIGNoZWNrQ2hhcmdlT3JkZXJQcmljZUFuZEJhc2VVbml0KGVhY2hMaW5lLCBlYWNoTGluZVJlY2VpcHQsIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdCkNCiAgICAgICAgICAgICAgYWRkVG9MaW5lT3BlbkNoYXJnZVJlY2VpcHRMaXN0KGVhY2hQdW5vLCBlYWNoTGluZSwgZWFjaExpbmVSZWNlaXB0LCBlYWNoTGluZUNoYXJnZVJlY2VpcHQpDQogICAgICAgICAgICAgIGdldExpbmVDaGFyZ2VzKGVhY2hQdW5vLCBlYWNoTGluZSkNCiAgICAgICAgICAgICAgdGVtcExpbmVDaGFyZ2VMaXN0LmVhY2ggew0KDQogICAgICAgICAgICAgICAgdGVtcExpbmVDaGFyZ2UgLT4NCiAgICAgICAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoVGVtcExpbmVDaGFyZ2UgPSB0ZW1wTGluZUNoYXJnZQ0KDQogICAgICAgICAgICAgICAgZ2V0TGluZUNoYXJnZVRleHQoZWFjaFB1bm8sIHRlbXBMaW5lQ2hhcmdlLCBlYWNoTGluZSkNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGxpbmVDaGFyZ2VMaXN0LmVhY2ggew0KICAgICAgICAgICAgICBsaW5lQ2hhcmdlIC0+DQogICAgICAgICAgICAgICAgSGFzaHRhYmxlIGVhY2hMaW5lQ2hhcmdlID0gbGluZUNoYXJnZQ0KICAgICAgICAgICAgICB3cml0ZUxpbmVDaGFyZ2VzKGVhY2hQdW5vLCBlYWNoTGluZUNoYXJnZSwgZWFjaExpbmUpDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBvcGVuTGluZVJlY2VpcHRMaXN0LmVhY2ggew0KICAgICAgICAgICAgb3BlbkxpbmVSZWNlaXB0IC0+DQogICAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoT3BlbkxpbmVSZWNlaXB0ID0gb3BlbkxpbmVSZWNlaXB0DQogICAgICAgICAgICB3cml0ZVJlY2VpcHRzKGVhY2hQdW5vLCBlYWNoT3BlbkxpbmVSZWNlaXB0LCBlYWNoTGluZSkNCiAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KDQogICAgICB9DQoNCiAgICB9DQogICAgaWYgKGlzRW5kT2ZGaWxlKSB7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICdMJykNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgJyUlRU9GJSUnKQ0KICAgICAgbWkud3JpdGUoKQ0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBSZXRyaXZlIHRoZSBjb250cm9sIHByb3BlcnRpZXMgZnJvbSBDVUdFWDEgDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgZ2V0Q29udHJvbFByb3BlcnRpZXMoKSB7DQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlDQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpDQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIG51bWJlck9mRGVjaW1hbHMgPSByZXN1bHRzLmdldCgnQTEyMScpDQoNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJQbGVhc2UgbWFpbnRhaW4gcmVjb3JkIGluIENVR0VYMSBmb3IgTk9PRkRFQ0lNQUxTIikNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVFBVUkNIQVNFT1JERVIiLCAiUEswMiI6ICJOT09GREVDSU1BTFMiXQ0KICAgIG1pQ2FsbGVyLmNhbGwoIkNVU0VYVE1JIiwgIkdldEZpZWxkVmFsdWUiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KDQogICAgZGVmIGNhbGxiYWNrMiA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKQ0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBwcmljZVVuaXRTdGFuZGFyZCA9IHJlc3VsdHMuZ2V0KCdBMTIxJykNCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBQUklDRVVOSVRTVEFOREFSRCIpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zMiA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUUFVSQ0hBU0VPUkRFUiIsICJQSzAyIjogIlBSSUNFVU5JVFNUQU5EQVJEIl0NCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zMiwgY2FsbGJhY2syKQ0KDQogICAgZGVmIGNhbGxiYWNrMyA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKQ0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBleHBvcnRFbXB0eSA9IHJlc3VsdHMuZ2V0KCdBMTIxJykNCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBFWFBPUlRFTVBUWSIpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zMyA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUUFVSQ0hBU0VPUkRFUiIsICJQSzAyIjogIkVYUE9SVEVNUFRZIl0NCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zMywgY2FsbGJhY2szKQ0KDQogICAgZGVmIGNhbGxiYWNrNCA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKQ0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICB2YWxpZENoYXJnZVR5cGVzID0gcmVzdWx0cy5nZXQoJ0ExMjEnKQ0KDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiUGxlYXNlIG1haW50YWluIHJlY29yZCBpbiBDVUdFWDEgZm9yIENIQVJHRVRZUEUiKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtczQgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVFBVUkNIQVNFT1JERVIiLCAiUEswMiI6ICJDSEFSR0VUWVBFIl0NCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zNCwgY2FsbGJhY2s0KQ0KDQogICAgZGVmIGNhbGxiYWNrNSA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKQ0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBmaXhlZENoYXJnZVR5cGVzID0gcmVzdWx0cy5nZXQoJ0ExMjEnKQ0KDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiUGxlYXNlIG1haW50YWluIHJlY29yZCBpbiBDVUdFWDEgZm9yIENIQVJHRVRZUEUiKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtczUgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVFBVUkNIQVNFT1JERVIiLCAiUEswMiI6ICJGSVhFRENIQVJHRVRZUEUiXQ0KICAgIG1pQ2FsbGVyLmNhbGwoIkNVU0VYVE1JIiwgIkdldEZpZWxkVmFsdWUiLCBwYXJhbXM1LCBjYWxsYmFjazUpDQoNCiAgfQ0KDQogIC8qKg0KICAgKiBjbGVhciBsb2NhbCB2ZXJpYWJsZXMgb2YgUE8gaGVhZGVyDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgY2xlYXJQb0hlYWRlckZpZWxkcygpIHsNCiAgICBvUHVubyA9ICIiDQogICAgb0RhdGUgPSAiIg0KICAgIG9QdWR0ID0gIiINCiAgICBvRHdkdCA9ICIiDQogICAgb1Jlbm0gPSAiIg0KICAgIG9TdW5vID0gIiINCiAgICBvQ3NjZCA9ICIiDQogICAgb0J1eWUgPSAiIg0KICAgIG9DdWNkID0gIiINCiAgICBvWXJlMSA9ICIiDQogICAgb1Bobm8gPSAiIg0KICAgIG9UZm5vID0gIiINCiAgICBvUmVtayA9ICIiDQogICAgb0NvYW0gPSAiIg0KICAgIG9EaXZpID0gIiINCiAgICBvRmFjaSA9ICIiDQogICAgb1dobG8gPSAiIg0KICAgIG9PcnR5ID0gIiINCiAgICBvVGVweSA9ICIiDQogICAgb01vZGwgPSAiIg0KICAgIG9UZXBhID0gIiINCiAgICBvVGVkbCA9ICIiDQogICAgb1RlbDEgPSAiIg0KICAgIG9Ub3F0ID0gIiINCiAgICBvRG1jdSA9ICIiDQogICAgb1N1bm0gPSAiIg0KICAgIG9JYXBjID0gIiINCiAgfQ0KDQogIC8qKg0KICAgKiBHZXQgUHVyY2hhc2Ugb3JkZXIgYmFzaWMgZGV0YWlscyB1c2luZyBQUFMwMDFNSS5HZXRIZWFkQmFzaWMNCiAgICogDQogICAqLw0KDQogIHB1YmxpYyBnZXRIZWFkQmFzaWMoU3RyaW5nIFBVTk8pIHsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWUNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJykNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgY2hlY2tQdXNsID0gcmVzdWx0cy5nZXQoJ1BVU0wnKQ0KICAgICAgICBjaGVja1B1c3QgPSByZXN1bHRzLmdldCgnUFVTVCcpDQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLCAiUFVOTyI6IFBVTk9dDQogICAgbWlDYWxsZXIuY2FsbCgiUFBTMDAxTUkiLCAiR2V0SGVhZEJhc2ljIiwgcGFyYW1zLCBjYWxsYmFjaykNCiAgfQ0KDQogIC8qKg0KICAgKiBHZXQgUHVyY2hhc2Ugb3JkZXIgc3RhdHVzIHVzaW5nIFBQUzAwMU1JLkdldEhlYWRCYXNpYw0KICAgKiANCiAgICovDQoNCiAgcHVibGljIGdldFBvU3RhdHVzKFN0cmluZyBQVU5PKSB7DQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlDQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpDQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQoNCiAgICAgICAgb1B1c2wgPSByZXN1bHRzLmdldCgnUFVTTCcpDQogICAgICAgIG9QdXN0ID0gcmVzdWx0cy5nZXQoJ1BVU1QnKQ0KDQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLCAiUFVOTyI6IFBVTk9dDQogICAgbWlDYWxsZXIuY2FsbCgiUFBTMDAxTUkiLCAiR2V0SGVhZEJhc2ljIiwgcGFyYW1zLCBjYWxsYmFjaykNCiAgfQ0KDQogIC8qKg0KICAgKiBHZXQgcHVyY2hhc2Ugb3JkZXIgYWRkaXRpb25hbCBkZXRhaWxzIGZyb20gdGFibGUgTVBIRUFEDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgZ2V0SGVhZChTdHJpbmcgZWFjaFB1bm8pIHsNCg0KICAgIGludCBjdXJyZW50Q29tcGFueSA9IChJbnRlZ2VyKSBwcm9ncmFtLmdldExEQVpEKCkuQ09OTw0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1QSEVBRCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiSUFDT05PIiwgIklBUFVOTyIsICJJQUNPQU0iLCAiSUFQT1RDIiwgIklBVE9RVCIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgIGNvbnRhaW5lci5zZXQoIklBQ09OTyIsIGN1cnJlbnRDb21wYW55KQ0KICAgIGNvbnRhaW5lci5zZXQoIklBUFVOTyIsIGVhY2hQdW5vKQ0KDQogICAgaWYgKHF1ZXJ5LnJlYWQoY29udGFpbmVyKSkgew0KICAgICAgY2hlY2tDb2FtID0gY29udGFpbmVyLmdldCgiSUFDT0FNIikNCiAgICAgIGNoZWNrUG90YyA9IGNvbnRhaW5lci5nZXQoIklBUE9UQyIpDQogICAgICBjaGVja1RvcXQgPSBjb250YWluZXIuZ2V0KCJJQVRPUVQiKQ0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBWYWxpZGF0ZSBwdXJjaGFzZSBvcmRlciBudW1iZXINCiAgICogDQogICAqLw0KDQogIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlUHVubygpIHsNCiAgICBjaGVja0NvYW0gPSBjaGVja0NvYW0uZXF1YWxzKCIiKSA/ICIwIiA6IGNoZWNrQ29hbQ0KICAgIGNoZWNrVG9xdCA9IGNoZWNrVG9xdC5lcXVhbHMoIiIpID8gIjAiIDogY2hlY2tUb3F0DQoNCiAgICBCaWdEZWNpbWFsIHRvdGFsQW1vdW50ID0gbmV3IEJpZ0RlY2ltYWwoY2hlY2tDb2FtKQ0KICAgIEJpZ0RlY2ltYWwgdG90YWxRdWFudGl0eSA9IG5ldyBCaWdEZWNpbWFsKGNoZWNrVG9xdCkNCg0KICAgIGJvb2xlYW4gaGFzQW1vdW50ID0gdG90YWxBbW91bnQuY29tcGFyZVRvKEJpZ0RlY2ltYWwuWkVSTykgIT0gMA0KICAgIGJvb2xlYW4gaGFzUXVhbnRpdHkgPSB0b3RhbFF1YW50aXR5LmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pICE9IDANCg0KICAgIGJvb2xlYW4gaGFzQW1vdW50T3JRdWFudGl0eSA9IGhhc0Ftb3VudCB8fCBoYXNRdWFudGl0eQ0KDQogICAgaWYgKGNoZWNrUG90Yy5lcXVhbHMoIjMwIikgfHwgY2hlY2tQb3RjLmVxdWFscygiNDAiKSkgew0KICAgICAgcmV0dXJuIGNoZWNrUHVzbC50b0ludGVnZXIoKSA8PSAzMCAmJiBjaGVja1B1c3QudG9JbnRlZ2VyKCkgPj0gMTUNCiAgICB9IGVsc2Ugew0KICAgICAgcmV0dXJuIChjaGVja1B1c2wudG9JbnRlZ2VyKCkgPD0gaW5wdXRQdXN0LnRvSW50ZWdlcigpICYmIGNoZWNrUHVzdC50b0ludGVnZXIoKSA+PSBpbnB1dFB1c2wudG9JbnRlZ2VyKCkpICYmIChjaGVja1B1c2wudG9JbnRlZ2VyKCkgPCA4NSkgJiYgaGFzQW1vdW50T3JRdWFudGl0eQ0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiByZXRyaXZlIFB1cmNoYXNlIG9yZGVyIHN1cHBsaWVyIG51bWJlciBmcm9tIE1QSEVBRA0KICAgKiANCiAgICovDQoNCiAgcHVibGljIGdldFB1cmNoYXNlT3JkZXJGb3JTdXBwbGllcigpIHsNCiAgICBEQkFjdGlvbiBxdWVyeU1waGVhZCA9IGRhdGFiYXNlLnRhYmxlKCJNUEhFQUQiKS5pbmRleCgiNDAiKS5zZWxlY3Rpb24oIklBUFVOTyIsICJJQUNPTk8iLCAiSUFTVU5PIiwgIklBUFVTTCIsICJJQVBVU1QiLCAiSUFQT1RDIiwgIklBVE9RVCIsICJJQUNPQU0iKS5idWlsZCgpDQogICAgaWYgKCFQVU5PLnRyaW0oKS5pc0VtcHR5KCkgJiYgIVNVTk8udHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwcmVzc2lvbiA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJNUEhFQUQiKQ0KICAgICAgICAgaWYgKCFQVU5PLmNvbnRhaW5zKCc7JykpIHsNCiAgICAgICAgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uZ3QoIklBUFVOTyIsIFBVTk8udHJpbSgpKQ0KICAgICAgICBxdWVyeU1waGVhZCA9IGRhdGFiYXNlLnRhYmxlKCJNUEhFQUQiKS5pbmRleCgiNDAiKS5tYXRjaGluZyhleHByZXNzaW9uKS5zZWxlY3Rpb24oIklBUFVOTyIsICJJQUNPTk8iLCAiSUFTVU5PIiwgIklBUFVTTCIsICJJQVBVU1QiLCAiSUFQT1RDIiwgIklBVE9RVCIsICJJQUNPQU0iKS5idWlsZCgpDQogICAgICB9DQoNCiAgICB9DQoNCiAgICBEQkNvbnRhaW5lciByZWNvcmRNcGhlYWQgPSBxdWVyeU1waGVhZC5nZXRDb250YWluZXIoKQ0KICAgIHJlY29yZE1waGVhZC5zZXQoIklBQ09OTyIsIEludGVnZXIucGFyc2VJbnQoQ09OTy50cmltKCkpKQ0KICAgIHJlY29yZE1waGVhZC5zZXQoIklBU1VOTyIsIFNVTk8udHJpbSgpKQ0KDQogICAgaW50IHJlYWRzID0gcXVlcnlNcGhlYWQucmVhZEFsbChyZWNvcmRNcGhlYWQsIDIsIGdldE1waGVhZFJlY29yZHMpDQoNCiAgfQ0KDQogIENsb3N1cmUgPCA/ID4gZ2V0TXBoZWFkUmVjb3JkcyA9IHsNCiAgICBEQkNvbnRhaW5lciByZWNvcmQgLT4NCiAgICBTdHJpbmcgUFVOTyA9IHJlY29yZC5nZXQoIklBUFVOTyIpID09IG51bGwgPyAiIiA6IHJlY29yZC5nZXQoIklBUFVOTyIpDQogICAgY2hlY2tQdXNsID0gcmVjb3JkLmdldCgnSUFQVVNMJykgPT0gbnVsbCA/ICIwMCIgOiByZWNvcmQuZ2V0KCdJQVBVU0wnKQ0KICAgIGNoZWNrUHVzdCA9IHJlY29yZC5nZXQoJ0lBUFVTVCcpID09IG51bGwgPyAiMDAiIDogcmVjb3JkLmdldCgnSUFQVVNUJykNCiAgICBjaGVja1BvdGMgPSByZWNvcmQuZ2V0KCJJQVBPVEMiKSA9PSBudWxsID8gIiIgOiByZWNvcmQuZ2V0KCdJQVBPVEMnKQ0KICAgIGNoZWNrVG9xdCA9IHJlY29yZC5nZXQoIklBVE9RVCIpID09IG51bGwgPyAiIiA6IHJlY29yZC5nZXQoJ0lBVE9RVCcpDQogICAgY2hlY2tDb2FtID0gcmVjb3JkLmdldCgnSUFDT0FNJykgPT0gbnVsbCA/ICIwIiA6IHJlY29yZC5nZXQoJ0lBQ09BTScpDQogICAgYm9vbGVhbiBpc1ZhbGlkUHVubyA9IHZhbGlkYXRlUHVubygpDQogICAgaWYgKGlzVmFsaWRQdW5vKSB7DQogICAgICB2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LmFkZChQVU5PLnRyaW0oKSkNCiAgICB9IGVsc2Ugew0KICAgICAgdmFsaWRQdXJjaGFzZU9yZGVyTGlzdC5hZGQoUFVOTy50cmltKCkpDQogICAgfQ0KDQogIH0NCg0KICAvKioNCiAgICogUmV0cml2ZSBwdXJjaGFzZSBvcmRlciBkZXRhaWxzIGZyb20gTVBIRUFEDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgYm9vbGVhbiBnZXRPcmRlckRldGFpbHMoU3RyaW5nIGVhY2hQdW5vKSB7DQoNCiAgICBib29sZWFuIHJlY29yZEZvdW5kID0gZmFsc2UNCiAgICBpbnQgY3VycmVudENvbXBhbnkgPSAoSW50ZWdlcikgcHJvZ3JhbS5nZXRMREFaRCgpLkNPTk8NCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNUEhFQUQiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklBQ09OTyIsICJJQVBVTk8iLCAiSUFQVURUIiwgIklBRFdEVCIsICJJQVNVTk8iLCAiSUFCVVlFIiwgIklBQ1VDRCIsICJJQVlSRTEiLCAiSUFURk5PIiwgIklBQ09BTSIsICJJQURJVkkiLCAiSUFGQUNJIiwgIklBV0hMTyIsICJJQU9SVFkiLCAiSUFURVBZIiwgIklBTU9ETCIsICJJQVRFUEEiLCAiSUFURURMIiwgIklBVEVMMSIsICJJQVRPUVQiKS5idWlsZCgpDQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICBjb250YWluZXIuc2V0KCJJQUNPTk8iLCBjdXJyZW50Q29tcGFueSkNCiAgICBjb250YWluZXIuc2V0KCJJQVBVTk8iLCBlYWNoUHVubykNCg0KICAgIGlmIChxdWVyeS5yZWFkKGNvbnRhaW5lcikpIHsNCiAgICAgIHJlY29yZEZvdW5kID0gdHJ1ZQ0KICAgICAgb1B1bm8gPSBjb250YWluZXIuZ2V0KCdJQVBVTk8nKQ0KICAgICAgb1B1ZHQgPSBjb250YWluZXIuZ2V0KCdJQVBVRFQnKQ0KICAgICAgb0R3ZHQgPSBjb250YWluZXIuZ2V0KCdJQURXRFQnKQ0KICAgICAgb1N1bm8gPSBjb250YWluZXIuZ2V0KCdJQVNVTk8nKQ0KICAgICAgb0J1eWUgPSBjb250YWluZXIuZ2V0KCdJQUJVWUUnKQ0KICAgICAgb0N1Y2QgPSBjb250YWluZXIuZ2V0KCdJQUNVQ0QnKQ0KICAgICAgb1lyZTEgPSBjb250YWluZXIuZ2V0KCdJQVlSRTEnKQ0KICAgICAgb1Rmbm8gPSBjb250YWluZXIuZ2V0KCdJQVRGTk8nKQ0KICAgICAgb0NvYW0gPSBjb250YWluZXIuZ2V0KCdJQUNPQU0nKQ0KICAgICAgb0RpdmkgPSBjb250YWluZXIuZ2V0KCdJQURJVkknKQ0KICAgICAgb0ZhY2kgPSBjb250YWluZXIuZ2V0KCdJQUZBQ0knKQ0KICAgICAgb1dobG8gPSBjb250YWluZXIuZ2V0KCdJQVdITE8nKQ0KICAgICAgb09ydHkgPSBjb250YWluZXIuZ2V0KCdJQU9SVFknKQ0KICAgICAgb1RlcHkgPSBjb250YWluZXIuZ2V0KCdJQVRFUFknKQ0KICAgICAgb01vZGwgPSBjb250YWluZXIuZ2V0KCdJQU1PREwnKQ0KICAgICAgb1RlcGEgPSBjb250YWluZXIuZ2V0KCdJQVRFUEEnKQ0KICAgICAgb1RlZGwgPSBjb250YWluZXIuZ2V0KCdJQVRFREwnKQ0KICAgICAgb1RlbDEgPSBjb250YWluZXIuZ2V0KCdJQVRFTDEnKQ0KICAgICAgb1RvcXQgPSBjb250YWluZXIuZ2V0KCdJQVRPUVQnKQ0KDQogICAgICBvRGF0ZSA9IExvY2FsRGF0ZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKQ0KDQogICAgICBEQkFjdGlvbiBxdWVyeUNzeXVzciA9IGRhdGFiYXNlLnRhYmxlKCJDU1lVU1IiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkNSQ09OTyIsICJDUkRJVkkiLCAiQ1JSRVNQIiwgIkNSUkVOTSIpLmJ1aWxkKCkNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lckNzeXVzciA9IHF1ZXJ5Q3N5dXNyLmdldENvbnRhaW5lcigpDQogICAgICBjb250YWluZXJDc3l1c3Iuc2V0KCJDUkNPTk8iLCBjdXJyZW50Q29tcGFueSkNCiAgICAgIGNvbnRhaW5lckNzeXVzci5zZXQoIkNSRElWSSIsIG9EaXZpKQ0KICAgICAgY29udGFpbmVyQ3N5dXNyLnNldCgiQ1JSRVNQIiwgb0J1eWUpDQoNCiAgICAgIGlmIChxdWVyeUNzeXVzci5yZWFkKGNvbnRhaW5lckNzeXVzcikpIHsNCiAgICAgICAgb1Jlbm0gPSBjb250YWluZXJDc3l1c3IuZ2V0KCJDUlJFTk0iKQ0KICAgICAgfQ0KDQogICAgICBEQkFjdGlvbiBxdWVyeUNpZG1hcyA9IGRhdGFiYXNlLnRhYmxlKCJDSURNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklEQ09OTyIsICJJRFNVTk8iLCAiSURDU0NEIiwgIklEUEhOTyIpLmJ1aWxkKCkNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lckNpZG1hcyA9IHF1ZXJ5Q2lkbWFzLmdldENvbnRhaW5lcigpDQogICAgICBjb250YWluZXJDaWRtYXMuc2V0KCJJRENPTk8iLCBjdXJyZW50Q29tcGFueSkNCiAgICAgIGNvbnRhaW5lckNpZG1hcy5zZXQoIklEU1VOTyIsIG9TdW5vKQ0KDQogICAgICBpZiAocXVlcnlDaWRtYXMucmVhZChjb250YWluZXJDaWRtYXMpKSB7DQogICAgICAgIG9Dc2NkID0gY29udGFpbmVyQ2lkbWFzLmdldCgiSURDU0NEIikNCiAgICAgICAgb1Bobm8gPSBjb250YWluZXJDaWRtYXMuZ2V0KCJJRFBITk8iKQ0KICAgICAgfQ0KDQogICAgICBEQkFjdGlvbiBxdWVyeUNpZHZlbiA9IGRhdGFiYXNlLnRhYmxlKCJDSURWRU4iKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklJQ09OTyIsICJJSVNVTk8iLCAiSUlJQVBDIikuYnVpbGQoKQ0KICAgICAgREJDb250YWluZXIgY29udGFpbmVyQ2lkdmVuID0gcXVlcnlDaWR2ZW4uZ2V0Q29udGFpbmVyKCkNCiAgICAgIGNvbnRhaW5lckNpZHZlbi5zZXQoIklJQ09OTyIsIGN1cnJlbnRDb21wYW55KQ0KICAgICAgY29udGFpbmVyQ2lkdmVuLnNldCgiSUlTVU5PIiwgb1N1bm8pDQoNCiAgICAgIGlmIChxdWVyeUNpZHZlbi5yZWFkKGNvbnRhaW5lckNpZHZlbikpIHsNCiAgICAgICAgb0lhcGMgPSBjb250YWluZXJDaWR2ZW4uZ2V0KCJJSUlBUEMiKQ0KICAgICAgfQ0KDQogICAgICBEQkFjdGlvbiBxdWVyeU1wb3JkdCA9IGRhdGFiYXNlLnRhYmxlKCJNUE9SRFQiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk9UQ09OTyIsICJPVE9SVFkiLCAiT1RQMjUwIiwgIk9UUE9UQyIpLmJ1aWxkKCkNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1wb3JkdCA9IHF1ZXJ5TXBvcmR0LmdldENvbnRhaW5lcigpDQogICAgICBjb250YWluZXJNcG9yZHQuc2V0KCJPVENPTk8iLCBjdXJyZW50Q29tcGFueSkNCiAgICAgIGNvbnRhaW5lck1wb3JkdC5zZXQoIk9UT1JUWSIsIG9PcnR5KQ0KDQogICAgICBTdHJpbmcgdFAyNTAgPSAiIg0KICAgICAgU3RyaW5nIHRQb3RjID0gIiINCiAgICAgIFN0cmluZyB0QWdudCA9IGNvbnRhaW5lci5nZXQoIklBQUdOVCIpDQoNCiAgICAgIGlmIChxdWVyeU1wb3JkdC5yZWFkKGNvbnRhaW5lck1wb3JkdCkpIHsNCiAgICAgICAgdFAyNTAgPSBjb250YWluZXJNcG9yZHQuZ2V0KCJPVFAyNTAiKQ0KICAgICAgICB0UG90YyA9IGNvbnRhaW5lck1wb3JkdC5nZXQoIk9UUE9UQyIpDQogICAgICB9DQoNCiAgICAgIFN0cmluZyB0U3VubyA9IGNvbnRhaW5lci5nZXQoIklBU1VOTyIpDQogICAgICBTdHJpbmcgdFJmdHkgPSAiIg0KICAgICAgU3RyaW5nIHRSZmlkID0gY29udGFpbmVyLmdldCgiSUFSRklEIikNCg0KICAgICAgaWYgKHRQMjUwLmVxdWFscygiMSIpICYmICF0QWdudC5lcXVhbHMoIiIpKSB7DQogICAgICAgIHRTdW5vID0gIiIgKyB0QWdudA0KICAgICAgfQ0KDQogICAgICBpZiAodFBvdGMuZXF1YWxzKCI2MCIpIHx8IHRQb3RjLmVxdWFscygiNjUiKSB8fCB0UG90Yy5lcXVhbHMoIjcwIikpIHsNCiAgICAgICAgdFJmdHkgPSAiMTUiDQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAodFBvdGMuZXF1YWxzKCI4MCIpIHx8IHRQb3RjLmVxdWFscygiODUiKSkgew0KICAgICAgICAgIHRSZnR5ID0gIjM1Ig0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRSZnR5ID0gIjEwIg0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIERCQWN0aW9uIHF1ZXJ5Q2lkcmVmID0gZGF0YWJhc2UudGFibGUoIkNJRFJFRiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiSVJDT05PIiwgIklSU1VOTyIsICJJUlJGVFkiLCAiSVJSRklEIiwgIklSUEhOTyIpLmJ1aWxkKCkNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lckNpZHJlZiA9IHF1ZXJ5Q2lkcmVmLmdldENvbnRhaW5lcigpDQogICAgICBjb250YWluZXJDaWRyZWYuc2V0KCJJUkNPTk8iLCBjdXJyZW50Q29tcGFueSkNCiAgICAgIGNvbnRhaW5lckNpZHJlZi5zZXQoIklSU1VOTyIsIHRTdW5vKQ0KICAgICAgY29udGFpbmVyQ2lkcmVmLnNldCgiSVJSRlRZIiwgdFJmdHkpDQogICAgICBjb250YWluZXJDaWRyZWYuc2V0KCJJUlJGSUQiLCB0UmZpZCkNCg0KICAgICAgaWYgKHF1ZXJ5Q2lkcmVmLnJlYWQoY29udGFpbmVyQ2lkcmVmKSkgew0KICAgICAgICBvUGhubyA9IGNvbnRhaW5lckNpZHJlZi5nZXQoIklSUEhOTyIpDQogICAgICB9DQoNCiAgICAgIERCQWN0aW9uIHF1ZXJ5Q3JldnRiID0gZGF0YWJhc2UudGFibGUoIkNSRVZUQiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiUlRDT05PIiwgIlJUUkVWVCIsICJSVFJJRE4iLCAiUlRSRU1LIikuYnVpbGQoKQ0KICAgICAgREJDb250YWluZXIgY29udGFpbmVyQ3JldnRiID0gcXVlcnlDcmV2dGIuZ2V0Q29udGFpbmVyKCkNCiAgICAgIGNvbnRhaW5lckNyZXZ0Yi5zZXQoIlJUQ09OTyIsIGN1cnJlbnRDb21wYW55KQ0KICAgICAgY29udGFpbmVyQ3JldnRiLnNldCgiUlRSRVZUIiwgMSkNCiAgICAgIGNvbnRhaW5lckNyZXZ0Yi5zZXQoIlJUUklETiIsIGVhY2hQdW5vKQ0KICAgICAgcXVlcnlDcmV2dGIucmVhZEFsbChjb250YWluZXJDcmV2dGIsIDMsIGNsb3N1cmVDcmV2dGIpDQoNCiAgICB9DQoNCiAgICByZXR1cm4gcmVjb3JkRm91bmQNCiAgfQ0KDQogIENsb3N1cmUgPCA/ID4gY2xvc3VyZUNyZXZ0YiA9IHsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJSZWNvcmQgLT4NCiAgICBvUmVtayA9IGNvbnRhaW5lclJlY29yZC5nZXQoIlJUUkVNSyIpDQogIH0NCg0KICAvKioNCiAgICogcmV0cml2ZSBjdXJyZW5jeSBzZXR0aW5nIGZvciBhIGRpdmlzaW9uDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgZ2V0Q3VycmVuY3lDb252ZXJzaW9uKFN0cmluZyBvRGl2aSkgew0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZQ0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKQ0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBvRG1jdSA9IHJlc3VsdHMuZ2V0KCdETUNVJykNCg0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJDT05PIjogQ09OTywgIkRJVkkiOiBvRGl2aV0NCiAgICBtaUNhbGxlci5jYWxsKCJNTlMxMDBNSSIsICJHZXRCYXNpY0RhdGEiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KICB9DQoNCiAgLyoqIHJldHJpdmUgc3VwcGxpZXIgZGV0YWlscyB1c2luZyBDUlM2MjBNSS5HZXRCYXNpY0RhdGENCiAgICovDQoNCiAgcHVibGljIGdldFN1cHBsaWVyTmFtZShTdHJpbmcgb1N1bm8pIHsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWUNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJykNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgb1N1bm0gPSByZXN1bHRzLmdldCgnU1VOTScpDQoNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJTVU5PIjogb1N1bm9dDQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTNjIwTUkiLCAiR2V0QmFzaWNEYXRhIiwgcGFyYW1zLCBjYWxsYmFjaykNCiAgfQ0KDQogIC8qKg0KICAgKiBTZW5kIHB1cmNoYXNlIG9yZGVyIGRhdGEgdG8gb3V0cHV0IEFQSSBmaWVsZHMNCiAgICogDQogICAqLw0KDQogIHB1YmxpYyB3cml0ZVB1cmNoYXNlT3JkZXIoKSB7DQogICAgaWYgKG9QdXNsLmVxdWFscygnNDAnKSB8fCBvUHVzbC5lcXVhbHMoJzQ1JykpIHsNCiAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgJ09IJykNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgb1B1bm8pDQogICAgICBtaS5vdXREYXRhLnB1dCgnREFURScsIG9EYXRlKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVRFQnLCBvUHVkdCkNCiAgICAgIG1pLm91dERhdGEucHV0KCdEV0RUJywgb0R3ZHQpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUkVOTScsIG9SZW5tKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVTk8nLCBvU3VubykNCiAgICAgIG1pLm91dERhdGEucHV0KCdDU0NEJywgb0NzY2QpDQogICAgICBtaS5vdXREYXRhLnB1dCgnQlVZRScsIG9CdXllKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0NVQ0QnLCBvQ3VjZCkNCiAgICAgIG1pLm91dERhdGEucHV0KCdZUkUxJywgb1lyZTEpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUEhOTycsIG9QaG5vKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RGTk8nLCBvVGZubykNCiAgICAgIG1pLm91dERhdGEucHV0KCdSRU1LJywgb1JlbWspDQogICAgICBtaS5vdXREYXRhLnB1dCgnQ09BTScsIG9Db2FtKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0RJVkknLCBvRGl2aSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdGQUNJJywgb0ZhY2kpDQogICAgICBtaS5vdXREYXRhLnB1dCgnV0hMTycsIG9XaGxvKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ09SVFknLCBvT3J0eSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdURVBZJywgb1RlcHkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnTU9ETCcsIG9Nb2RsKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RFUEEnLCBvVGVwYSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdURURMJywgb1RlZGwpDQogICAgICBtaS5vdXREYXRhLnB1dCgnVEVMMScsIG9UZWwxKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RPUVQnLCBvVG9xdCkNCiAgICAgIG1pLm91dERhdGEucHV0KCdTVU5NJywgb1N1bm0pDQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVTTCcsIG9QdXNsKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVU1QnLCBvUHVzdCkNCiAgICAgIG1pLndyaXRlKCkNCiAgICB9DQoNCiAgICBpZiAob1B1c2wgPCAnODUnICYmICghb1B1c2wuZXF1YWxzKCc0MCcpICYmICFvUHVzbC5lcXVhbHMoJzQ1JykpKSB7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICdPSCcpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVOTycsIG9QdW5vKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0RBVEUnLCBvRGF0ZSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVURUJywgb1B1ZHQpDQogICAgICBtaS5vdXREYXRhLnB1dCgnRFdEVCcsIG9Ed2R0KQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JFTk0nLCBvUmVubSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdTVU5PJywgb1N1bm8pDQogICAgICBtaS5vdXREYXRhLnB1dCgnQ1NDRCcsIG9Dc2NkKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0JVWUUnLCBvQnV5ZSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdDVUNEJywgb0N1Y2QpDQogICAgICBtaS5vdXREYXRhLnB1dCgnWVJFMScsIG9ZcmUxKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BITk8nLCBvUGhubykNCiAgICAgIG1pLm91dERhdGEucHV0KCdURk5PJywgb1Rmbm8pDQogICAgICBtaS5vdXREYXRhLnB1dCgnUkVNSycsIG9SZW1rKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0NPQU0nLCBvQ29hbSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdESVZJJywgb0RpdmkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnRkFDSScsIG9GYWNpKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1dITE8nLCBvV2hsbykNCiAgICAgIG1pLm91dERhdGEucHV0KCdPUlRZJywgb09ydHkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnVEVQWScsIG9UZXB5KQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ01PREwnLCBvTW9kbCkNCiAgICAgIG1pLm91dERhdGEucHV0KCdURVBBJywgb1RlcGEpDQogICAgICBtaS5vdXREYXRhLnB1dCgnVEVETCcsIG9UZWRsKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RFTDEnLCBvVGVsMSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdUT1FUJywgb1RvcXQpDQogICAgICBtaS5vdXREYXRhLnB1dCgnU1VOTScsIG9TdW5tKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVU0wnLCBvUHVzbCkNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVVNUJywgb1B1c3QpDQogICAgICBtaS53cml0ZSgpDQogICAgfQ0KICB9DQoNCiAgLyoqDQogICAqIEdldCBjaGFyZ2VzIGZvciBlYWNoIHB1cmNoYXNlIG9yZGVyIGZyb20gdGFibGUgTVBPRVhQDQogICAqIA0KICAgKi8NCg0KICBwcml2YXRlIGdldENoYXJnZXMoU3RyaW5nIGVhY2hQdW5vKSB7DQogICAgY2hhcmdlTGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKQ0KICAgIERCQWN0aW9uIHF1ZXJ5TXBvZXhwID0gZGF0YWJhc2UudGFibGUoIk1QT0VYUCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiSVZDT05PIiwgIklWUFVOTyIsICJJVlBOTEkiLCAiSVZQTkxTIiwgIklWQ0RTRSIsICJJVlJFUE4iLCAiSVZFWFRZIiwgIklWQ0VJRCIsICJJVkVYSUMiLCAiSVZXU09QIiwgIklWQ1VDRCIsICJJVkNFVkEiLCAiSVZDRVZKIiwgIklWVEhQUiIsICJJVklWQ1EiLCAiSVZBQ0lOIikuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIHJlY29yZE1wb2V4cCA9IHF1ZXJ5TXBvZXhwLmdldENvbnRhaW5lcigpDQogICAgcmVjb3JkTXBvZXhwLnNldCgiSVZDT05PIiwgSW50ZWdlci5wYXJzZUludChDT05PLnRyaW0oKSkpDQogICAgcmVjb3JkTXBvZXhwLnNldCgiSVZQVU5PIiwgZWFjaFB1bm8udHJpbSgpKQ0KICAgIHJlY29yZE1wb2V4cC5zZXQoIklWUE5MSSIsIDApDQogICAgcmVjb3JkTXBvZXhwLnNldCgiSVZQTkxTIiwgMCkNCg0KICAgIGludCByZWFkcyA9IHF1ZXJ5TXBvZXhwLnJlYWRBbGwocmVjb3JkTXBvZXhwLCA0LCBnZXRNcG9leHBSZWNvcmRzKQ0KDQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IGdldE1wb2V4cFJlY29yZHMgPSB7DQogICAgREJDb250YWluZXIgcmVjb3JkIC0+DQogICAgU3RyaW5nIFBOTEkgPSByZWNvcmQuZ2V0KCdJVlBOTEknKQ0KICAgIFN0cmluZyBQTkxTID0gcmVjb3JkLmdldCgnSVZQTkxTJykNCiAgICBTdHJpbmcgQ0RTRSA9IHJlY29yZC5nZXQoJ0lWQ0RTRScpDQogICAgU3RyaW5nIFJFUE4gPSByZWNvcmQuZ2V0KCdJVlJFUE4nKQ0KICAgIFN0cmluZyBFWFRZID0gcmVjb3JkLmdldCgnSVZFWFRZJykNCiAgICBTdHJpbmcgQ0VJRCA9IHJlY29yZC5nZXQoJ0lWQ0VJRCcpDQogICAgU3RyaW5nIEVYSUMgPSByZWNvcmQuZ2V0KCdJVkVYSUMnKQ0KICAgIFN0cmluZyBXU09QID0gcmVjb3JkLmdldCgnSVZXU09QJykNCiAgICBTdHJpbmcgQ1VDRCA9IHJlY29yZC5nZXQoJ0lWQ1VDRCcpDQogICAgU3RyaW5nIENFVkEgPSByZWNvcmQuZ2V0KCdJVkNFVkEnKQ0KICAgIFN0cmluZyBDRVZKID0gcmVjb3JkLmdldCgnSVZDRVZKJykNCiAgICBTdHJpbmcgVEhQUiA9IHJlY29yZC5nZXQoJ0lWVEhQUicpDQogICAgU3RyaW5nIElWQ1EgPSByZWNvcmQuZ2V0KCdJVklWQ1EnKQ0KDQogICAgU3RyaW5nIEFDSU4gPSByZWNvcmQuZ2V0KCdJVkFDSU4nKQ0KICAgIEhhc2h0YWJsZSB0ZW1wVGFibGUgPSBuZXcgSGFzaHRhYmxlIDwgU3RyaW5nLA0KICAgIFN0cmluZyA+ICgpDQogICAgdGVtcFRhYmxlLnB1dCgnUE5MSScsIFBOTEkpDQogICAgdGVtcFRhYmxlLnB1dCgnUE5MUycsIFBOTFMpDQogICAgdGVtcFRhYmxlLnB1dCgnQ0RTRScsIENEU0UpDQogICAgdGVtcFRhYmxlLnB1dCgnUkVQTicsIFJFUE4pDQogICAgdGVtcFRhYmxlLnB1dCgnRVhUWScsIEVYVFkpDQogICAgdGVtcFRhYmxlLnB1dCgnQ0VJRCcsIENFSUQpDQogICAgdGVtcFRhYmxlLnB1dCgnRVhJQycsIEVYSUMpDQogICAgdGVtcFRhYmxlLnB1dCgnV1NPUCcsIFdTT1ApDQogICAgdGVtcFRhYmxlLnB1dCgnQ1VDRCcsIENVQ0QpDQogICAgdGVtcFRhYmxlLnB1dCgnQ0VWQScsIENFVkEpDQogICAgdGVtcFRhYmxlLnB1dCgnQ0VWSicsIENFVkopDQogICAgdGVtcFRhYmxlLnB1dCgnVEhQUicsIFRIUFIpDQogICAgdGVtcFRhYmxlLnB1dCgnSVZDUScsIElWQ1EpDQogICAgdGVtcFRhYmxlLnB1dCgnQUNJTicsIEFDSU4pDQogICAgY2hhcmdlTGlzdC5hZGQodGVtcFRhYmxlKQ0KDQogIH0NCg0KICAvKioNCiAgICogc2VuZCBjaGFyZ2UgZGV0YWlscyB0byBvdXRwdXQgYXBpIGZpZWxkcw0KICAgKiANCiAgICovDQoNCiAgcHVibGljIHdyaXRlQ2hhcmdlcyhTdHJpbmcgZWFjaFB1bm8sIEhhc2h0YWJsZSBlYWNoQ2hhcmdlKSB7DQogICAgU3RyaW5nIENFSUQgPSBlYWNoQ2hhcmdlLmdldCgnQ0VJRCcpDQogICAgU3RyaW5nIFRYMzAgPSAiIg0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZQ0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKQ0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBUWDMwID0gcmVzdWx0cy5nZXQoJ1RYMzAnKQ0KDQogICAgICB9DQogICAgICBTdHJpbmcgUE5MSSA9IGVhY2hDaGFyZ2UuZ2V0KCdQTkxJJykNCiAgICAgIFN0cmluZyBQTkxTID0gZWFjaENoYXJnZS5nZXQoJ1BOTFMnKQ0KICAgICAgU3RyaW5nIENEU0UgPSBlYWNoQ2hhcmdlLmdldCgnQ0RTRScpDQogICAgICBTdHJpbmcgUkVQTiA9IGVhY2hDaGFyZ2UuZ2V0KCdSRVBOJykNCiAgICAgIFN0cmluZyBFWFRZID0gZWFjaENoYXJnZS5nZXQoJ0VYVFknKQ0KICAgICAgU3RyaW5nIEVYSUMgPSBlYWNoQ2hhcmdlLmdldCgnRVhJQycpDQogICAgICBTdHJpbmcgV1NPUCA9IGVhY2hDaGFyZ2UuZ2V0KCdXU09QJykNCiAgICAgIFN0cmluZyBDVUNEID0gZWFjaENoYXJnZS5nZXQoJ0NVQ0QnKQ0KICAgICAgU3RyaW5nIENFVkEgPSBlYWNoQ2hhcmdlLmdldCgnQ0VWQScpDQogICAgICBTdHJpbmcgQ0VWSiA9IGVhY2hDaGFyZ2UuZ2V0KCdDRVZKJykNCiAgICAgIFN0cmluZyBUSFBSID0gZWFjaENoYXJnZS5nZXQoJ1RIUFInKQ0KICAgICAgU3RyaW5nIElWQ1EgPSBlYWNoQ2hhcmdlLmdldCgnSVZDUScpDQogICAgICBTdHJpbmcgQUNJTiA9IGVhY2hDaGFyZ2UuZ2V0KCdBQ0lOJykNCg0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAnT0MnKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVTk8nLCBlYWNoUHVubykNCiAgICAgIG1pLm91dERhdGEucHV0KCdDRFNFJywgQ0RTRSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdSRVBOJywgUkVQTikNCiAgICAgIG1pLm91dERhdGEucHV0KCdFWFRZJywgRVhUWSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdFWElDJywgRVhJQykNCiAgICAgIG1pLm91dERhdGEucHV0KCdXU09QJywgV1NPUCkNCiAgICAgIG1pLm91dERhdGEucHV0KCdDQ1VDJywgQ1VDRCkNCiAgICAgIG1pLm91dERhdGEucHV0KCdDRVZBJywgQ0VWQSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdDRVZKJywgQ0VWSikNCiAgICAgIG1pLm91dERhdGEucHV0KCdUSFBSJywgVEhQUikNCiAgICAgIG1pLm91dERhdGEucHV0KCdJVkNRJywgSVZDUSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdUWDMwJywgVFgzMCkNCiAgICAgIG1pLm91dERhdGEucHV0KCdDRUlEJywgQ0VJRCkNCiAgICAgIG1pLndyaXRlKCkNCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ0VJRCI6IENFSUQudHJpbSgpXQ0KICAgIG1pQ2FsbGVyLmNhbGwoIlBQUzI4ME1JIiwgIkdldEVsZW1lbnQiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KDQogIH0NCg0KICAvKioNCiAgICogUmV0cml2ZSBwdXJjaGFzZSBvcmRlciBsaW5lIGRldGFpbHMgZnJvbSBNUExJTkUNCiAgICogDQogICAqLw0KDQogIHB1YmxpYyBnZXRMaW5lRGV0YWlscyhTdHJpbmcgZWFjaFB1bm8pIHsNCg0KICAgIGxpbmVMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpDQogICAgaW50IGN1cnJlbnRDb21wYW55ID0gKEludGVnZXIpIHByb2dyYW0uZ2V0TERBWkQoKS5DT05PDQoNCiAgICBEQkFjdGlvbiBxdWVyeU1wbGluZSA9IGRhdGFiYXNlLnRhYmxlKCJNUExJTkUiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklCQ09OTyIsICJJQlBVTk8iLCAiSUJQTkxJIiwgIklCUE5MUyIsICJJQklUTk8iLCAiSUJTSVRFIiwgIklCQ0ZRQSIsICJJQlBVVU4iLCAiSUJXSExPIiwgIklCUFVTVCIsICJJQlBVU0wiLCAiSUJTVU5PIiwgIklCUElURCIsICJJQlBJVFQiLCAiSUJQVVBSIiwgIklCQ1BQUiIsICJJQkNGRDEiLCAiSUJDRkQyIiwgIklCQ0ZEMyIsICJJQlBQVU4iLCAiSUJQVUNEIiwgIklCTE5BTSIsICJJQlBUQ0QiLCAiSUJWVENEIiwgIklCT1JRQSIsICJJQkFEUUEiLCAiSUJSVlFBIiwgIklCQ0FRQSIsICJJQlJKUUEiLCAiSUJTRFFBIiwgIklCSVZRQSIsICJJQlBVUkMiLCAiSUJCVVlFIiwgIklCR1JNVCIsICJJQlJPUkMiLCAiSUJST1JOIiwgIklCUk9STCIsICJJQlJPUlgiLCAiSUJNT0RMIiwgIklCVEVETCIsICJJQlRFTDEiLCAiSUJUTlFBIikuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1wbGluZSA9IHF1ZXJ5TXBsaW5lLmdldENvbnRhaW5lcigpDQogICAgY29udGFpbmVyTXBsaW5lLnNldCgiSUJDT05PIiwgY3VycmVudENvbXBhbnkpDQogICAgY29udGFpbmVyTXBsaW5lLnNldCgiSUJQVU5PIiwgZWFjaFB1bm8pDQoNCiAgICBxdWVyeU1wbGluZS5yZWFkQWxsKGNvbnRhaW5lck1wbGluZSwgMiwgY2xvc3VyZU1wbGluZSkNCg0KICB9DQoNCiAgQ2xvc3VyZSA8ID8gPiBjbG9zdXJlTXBsaW5lID0gew0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1wbGluZSAtPg0KDQogICAgSGFzaHRhYmxlIHRlbXBUYWJsZSA9IG5ldyBIYXNodGFibGUgPCBTdHJpbmcsDQogICAgU3RyaW5nID4gKCkNCiAgICB0ZW1wVGFibGUucHV0KCdQTkxJJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQTkxJJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdQTkxTJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQTkxTJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdJVE5PJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJJVE5PJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdTSVRFJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJTSVRFJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdDRlFBJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJDRlFBJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdQVVVOJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVVVOJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdXSExPJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJXSExPJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdQVVNUJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVVNUJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdQVVNMJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVVNMJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdTVU5PJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJTVU5PJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdQSVREJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQSVREJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdQSVRUJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQSVRUJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdQVVBSJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVVBSJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdDUFBSJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJDUFBSJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdDRkQxJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJDRkQxJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdDRkQyJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJDRkQyJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdDRkQzJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJDRkQzJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdQUFVOJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQUFVOJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdQVUNEJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVUNEJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdMTkFNJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJMTkFNJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdQVENEJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVENEJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdWVENEJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJWVENEJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdPUlFBJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJPUlFBJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdBRFFBJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJBRFFBJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdUTlFBJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJUTlFBJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdSVlFBJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJSVlFBJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdDQVFBJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJDQVFBJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdSSlFBJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJSSlFBJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdTRFFBJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJTRFFBJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdJVlFBJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJJVlFBJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdQVVJDJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVVJDJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdCVVlFJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJCVVlFJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdHUk1UJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJHUk1UJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdWVENEJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJWVENEJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdST1JDJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJST1JDJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdST1JOJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJST1JOJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdST1JMJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJST1JMJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdST1JYJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJST1JYJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdNT0RMJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJNT0RMJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdURURMJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJURURMJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdURUwxJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJURUwxJykudG9TdHJpbmcoKSkNCg0KICAgIGludCBjdXJyZW50Q29tcGFueSA9IChJbnRlZ2VyKSBwcm9ncmFtLmdldExEQVpEKCkuQ09OTw0KDQogICAgU3RyaW5nIHRJdG5vID0gY29udGFpbmVyTXBsaW5lLmdldCgnSUJJVE5PJykudG9TdHJpbmcoKQ0KICAgIFN0cmluZyB0VW5tcyA9ICIiDQogICAgU3RyaW5nIHRDd3VuID0gIiINCiAgICBTdHJpbmcgdERjY2QgPSAiMCINCiAgICBTdHJpbmcgdFBkY2MgPSAiMCINCiAgICBTdHJpbmcgZGVjaW1hbFplcm9lcyA9ICIiDQoNCiAgICBEQkFjdGlvbiBxdWVyeU1pdG1hcyA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1NQ09OTyIsICJNTUlUTk8iLCAiTU1VTk1TIiwgIk1NRENDRCIsICJNTVBEQ0MiLCAiTU1DV1VOIikuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1pdG1hcyA9IHF1ZXJ5TWl0bWFzLmdldENvbnRhaW5lcigpDQogICAgY29udGFpbmVyTWl0bWFzLnNldCgiTU1DT05PIiwgY3VycmVudENvbXBhbnkpDQogICAgY29udGFpbmVyTWl0bWFzLnNldCgiTU1JVE5PIiwgdEl0bm8pDQoNCiAgICBpZiAocXVlcnlNaXRtYXMucmVhZChjb250YWluZXJNaXRtYXMpKSB7DQoNCiAgICAgIHRVbm1zID0gY29udGFpbmVyTWl0bWFzLmdldCgiTU1VTk1TIikNCiAgICAgIHRDd3VuID0gY29udGFpbmVyTWl0bWFzLmdldCgiTU1DV1VOIikNCiAgICAgIHREY2NkID0gY29udGFpbmVyTWl0bWFzLmdldCgiTU1EQ0NEIikNCiAgICAgIHRQZGNjID0gY29udGFpbmVyTWl0bWFzLmdldCgiTU1QRENDIikNCg0KICAgICAgaW50IGRjY2QgPSBJbnRlZ2VyLnBhcnNlSW50KHREY2NkKQ0KICAgICAgaWYgKGRjY2QgPiAwKSB7DQogICAgICAgIGRlY2ltYWxaZXJvZXMgPSAiLiINCg0KICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGRjY2Q7IGkrKykgew0KICAgICAgICAgICAgIGRlY2ltYWxaZXJvZXMgPSBkZWNpbWFsWmVyb2VzICsgIjAiDQogICAgICAgICAgIH0NCiAgICAgICAgIH0NCiAgICAgICB9DQoNCiAgICB0ZW1wVGFibGUucHV0KCdVTk1TJywgdFVubXMpDQogICAgdGVtcFRhYmxlLnB1dCgnQ1dVTicsIHRDd3VuKQ0KDQogICAgU3RyaW5nIHREbWNmID0gIjEiDQogICAgU3RyaW5nIHRDb2ZhID0gIjEiDQogICAgU3RyaW5nIHRQdXVuID0gY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVVVOJykudG9TdHJpbmcoKQ0KICAgIGJvb2xlYW4gZXhpc3RNaXRhdW4gPSBmYWxzZQ0KDQogICAgREJBY3Rpb24gcXVlcnlNaXRhdW4gPSBkYXRhYmFzZS50YWJsZSgiTUlUQVVOIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNVUNPTk8iLCAiTVVJVE5PIiwgIk1VQVVUUCIsICJNVUFMVU4iLCAiTVVETUNGIiwgIk1VQ09GQSIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNaXRhdW4gPSBxdWVyeU1pdGF1bi5nZXRDb250YWluZXIoKQ0KICAgIGNvbnRhaW5lck1pdGF1bi5zZXQoIk1VQ09OTyIsIGN1cnJlbnRDb21wYW55KQ0KICAgIGNvbnRhaW5lck1pdGF1bi5zZXQoIk1VSVROTyIsIHRJdG5vKQ0KICAgIGNvbnRhaW5lck1pdGF1bi5zZXQoIk1VQVVUUCIsIDEpDQogICAgY29udGFpbmVyTWl0YXVuLnNldCgiTVVBTFVOIiwgdFB1dW4pDQoNCiAgICBpZiAocXVlcnlNaXRhdW4ucmVhZChjb250YWluZXJNaXRhdW4pKSB7DQogICAgICBleGlzdE1pdGF1biA9IHRydWUNCiAgICAgIHREbWNmID0gY29udGFpbmVyTWl0YXVuLmdldCgiTVVETUNGIikNCiAgICAgIHRDb2ZhID0gY29udGFpbmVyTWl0YXVuLmdldCgiTVVDT0ZBIikNCiAgICB9DQoNCiAgICBTdHJpbmcgdE9ycXQgPSBjb250YWluZXJNcGxpbmUuZ2V0KCdJQk9SUUEnKS50b1N0cmluZygpDQoNCiAgICBkb3VibGUgdFB4bnVtID0gRG91YmxlLnBhcnNlRG91YmxlKHRPcnF0KQ0KDQogICAgRGVjaW1hbEZvcm1hdCBkZiA9IG5ldyBEZWNpbWFsRm9ybWF0KCIjIyMjIyMjIyMjIzAiICsgZGVjaW1hbFplcm9lcykNCiAgICB0T3JxdCA9ICIiICsgZGYuZm9ybWF0KHRQeG51bSkNCg0KICAgIHRlbXBUYWJsZS5wdXQoJ09SUVQnLCB0T3JxdCkNCg0KICAgIHRlbXBUYWJsZS5wdXQoJ0xPQ0QnLCBwcm9ncmFtLmdldExEQVpEKCkuTE9DRC50b1N0cmluZygpKQ0KDQogICAgU3RyaW5nIHRQdXF0ID0gY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVUNEJykudG9TdHJpbmcoKQ0KDQogICAgdFB4bnVtID0gRG91YmxlLnBhcnNlRG91YmxlKHRQdXF0KQ0KDQogICAgaWYgKCF0UHV1bi5lcXVhbHModFVubXMpKSB7DQoNCiAgICAgIGlmIChleGlzdE1pdGF1bikgew0KDQogICAgICAgIGlmICh0RG1jZi5lcXVhbHMoIjIiKSkgew0KICAgICAgICAgIHRQeG51bSA9IHRQeG51bSAqIERvdWJsZS5wYXJzZURvdWJsZSh0Q29mYSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0UHhudW0gPSB0UHhudW0gLyBEb3VibGUucGFyc2VEb3VibGUodENvZmEpDQogICAgICAgIH0NCg0KICAgICAgfQ0KDQogICAgfQ0KDQogICAgZGYgPSBuZXcgRGVjaW1hbEZvcm1hdCgiIyMjIyMjIyMjIyMwIiArIGRlY2ltYWxaZXJvZXMpDQogICAgdFB1cXQgPSAiIiArIGRmLmZvcm1hdCh0UHhudW0pDQogICAgdGVtcFRhYmxlLnB1dCgnUFVRVCcsIHRQdXF0KQ0KDQogICAgU3RyaW5nIHRSdnF0ID0gY29udGFpbmVyTXBsaW5lLmdldCgnSUJSVlFBJykudG9TdHJpbmcoKQ0KDQogICAgdFB4bnVtID0gRG91YmxlLnBhcnNlRG91YmxlKHRSdnF0KQ0KDQogICAgZGYgPSBuZXcgRGVjaW1hbEZvcm1hdCgiIyMjIyMjIyMjIyMwIiArIGRlY2ltYWxaZXJvZXMpDQogICAgdFJ2cXQgPSAiIiArIGRmLmZvcm1hdCh0UHhudW0pDQogICAgdGVtcFRhYmxlLnB1dCgnUlZRVCcsIHRSdnF0KQ0KDQogICAgbGluZUxpc3QuYWRkKHRlbXBUYWJsZSkNCg0KICB9DQoNCiAgLyoqDQogICAqIFJldHJpdmUgVW5pdCBvZiBNZWFzdXJlbWVudCBmcm9tIHRhYmxlIE1JVEFVTg0KICAgKiANCiAgICovDQoNCiAgcHVibGljIGdldFVuaXRPZk1lYXN1cmVtZW50Q29udmVyc2lvbihIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBTdHJpbmcgSVROTyA9IGVhY2hMaW5lLmdldCgnSVROTycpDQogICAgZWFjaExpbmVQdXVuID0gZWFjaExpbmUuZ2V0KCdQVVVOJykNCiAgICBlYWNoTGluZVBwdW4gPSBlYWNoTGluZS5nZXQoJ1BQVU4nKQ0KICAgIGludCBjdXJyZW50Q29tcGFueSA9IHByb2dyYW0uZ2V0TERBWkQoKS5DT05PDQoNCiAgICBEQkFjdGlvbiBxdWVyeU1pdGF1biA9IGRhdGFiYXNlLnRhYmxlKCJNSVRBVU4iKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1VQ09OTyIsICJNVUlUTk8iLCAiTVVBVVRQIiwgIk1VQUxVTiIsICJNVURNQ0YiLCAiTVVDT0ZBIiwgIk1VRENDRCIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNaXRhdW4gPSBxdWVyeU1pdGF1bi5nZXRDb250YWluZXIoKQ0KICAgIGNvbnRhaW5lck1pdGF1bi5zZXQoIk1VQ09OTyIsIGN1cnJlbnRDb21wYW55KQ0KICAgIGNvbnRhaW5lck1pdGF1bi5zZXQoIk1VSVROTyIsIElUTk8pDQogICAgcXVlcnlNaXRhdW4ucmVhZEFsbChjb250YWluZXJNaXRhdW4sIDIsIGNsb3N1cmVNaXRhdW4pDQoNCiAgfQ0KDQogIENsb3N1cmUgPCA/ID4gY2xvc3VyZU1pdGF1biA9IHsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNaXRhdW4gLT4NCg0KICAgIFN0cmluZyBBVVRQID0gY29udGFpbmVyTWl0YXVuLmdldCgnTVVBVVRQJykNCiAgICBBVVRQQSA9IEFVVFANCiAgICBTdHJpbmcgQUxVTiA9IGNvbnRhaW5lck1pdGF1bi5nZXQoJ01VQUxVTicpDQogICAgU3RyaW5nIERDQ0QgPSBjb250YWluZXJNaXRhdW4uZ2V0KCdNVURDQ0QnKQ0KICAgIFN0cmluZyBDT0ZBID0gY29udGFpbmVyTWl0YXVuLmdldCgnTVVDT0ZBJykNCiAgICBTdHJpbmcgRE1DRiA9IGNvbnRhaW5lck1pdGF1bi5nZXQoJ01VRE1DRicpDQogICAgaWYgKEFMVU4udHJpbSgpLmVxdWFscyhlYWNoTGluZVB1dW4udHJpbSgpKSAmJiBBVVRQLnRyaW0oKS5lcXVhbHMoIjEiKSkgew0KICAgICAgb3JkZXJVbURjY2QgPSBEQ0NEDQogICAgICBvcmRlclVtQ29mYSA9IENPRkENCiAgICAgIG9yZGVyVW1EbWNmID0gRE1DRg0KICAgIH0NCiAgICBpZiAoQUxVTi50cmltKCkuZXF1YWxzKGVhY2hMaW5lUHB1bi50cmltKCkpKSB7DQogICAgICBpZiAoQVVUUC50cmltKCkuZXF1YWxzKCIxIikpIHsNCiAgICAgICAgcHJpY2VVbURjY2QgPSBEQ0NEDQogICAgICB9DQogICAgICBpZiAoQVVUUC50cmltKCkuZXF1YWxzKCIyIikpIHsNCiAgICAgICAgcHJpY2VVbUNvZmEgPSBDT0ZBDQogICAgICAgIHByaWNlVW1EbWNmID0gRE1DRg0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBnZXQgYmFzaWMgZGVjaW1hbCBjb2RlIGZvciBJdGVtIGFuZCBvcmRlciBxdWFudGl0eUludm9pY2VkDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgZ2V0QmFzaWNEZWNpbWFsQ29kZShIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBTdHJpbmcgSVROTyA9IGVhY2hMaW5lLmdldCgnSVROTycpDQogICAgU3RyaW5nIE9SUUEgPSBlYWNoTGluZS5nZXQoJ09SUUEnKQ0KICAgIFN0cmluZyBBRFFBID0gZWFjaExpbmUuZ2V0KCdBRFFBJykNCiAgICBTdHJpbmcgVE5RQSA9IGVhY2hMaW5lLmdldCgnVE5RQScpDQogICAgU3RyaW5nIE9SUVQgPSBlYWNoTGluZS5nZXQoJ09SUVQnKQ0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZQ0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKQ0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBiYXNpY1VtRGNjZCA9IHJlc3VsdHMuZ2V0KCdEQ0NEJykNCiAgICAgIH0NCiAgICAgIGlmIChBRFFBICE9IG51bGwgJiYgQURRQS50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICAgIEJpZ0RlY2ltYWwgYWR2aXNlZFF1YW50aXR5ID0gbmV3IEJpZ0RlY2ltYWwoQURRQSkNCiAgICAgICAgaWYgKGFkdmlzZWRRdWFudGl0eS5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSAhPSAwKSB7DQogICAgICAgICAgYmFzaWNVbURjY2QgPSBiYXNpY1VtRGNjZC5lcXVhbHMoIiIpID8gIjIiIDogYmFzaWNVbURjY2QNCiAgICAgICAgICBvcmRlclVtQ29mYSA9IG9yZGVyVW1Db2ZhLmVxdWFscygiIikgPyAiMSIgOiBvcmRlclVtQ29mYS50cmltKCkNCiAgICAgICAgICBvcmRlclVtRG1jZiA9IG9yZGVyVW1EbWNmLmVxdWFscygiIikgPyAiMSIgOiBvcmRlclVtRG1jZi50cmltKCkNCg0KICAgICAgICAgIEJpZ0RlY2ltYWwgb3JkZXJlZFF1YW50aXR5ID0gbmV3IEJpZ0RlY2ltYWwoT1JRQSkNCiAgICAgICAgICBCaWdEZWNpbWFsIGNvbnZlcnNpb25GYWN0b3IgPSBuZXcgQmlnRGVjaW1hbChvcmRlclVtQ29mYSkNCiAgICAgICAgICBCaWdJbnRlZ2VyIGRlY2ltYWxQbGFjZXMgPSBuZXcgQmlnSW50ZWdlcihiYXNpY1VtRGNjZCkNCg0KICAgICAgICAgIEJpZ0RlY2ltYWwgYmFzZVF1YW50aXR5ID0gbnVsbA0KDQogICAgICAgICAgaWYgKG9yZGVyVW1EbWNmLmVxdWFscygiMSIpKSB7DQogICAgICAgICAgICBiYXNlUXVhbnRpdHkgPSBvcmRlcmVkUXVhbnRpdHkuc2V0U2NhbGUoOCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLm11bHRpcGx5KGNvbnZlcnNpb25GYWN0b3IpDQogICAgICAgICAgICBPUlFUID0gYmFzZVF1YW50aXR5LnNldFNjYWxlKGRlY2ltYWxQbGFjZXMuaW50VmFsdWUoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBiYXNlUXVhbnRpdHkgPSBvcmRlcmVkUXVhbnRpdHkuc2V0U2NhbGUoOCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLmRpdmlkZShjb252ZXJzaW9uRmFjdG9yLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkNCiAgICAgICAgICAgIE9SUVQgPSBiYXNlUXVhbnRpdHkuc2V0U2NhbGUoZGVjaW1hbFBsYWNlcy5pbnRWYWx1ZSgpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQogICAgICAgICAgfQ0KICAgICAgICAgIGVhY2hMaW5lLnJlcGxhY2UoJ09SUVQnLCBPUlFUKQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLCAiSVROTyI6IElUTk9dDQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMjAwTUkiLCAiR2V0SXRtQmFzaWMiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KICB9DQoNCiAgLyoqDQogICAqIFNlbmQgcHVyY2hhc2Ugb3JkZXIgbGluZSBkZXRhaWxzIHRvIG91dHB1dCBhcGkgZmllbGRzDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgd3JpdGVQdXJjaGFzZUxpbmUoU3RyaW5nIGVhY2hQdW5vLCBIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBkb3VibGUgcXR5T3BlbiA9IERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ1ROUUEnKS50b1N0cmluZygpKSAtIERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0lWUUEnKS50b1N0cmluZygpKQ0KICAgIGRvdWJsZSBpbnZSZW0gPSBEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdUTlFBJykudG9TdHJpbmcoKSkgLSBEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdJVlFBJykudG9TdHJpbmcoKSkNCg0KICAgIGRvdWJsZSBsaW5PYW91MSA9IChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdMTkFNJykudG9TdHJpbmcoKSkgLyBEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdPUlFBJykudG9TdHJpbmcoKSkgKiBEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdUTlFBJykudG9TdHJpbmcoKSkpDQogICAgZG91YmxlIGxpbk9hb3UyID0gKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKSAvIERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ09SUUEnKS50b1N0cmluZygpKSAqIERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0lWUUEnKS50b1N0cmluZygpKSkNCiAgICBkb3VibGUgbGluT2FvdSA9IGxpbk9hb3UxIC0gbGluT2FvdTINCg0KICAgIGlmICgoZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKS5lcXVhbHMoJzQwJykgfHwgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKS5lcXVhbHMoJzQ1JykpICYmIChvSWFwYy5lcXVhbHMoJzEnKSB8fCBvSWFwYy5lcXVhbHMoJzInKSB8fCBvSWFwYy5lcXVhbHMoJzMnKSkpIHsNCiAgICAgIGlmIChxdHlPcGVuICE9IDAuMCkgew0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICdPTCcpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgZWFjaFB1bm8pDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxJJywgZWFjaExpbmUuZ2V0KCdQTkxJJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnVFJEVCcsIGVhY2hMaW5lLmdldCgnVFJEVCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdMV0hMJywgZWFjaExpbmUuZ2V0KCdXSExPJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBlYWNoTGluZS5nZXQoJ0lUTk8nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUElURCcsIGVhY2hMaW5lLmdldCgnUElURCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQSVRUJywgZWFjaExpbmUuZ2V0KCdQSVRUJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NJVEUnLCBlYWNoTGluZS5nZXQoJ1NJVEUnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0FRQScsIGVhY2hMaW5lLmdldCgnQ0FRQScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdSSlFBJywgZWFjaExpbmUuZ2V0KCdSSlFBJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NEUUEnLCBlYWNoTGluZS5nZXQoJ1NEUUEnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRQScsIGVhY2hMaW5lLmdldCgnT1JRQScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdJVlFBJywgaW52UmVtLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdSVlFBJywgZWFjaExpbmUuZ2V0KCdSVlFBJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NGUUEnLCBlYWNoTGluZS5nZXQoJ0NGUUEnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FQVScsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5UHJpY2VVbScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVVJDJywgZWFjaExpbmUuZ2V0KCdQVVJDJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xCVVknLCBlYWNoTGluZS5nZXQoJ0JVWUUnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1RVTScsIGVhY2hMaW5lLmdldCgnc3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdVTk1TJywgZWFjaExpbmUuZ2V0KCdVTk1TJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVU0nLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NXVU4nLCBlYWNoTGluZS5nZXQoJ0NXVU4nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnTE5BTScsIGVhY2hMaW5lLmdldCgnTE5BTScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVVBSJywgZWFjaExpbmUuZ2V0KCdwcmljZVBlclBpZWNlU3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVVFUJywgZWFjaExpbmUuZ2V0KCdQVVFUJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUFInLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFRDRCcsIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpDQogICAgICAgIGlmIChlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpLmxlbmd0aCgpID09IDEpIHsNCg0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgJzAnICsgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSkNCiAgICAgICAgfSBlbHNlIHsNCg0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSkNCiAgICAgICAgfQ0KDQogICAgICAgIG1pLm91dERhdGEucHV0KCdHUk1UJywgZWFjaExpbmUuZ2V0KCdHUk1UJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xNT0QnLCBlYWNoTGluZS5nZXQoJ01PREwnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFRFRCcsIGVhY2hMaW5lLmdldCgnVEVETCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVMJywgZWFjaExpbmUuZ2V0KCdURUwxJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU0wnLCBlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFBTVCcsIGVhY2hMaW5lLmdldCgnUFVTVCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQT1BOJywgZWFjaExpbmUuZ2V0KCdwb3BuRWExMycpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdST1JDJywgZWFjaExpbmUuZ2V0KCdST1JDJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUk4nLCBlYWNoTGluZS5nZXQoJ1JPUk4nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STCcsIGVhY2hMaW5lLmdldCgnUk9STCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdST1JYJywgZWFjaExpbmUuZ2V0KCdST1JYJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVRE8nLCBlYWNoTGluZS5nZXQoJ1NVRE8nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSQycsIGVhY2hMaW5lLmdldCgnRlJSQycpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdGUlJFJywgZWFjaExpbmUuZ2V0KCdGUlJFJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FEUUEnLCBlYWNoTGluZS5nZXQoJ0FEUUEnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRVCcsIGVhY2hMaW5lLmdldCgnT1JRVCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgZWFjaExpbmUuZ2V0KCdhbW91bnRPcGVuJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIGVhY2hMaW5lLmdldCgncHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5JVCcsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgZWFjaExpbmUuZ2V0KCdpbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdRVE9SJywgZWFjaExpbmUuZ2V0KCdvcmRlcmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUUlYnLCBlYWNoTGluZS5nZXQoJ3JlY2VpdmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCg0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUVScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxRTycsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUUCcsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVQcmljZScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdPQU9VJywgbGluT2FvdS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FPVScsIHF0eU9wZW4udG9TdHJpbmcoKSkNCiAgICAgICAgbWkud3JpdGUoKQ0KICAgICAgfQ0KICAgIH0NCiAgICBpZiAoZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSA8ICc4NScgJiYgb0lhcGMuZXF1YWxzKCIxIikgJiYgKCFlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpLmVxdWFscygnNDAnKSAmJiAhZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKS5lcXVhbHMoJzQ1JykpKSB7DQoNCiAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgJ09MJykNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgZWFjaFB1bm8pDQogICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIGVhY2hMaW5lLmdldCgnUE5MSScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUE5MUycsIGVhY2hMaW5lLmdldCgnUE5MUycpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnVFJEVCcsIGVhY2hMaW5lLmdldCgnVFJEVCcpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnTFdITCcsIGVhY2hMaW5lLmdldCgnV0hMTycpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnSVROTycsIGVhY2hMaW5lLmdldCgnSVROTycpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUElURCcsIGVhY2hMaW5lLmdldCgnUElURCcpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUElUVCcsIGVhY2hMaW5lLmdldCgnUElUVCcpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnU0lURScsIGVhY2hMaW5lLmdldCgnU0lURScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnQ0FRQScsIGVhY2hMaW5lLmdldCgnQ0FRQScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUkpRQScsIGVhY2hMaW5lLmdldCgnUkpRQScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnU0RRQScsIGVhY2hMaW5lLmdldCgnU0RRQScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnT1JRQScsIGVhY2hMaW5lLmdldCgnT1JRQScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnSVZRQScsIGVhY2hMaW5lLmdldCgnSVZRQScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUlZRQScsIGVhY2hMaW5lLmdldCgnUlZRQScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnQ0ZRQScsIGVhY2hMaW5lLmdldCgnQ0ZRQScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnT1FQVScsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5UHJpY2VVbScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVSQycsIGVhY2hMaW5lLmdldCgnUFVSQycpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnTEJVWScsIGVhY2hMaW5lLmdldCgnQlVZRScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnU1RVTScsIGVhY2hMaW5lLmdldCgnc3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnVU5NUycsIGVhY2hMaW5lLmdldCgnVU5NUycpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnQUxVTScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0NXVU4nLCBlYWNoTGluZS5nZXQoJ0NXVU4nKS50b1N0cmluZygpKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xOQU0nLCBlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUFInLCBlYWNoTGluZS5nZXQoJ3ByaWNlUGVyUGllY2VTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVVFUJywgZWFjaExpbmUuZ2V0KCdQVVFUJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdBTFBSJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGl2ZVByaWNlJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSkNCiAgICAgIGlmIChlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpLmxlbmd0aCgpID09IDEpIHsNCg0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsICcwJyArIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpDQogICAgICB9IGVsc2Ugew0KDQogICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSkNCiAgICAgIH0NCg0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0dSTVQnLCBlYWNoTGluZS5nZXQoJ0dSTVQnKS50b1N0cmluZygpKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xNT0QnLCBlYWNoTGluZS5nZXQoJ01PREwnKS50b1N0cmluZygpKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUQnLCBlYWNoTGluZS5nZXQoJ1RFREwnKS50b1N0cmluZygpKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUwnLCBlYWNoTGluZS5nZXQoJ1RFTDEnKS50b1N0cmluZygpKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU0wnLCBlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU1QnLCBlYWNoTGluZS5nZXQoJ1BVU1QnKS50b1N0cmluZygpKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BPUE4nLCBlYWNoTGluZS5nZXQoJ3BvcG5FYTEzJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdST1JDJywgZWFjaExpbmUuZ2V0KCdST1JDJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdST1JOJywgZWFjaExpbmUuZ2V0KCdST1JOJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdST1JMJywgZWFjaExpbmUuZ2V0KCdST1JMJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdST1JYJywgZWFjaExpbmUuZ2V0KCdST1JYJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdTVURPJywgZWFjaExpbmUuZ2V0KCdTVURPJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdGUlJDJywgZWFjaExpbmUuZ2V0KCdGUlJDJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdGUlJFJywgZWFjaExpbmUuZ2V0KCdGUlJFJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdBRFFBJywgZWFjaExpbmUuZ2V0KCdBRFFBJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdPUlFUJywgZWFjaExpbmUuZ2V0KCdPUlFUJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgZWFjaExpbmUuZ2V0KCdhbW91bnRPcGVuJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdBTU9SJywgZWFjaExpbmUuZ2V0KCdMTkFNJykudG9TdHJpbmcoKSkNCg0KICAgICAgaWYgKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSA9PSAwKSB7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgZWFjaExpbmUuZ2V0KCdwcmljZVBlclBpZWNlU3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICB9DQoNCiAgICAgIGlmIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkgIT0gMCAmJiBEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDRkQxJykudG9TdHJpbmcoKSkgIT0gMCkgew0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkgLSAoKChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDRkQxJykudG9TdHJpbmcoKSkpIC8gMTAwKSAqIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkpKSkudG9TdHJpbmcoKSkNCg0KICAgICAgfQ0KDQogICAgICBpZiAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpICE9IDAgJiYgRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMicpLnRvU3RyaW5nKCkpICE9IDApIHsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpIC0gKCgoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMicpLnRvU3RyaW5nKCkpKSAvIDEwMCkgKiAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpKSkpLnRvU3RyaW5nKCkpDQoNCiAgICAgIH0NCg0KICAgICAgaWYgKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSAhPSAwICYmIERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NGRDMnKS50b1N0cmluZygpKSAhPSAwKSB7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSAtICgoKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NGRDMnKS50b1N0cmluZygpKSkgLyAxMDApICogKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSkpKS50b1N0cmluZygpKQ0KICAgICAgfQ0KDQogICAgICBpZiAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpICE9IDAgJiYgKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NGRDEnKS50b1N0cmluZygpKSA9PSAwICYmIERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NGRDInKS50b1N0cmluZygpKSA9PSAwICYmIERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NGRDMnKS50b1N0cmluZygpKSA9PSAwKSkgew0KDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkNCiAgICAgIH0NCg0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdPUFFUJywgZWFjaExpbmUuZ2V0KCdvcGVuUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgZWFjaExpbmUuZ2V0KCdpbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIGVhY2hMaW5lLmdldCgnb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIGVhY2hMaW5lLmdldCgncmVjZWl2ZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKQ0KDQogICAgICBtaS5vdXREYXRhLnB1dCgnQUxUVScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUXVhbnRpdHlPcGVuJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGl2ZVByaWNlJykudG9TdHJpbmcoKSkNCiAgICAgIG1pLndyaXRlKCkNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogUmV0cml2ZSBpdGVtIGFsaWFzIHVzaW5nIE1NUzAyNU1JLkdldEFsaWFzDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgZ2V0SXRlbUFsaWFzKEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIFN0cmluZyBJVE5PID0gZWFjaExpbmUuZ2V0KCdJVE5PJykNCg0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZQ0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKQ0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBwb3BuRWExMyA9IHJlc3VsdHMuZ2V0KCdQT1BOJykNCiAgICAgIH0NCg0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJDT05PIjogQ09OTywgIkFMV1QiOiAiMDIiLCAiSVROTyI6IElUTk8sICJBTFdRIjogIkVBMTMiXQ0KICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzAyNU1JIiwgIkdldEFsaWFzIiwgcGFyYW1zLCBjYWxsYmFjaykNCg0KICB9DQoNCiAgLyoqDQogICAqIGdldCBwdXJjaGFzZSBvcmRlciBsaW5lIGRldGFpbHMgZnJvbSBNUExJTkUNCiAgICogDQogICAqLw0KDQogIHB1YmxpYyBnZXRNcGxpbmVEZXRhaWxzKFN0cmluZyBlYWNoUHVubywgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIFBOTEkgPSBlYWNoTGluZS5nZXQoJ1BOTEknKQ0KICAgIFN0cmluZyBQTkxTID0gZWFjaExpbmUuZ2V0KCdQTkxTJykNCiAgICBpZiAoUE5MSSAhPSBudWxsICYmICFQTkxJLnRyaW0oKS5lcXVhbHMoIiIpKSBQTkxJID0gU3RyaW5nLmZvcm1hdCgiJTAzZCIsIEludGVnZXIucGFyc2VJbnQoUE5MSS50cmltKCkpKQ0KICAgIGlmIChQTkxTICE9IG51bGwgJiYgIVBOTFMudHJpbSgpLmVxdWFscygiIikpIFBOTFMgPSBTdHJpbmcuZm9ybWF0KCIlMDNkIiwgSW50ZWdlci5wYXJzZUludChQTkxTLnRyaW0oKSkpDQogICAgREJBY3Rpb24gcXVlcnlNcGxpbmUgPSBkYXRhYmFzZS50YWJsZSgiTVBMSU5FIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJJQkNPTk8iLCAiSUJQVU5PIiwgIklCUE5MSSIsICJJQlBOTFMiLCAiSUJTVURPIiwgIklCRlJSQyIsICJJQkZSUkUiKS5idWlsZCgpDQogICAgREJDb250YWluZXIgcmVjb3JkTXBsaW5lID0gcXVlcnlNcGxpbmUuZ2V0Q29udGFpbmVyKCkNCiAgICByZWNvcmRNcGxpbmUuc2V0KCJJQkNPTk8iLCBJbnRlZ2VyLnBhcnNlSW50KENPTk8udHJpbSgpKSkNCiAgICByZWNvcmRNcGxpbmUuc2V0KCJJQlBVTk8iLCBlYWNoUHVuby50cmltKCkpDQogICAgcmVjb3JkTXBsaW5lLnNldCgiSUJQTkxJIiwgUE5MSS50cmltKCkudG9JbnRlZ2VyKCkpDQogICAgcmVjb3JkTXBsaW5lLnNldCgiSUJQTkxTIiwgUE5MUy50cmltKCkudG9JbnRlZ2VyKCkpDQogICAgcXVlcnlNcGxpbmUucmVhZChyZWNvcmRNcGxpbmUpDQoNCiAgICBlYWNoTGluZS5wdXQoJ1NVRE8nLCByZWNvcmRNcGxpbmUuZ2V0KCdJQlNVRE8nKS50b1N0cmluZygpKQ0KICAgIGVhY2hMaW5lLnB1dCgnRlJSQycsIHJlY29yZE1wbGluZS5nZXQoJ0lCRlJSQycpLnRvU3RyaW5nKCkpDQogICAgZWFjaExpbmUucHV0KCdGUlJFJywgcmVjb3JkTXBsaW5lLmdldCgnSUJGUlJFJykudG9TdHJpbmcoKSkNCg0KICB9DQoNCiAgLyoqDQogICAqIGNoZWNrIENvbmZpcm0gcHVyY2hhc2UgcHJpY2UNCiAgICogDQogICAqLw0KDQogIHB1YmxpYyB1c2VDcHBySWZBdmFpbGFibGUoSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIFBVUFIgPSBlYWNoTGluZS5nZXQoJ1BVUFInKQ0KICAgIFN0cmluZyBDUFBSID0gZWFjaExpbmUuZ2V0KCdDUFBSJykNCg0KICAgIERvdWJsZSBkUHVwciA9IDAuMGQNCg0KICAgIGlmIChQVVBSICE9IG51bGwgJiYgIVBVUFIudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkUHVwciA9IERvdWJsZS5wYXJzZURvdWJsZShQVVBSLnRyaW0oKSkNCiAgICBpZiAoQ1BQUiAhPSBudWxsICYmICFDUFBSLnRyaW0oKS5lcXVhbHMoIiIpKQ0KICAgICAgZENwcHIgPSBEb3VibGUucGFyc2VEb3VibGUoQ1BQUi50cmltKCkpDQoNCiAgICBpZiAoZENwcHIgPj0gMC4wMDAwMDApDQogICAgICBlYWNoTGluZS5yZXBsYWNlKCdQVVBSJywgJ0NQUFInKQ0KICB9DQoNCiAgLyoqDQogICAqIGNoZWNrIFBPIG9yZGVyIHByaWNlIGFuZCBCYXNpYyB1bml0IG9mIG1lYXN1cmVtZW50DQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgY2hlY2tPcmRlclByaWNlQW5kQmFzZVVuaXRzKEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIFN0cmluZyBVTk1TID0gZWFjaExpbmUuZ2V0KCdVTk1TJykNCiAgICBTdHJpbmcgQ1dVTiA9IGVhY2hMaW5lLmdldCgnQ1dVTicpDQogICAgU3RyaW5nIFBVVU4gPSBlYWNoTGluZS5nZXQoJ1BVVU4nKQ0KICAgIFN0cmluZyBJVlFBID0gZWFjaExpbmUuZ2V0KCdJVlFBJykNCiAgICBTdHJpbmcgUFBVTiA9IGVhY2hMaW5lLmdldCgnUFBVTicpDQogICAgU3RyaW5nIE9SUUEgPSBlYWNoTGluZS5nZXQoJ09SUUEnKQ0KICAgIFN0cmluZyBSVlFBID0gZWFjaExpbmUuZ2V0KCdSVlFBJykNCiAgICBTdHJpbmcgUlZRVCA9IGVhY2hMaW5lLmdldCgnUlZRVCcpDQoNCiAgICBTdHJpbmcgT1JRVCA9IGVhY2hMaW5lLmdldCgnT1JRVCcpDQogICAgU3RyaW5nIExOQU0gPSBlYWNoTGluZS5nZXQoJ0xOQU0nKQ0KICAgIFN0cmluZyBBVVRQID0gZWFjaExpbmUuZ2V0KCdBVVRQJykNCiAgICBTdHJpbmcgc3RhbmRhcmRVbSA9ICIiDQogICAgU3RyaW5nIGFsdGVybmF0ZVVtID0gIiINCg0KICAgIElWUVQgPSBJVlFBDQoNCiAgICBvcmRlclVtRGNjZCA9IGJhc2ljVW1EY2NkID09IG51bGwgPyAiMCIgOiBiYXNpY1VtRGNjZC50cmltKCkNCiAgICBvcmRlclVtRG1jZiA9ICIxIg0KICAgIG9yZGVyVW1Db2ZhID0gIjEiDQogICAgZG91YmxlIGRibE9ycWEgPSBEb3VibGUucGFyc2VEb3VibGUoT1JRQSkNCiAgICBkb3VibGUgZGJsSXZxYSA9IERvdWJsZS5wYXJzZURvdWJsZShJVlFBKQ0KICAgIGRvdWJsZSB2YWx1ZSA9IGRibE9ycWEgLSBkYmxJdnFhDQogICAgb3BlblF1YW50aXR5UHJpY2VVbSA9IG5ldyBCaWdEZWNpbWFsKFN0cmluZy52YWx1ZU9mKHZhbHVlKSkuc2V0U2NhbGUoNCwgQmlnRGVjaW1hbC5ST1VORF9GTE9PUikudG9QbGFpblN0cmluZygpDQoNCiAgICBCaWdEZWNpbWFsIGludm9pY2VkUXVhbnRpdHkgPSBuZXcgQmlnRGVjaW1hbChJVlFBKQ0KICAgIEJpZ0RlY2ltYWwgY29udmVyc2lvbkZhY3RvciA9IG5ldyBCaWdEZWNpbWFsKG9yZGVyVW1Db2ZhKQ0KDQogICAgSVZRVCA9IGludm9pY2VkUXVhbnRpdHkNCg0KICAgIG9yZGVyZFF1YW50aXR5UHJpY2VVbSA9IE9SUVQNCiAgICByZWNlaXZlZFF1YW50aXR5UHJpY2VVbSA9IFJWUVQNCiAgICBpbnZvaWNlZFF1YW50aXR5UHJpY2VVbSA9IElWUVQNCg0KICAgIGRvdWJsZSBkYmxPcnF0ID0gRG91YmxlLnBhcnNlRG91YmxlKE9SUVQpDQogICAgZG91YmxlIGRibEl2cXQgPSBEb3VibGUucGFyc2VEb3VibGUoSVZRVCkNCiAgICBkb3VibGUgdmFsdWUyID0gZGJsT3JxdCAtIGRibEl2cXQNCiAgICBvcGVuUXVhbnRpdHlQcmljZVVtID0gbmV3IEJpZ0RlY2ltYWwoU3RyaW5nLnZhbHVlT2YodmFsdWUyKSkuc2V0U2NhbGUoNCwgQmlnRGVjaW1hbC5ST1VORF9GTE9PUikudG9QbGFpblN0cmluZygpDQoNCiAgICBwcmljZVVtRGNjZCA9IGJhc2ljVW1EY2NkID09IG51bGwgPyAiMCIgOiBiYXNpY1VtRGNjZC50cmltKCkNCiAgICBwcmljZVVtRG1jZiA9ICIxIg0KICAgIHByaWNlVW1Db2ZhID0gIjEiDQoNCiAgICBkb3VibGUgZGJsT3JxYTEgPSBEb3VibGUucGFyc2VEb3VibGUoT1JRQSkNCiAgICBkb3VibGUgZGJsUnZxYSA9IERvdWJsZS5wYXJzZURvdWJsZShSVlFBKQ0KICAgIGRvdWJsZSBkYmxJdnFhMSA9IERvdWJsZS5wYXJzZURvdWJsZShJVlFBKQ0KICAgIGludCBpbnREY2NkID0gSW50ZWdlci52YWx1ZU9mKG9yZGVyVW1EY2NkKQ0KICAgIGRvdWJsZSB2YWx1ZTEgPSBkYmxSdnFhIC0gZGJsSXZxYTENCiAgICBvcGVRdWFudGl0eU9yZGVyVW0gPSBuZXcgQmlnRGVjaW1hbChTdHJpbmcudmFsdWVPZih2YWx1ZTEpKS5zZXRTY2FsZShpbnREY2NkLCBCaWdEZWNpbWFsLlJPVU5EX0ZMT09SKS50b1BsYWluU3RyaW5nKCkNCg0KICAgIG9wZVF1YW50aXR5T3JkZXJVbSA9IG9wZVF1YW50aXR5T3JkZXJVbSA9PSBudWxsID8gIiIgOiBvcGVRdWFudGl0eU9yZGVyVW0udHJpbSgpDQogICAgTE5BTSA9IExOQU0gPT0gbnVsbCA/ICIiIDogTE5BTS50cmltKCkNCiAgICBvcmRlcmRRdWFudGl0eVByaWNlVW0gPSBvcmRlcmRRdWFudGl0eVByaWNlVW0gPT0gbnVsbCA/ICIiIDogb3JkZXJkUXVhbnRpdHlQcmljZVVtLnRyaW0oKQ0KICAgIE9SUUEgPSBPUlFBID09IG51bGwgPyAiIiA6IE9SUUEudHJpbSgpDQoNCiAgICBCaWdEZWNpbWFsIG9wZW5RdWFudGl0eU9yZGVyVW0NCg0KICAgIGlmIChvcGVRdWFudGl0eU9yZGVyVW0uZXF1YWxzKCIiKSkgew0KICAgICAgb3BlblF1YW50aXR5T3JkZXJVbSA9IG5ldyBCaWdEZWNpbWFsKCIwIikNCiAgICB9IGVsc2Ugew0KICAgICAgb3BlblF1YW50aXR5T3JkZXJVbSA9IG5ldyBCaWdEZWNpbWFsKG9wZVF1YW50aXR5T3JkZXJVbSkNCiAgICB9DQoNCiAgICBCaWdEZWNpbWFsIG5ldHRMaW5lQW1vdW50DQoNCiAgICBpZiAoTE5BTS5lcXVhbHMoIiIpKSB7DQogICAgICBuZXR0TGluZUFtb3VudCA9IG5ldyBCaWdEZWNpbWFsKCIwLjAiKQ0KICAgIH0gZWxzZSB7DQogICAgICBuZXR0TGluZUFtb3VudCA9IG5ldyBCaWdEZWNpbWFsKExOQU0pDQogICAgfQ0KDQogICAgQmlnRGVjaW1hbCBvcmRlcmVkUXVhbnRpdHlQcmljZVVtDQoNCiAgICBpZiAob3JkZXJkUXVhbnRpdHlQcmljZVVtLmVxdWFscygiIikpIHsNCiAgICAgIG9yZGVyZWRRdWFudGl0eVByaWNlVW0gPSBuZXcgQmlnRGVjaW1hbCgiMCIpDQogICAgfSBlbHNlIHsNCiAgICAgIG9yZGVyZWRRdWFudGl0eVByaWNlVW0gPSBuZXcgQmlnRGVjaW1hbChvcmRlcmRRdWFudGl0eVByaWNlVW0pDQogICAgfQ0KDQogICAgQmlnRGVjaW1hbCBvcmRlcmVkUXVhbnRpdHkNCg0KICAgIGlmIChPUlFBLmVxdWFscygiIikpIHsNCiAgICAgIG9yZGVyZWRRdWFudGl0eSA9IG5ldyBCaWdEZWNpbWFsKCIwIikNCiAgICB9IGVsc2Ugew0KICAgICAgb3JkZXJlZFF1YW50aXR5ID0gbmV3IEJpZ0RlY2ltYWwoT1JRQSkNCiAgICB9DQoNCiAgICBCaWdEZWNpbWFsIHByaWNlUGVyUGllY2VPcmRlclVtDQogICAgaWYgKG5ldHRMaW5lQW1vdW50LmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pID09IDAgfHwgb3JkZXJlZFF1YW50aXR5LmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pID09IDApIHsNCiAgICAgIHByaWNlUGVyUGllY2VPcmRlclVtID0gbmV3IEJpZ0RlY2ltYWwoIjAuMCIpDQoNCiAgICAgIHByaWNlcGVyUGllY2VPdW0gPSBwcmljZVBlclBpZWNlT3JkZXJVbQ0KDQogICAgfSBlbHNlIHsNCg0KICAgICAgcHJpY2VQZXJQaWVjZU9yZGVyVW0gPSBuZXR0TGluZUFtb3VudC5kaXZpZGUob3JkZXJlZFF1YW50aXR5LCA2LCBSb3VuZGluZ01vZGUuSEFMRl9VUCkNCg0KICAgICAgcHJpY2VwZXJQaWVjZU91bSA9IHByaWNlUGVyUGllY2VPcmRlclVtDQoNCiAgICB9DQoNCiAgICBCaWdEZWNpbWFsIHByaWNlUGVyUGllY2VQcmljZVVtDQoNCiAgICBpZiAob3JkZXJlZFF1YW50aXR5LmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pID09IDAgfHwgb3JkZXJlZFF1YW50aXR5UHJpY2VVbS5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSA9PSAwKSB7DQogICAgICBwcmljZVBlclBpZWNlUHJpY2VVbSA9IG5ldyBCaWdEZWNpbWFsKCIwLjAiKQ0KICAgIH0gZWxzZSB7DQogICAgICBwcmljZVBlclBpZWNlUHJpY2VVbSA9IG9yZGVyZWRRdWFudGl0eS5kaXZpZGUob3JkZXJlZFF1YW50aXR5UHJpY2VVbSwgMTIsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS5tdWx0aXBseShwcmljZVBlclBpZWNlT3JkZXJVbSkNCg0KICAgIH0NCg0KICAgIGFtb3VudE9wZW4gPSBvcGVuUXVhbnRpdHlPcmRlclVtLm11bHRpcGx5KHByaWNlUGVyUGllY2VPcmRlclVtKS5zZXRTY2FsZShudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQoNCiAgICBwcmljUGVyUGllY2VQcmljZVVtID0gcHJpY2VQZXJQaWVjZVByaWNlVW0uc2V0U2NhbGUoNiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKQ0KICAgIHByaWNQZXJQaWVjZU9yZGVyVW0gPSBwcmljZVBlclBpZWNlT3JkZXJVbS5zZXRTY2FsZSg2LCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQoNCiAgICBpZiAocHJpY2VVbml0U3RhbmRhcmQudHJpbSgpLmVxdWFscygiMSIpKSB7DQogICAgICBzdGFuZGFyZFVtID0gUFBVTi50cmltKCkNCiAgICAgIGFsdGVybmF0ZVVtID0gUFVVTi50cmltKCkNCg0KICAgICAgcHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0gPSBwcmljUGVyUGllY2VPcmRlclVtID09IG51bGwgPyAiIiA6IHByaWNQZXJQaWVjZU9yZGVyVW0udHJpbSgpDQoNCiAgICAgIG9wZW5RdWFudGl0eVN0YW5kYXJkVW0gPSBvcGVuUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IG9wZW5RdWFudGl0eVByaWNlVW0udHJpbSgpDQogICAgICBpbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVbSA9IGludm9pY2VkUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IGludm9pY2VkUXVhbnRpdHlQcmljZVVtLnRyaW0oKQ0KICAgICAgb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbSA9IG9yZGVyZFF1YW50aXR5UHJpY2VVbSA9PSBudWxsID8gIiIgOiBvcmRlcmRRdWFudGl0eVByaWNlVW0udHJpbSgpDQogICAgICByZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbSA9IHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtLnRyaW0oKQ0KDQogICAgICBhbHRlcm5hdGl2ZVF1YW50aXR5T3BlbiA9IG9wZVF1YW50aXR5T3JkZXJVbQ0KICAgICAgYWx0ZXJuYXRpdmVQcmljZSA9IHByaWNQZXJQaWVjZU9yZGVyVW0NCg0KICAgIH0gZWxzZSB7DQogICAgICBzdGFuZGFyZFVtID0gUFVVTi50cmltKCkNCiAgICAgIGFsdGVybmF0ZVVtID0gUFBVTi50cmltKCkNCg0KICAgICAgcHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0gPSBwcmljUGVyUGllY2VPcmRlclVtID09IG51bGwgPyAiIiA6IHByaWNQZXJQaWVjZU9yZGVyVW0udHJpbSgpDQoNCiAgICAgIG9wZW5RdWFudGl0eVN0YW5kYXJkVW0gPSBvcGVuUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IG9wZW5RdWFudGl0eVByaWNlVW0udHJpbSgpDQogICAgICBpbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVbSA9IElWUUEgPT0gbnVsbCA/ICIiIDogSVZRQS50cmltKCkNCiAgICAgIG9yZGVyZWRRdWFudGl0eVN0YW5kYXJkVW0gPSBPUlFBID09IG51bGwgPyAiIiA6IE9SUUEudHJpbSgpDQogICAgICByZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbSA9IFJWUUEgPT0gbnVsbCA/ICIiIDogUlZRQS50cmltKCkNCg0KICAgICAgYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4gPSBvcGVuUXVhbnRpdHlQcmljZVVtDQogICAgICBhbHRlcm5hdGl2ZVByaWNlID0gcHJpY1BlclBpZWNlUHJpY2VVbQ0KDQogICAgfQ0KICAgIGVhY2hMaW5lLnB1dCgnYW1vdW50T3BlbicsIGFtb3VudE9wZW4pDQogICAgZWFjaExpbmUucHV0KCdwcmljZVBlclBpZWNlU3RhbmRhcmRVbScsIHByaWNlUGVyUGllY2VTdGFuZGFyZFVtKQ0KICAgIGVhY2hMaW5lLnB1dCgnc3RhbmRhcmRVbScsIHN0YW5kYXJkVW0pDQogICAgZWFjaExpbmUucHV0KCdvcGVuUXVhbnRpdHlTdGFuZGFyZFVtJywgb3BlblF1YW50aXR5U3RhbmRhcmRVbSkNCiAgICBlYWNoTGluZS5wdXQoJ2ludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVtJywgaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0pDQogICAgZWFjaExpbmUucHV0KCdvcmRlcmVkUXVhbnRpdHlTdGFuZGFyZFVtJywgb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbSkNCiAgICBlYWNoTGluZS5wdXQoJ3JlY2VpdmVkUXVhbnRpdHlTdGFuZGFyZFVtJywgcmVjZWl2ZWRRdWFudGl0eVN0YW5kYXJkVW0pDQogICAgZWFjaExpbmUucHV0KCdhbHRlcm5hdGVVbScsIGFsdGVybmF0ZVVtKQ0KICAgIGVhY2hMaW5lLnB1dCgnYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4nLCBhbHRlcm5hdGl2ZVF1YW50aXR5T3BlbikNCiAgICBlYWNoTGluZS5wdXQoJ2FsdGVybmF0aXZlUHJpY2UnLCBhbHRlcm5hdGl2ZVByaWNlKQ0KICAgIGVhY2hMaW5lLnB1dCgnb3BlblF1YW50aXR5UHJpY2VVbScsIG9wZW5RdWFudGl0eVByaWNlVW0pDQogICAgZWFjaExpbmUucHV0KCdwb3BuRWExMycsIHBvcG5FYTEzKQ0KICB9DQoNCiAgLyoqDQogICAqIGdldCBQTyBsaW5lIHJlY2VpcHQgZGV0YWlscyBmcm9tIHRhYmxlIEZHUkVDTA0KICAgKiANCiAgICovDQoNCiAgcHVibGljIGdldExpbmVSZWNlaXB0cyhTdHJpbmcgZWFjaFB1bm8sIEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIGxpbmVSZWNlaXB0TGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKQ0KICAgIERCQWN0aW9uIHF1ZXJ5RmdyZWNsID0gZGF0YWJhc2UudGFibGUoIkZHUkVDTCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiRjJDT05PIiwgIkYyRElWSSIsICJGMlBVTk8iLCAiRjJQTkxJIiwgIkYyUE5MUyIsICJGMlJFUE4iLCAiRjJSRUxQIiwgIkYyUlBRVCIsICJGMklWUVQiLCAiRjJSUFFBIiwgIkYySVZRQSIsICJGMkNBV0UiLCAiRjJJVkNXIiwgIkYyUkNBQyIsICJGMklDQUMiLCAiRjJTQ09QIiwgIkYyU0NPQyIsICJGMklNU1QiLCAiRjJUUkRUIiwgIkYyU0VSQSIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciByZWNvcmRGZ3JlY2wgPSBxdWVyeUZncmVjbC5nZXRDb250YWluZXIoKQ0KICAgIHJlY29yZEZncmVjbC5zZXQoIkYyQ09OTyIsIEludGVnZXIucGFyc2VJbnQoQ09OTy50cmltKCkpKQ0KICAgIHJlY29yZEZncmVjbC5zZXQoIkYyRElWSSIsIG9EaXZpLnRyaW0oKSkNCiAgICByZWNvcmRGZ3JlY2wuc2V0KCJGMlBVTk8iLCBlYWNoUHVuby50cmltKCkpDQogICAgcmVjb3JkRmdyZWNsLnNldCgiRjJQTkxJIiwgZWFjaExpbmUuZ2V0KCdQTkxJJykudG9TdHJpbmcoKS50b0ludGVnZXIoKSkNCiAgICByZWNvcmRGZ3JlY2wuc2V0KCJGMlBOTFMiLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpLnRvSW50ZWdlcigpKQ0KDQogICAgaW50IHJlYWRzID0gcXVlcnlGZ3JlY2wucmVhZEFsbChyZWNvcmRGZ3JlY2wsIDUsIGdldEZncmVjbFJlY29yZHMpDQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IGdldEZncmVjbFJlY29yZHMgPSB7DQogICAgREJDb250YWluZXIgcmVjb3JkIC0+DQogICAgU3RyaW5nIEYyUkVQTiA9IHJlY29yZC5nZXQoJ0YyUkVQTicpDQogICAgU3RyaW5nIEYyUkVMUCA9IHJlY29yZC5nZXQoJ0YyUkVMUCcpDQogICAgU3RyaW5nIEYyUlBRVCA9IHJlY29yZC5nZXQoJ0YyUlBRVCcpDQogICAgU3RyaW5nIEYySVZRVCA9IHJlY29yZC5nZXQoJ0YySVZRVCcpDQogICAgU3RyaW5nIEYyUlBRQSA9IHJlY29yZC5nZXQoJ0YyUlBRQScpDQogICAgU3RyaW5nIEYySVZRQSA9IHJlY29yZC5nZXQoJ0YySVZRQScpDQogICAgU3RyaW5nIEYyQ0FXRSA9IHJlY29yZC5nZXQoJ0YyQ0FXRScpDQogICAgU3RyaW5nIEYySVZDVyA9IHJlY29yZC5nZXQoJ0YySVZDVycpDQogICAgU3RyaW5nIEYyUkNBQyA9IHJlY29yZC5nZXQoJ0YyUkNBQycpDQogICAgU3RyaW5nIEYySUNBQyA9IHJlY29yZC5nZXQoJ0YySUNBQycpDQogICAgU3RyaW5nIEYyU0NPUCA9IHJlY29yZC5nZXQoJ0YyU0NPUCcpDQogICAgU3RyaW5nIEYyU0NPQyA9IHJlY29yZC5nZXQoJ0YyU0NPQycpDQogICAgU3RyaW5nIEYySU1TVCA9IHJlY29yZC5nZXQoJ0YySU1TVCcpDQogICAgU3RyaW5nIEYyVFJEVCA9IHJlY29yZC5nZXQoJ0YyVFJEVCcpDQogICAgU3RyaW5nIEYyU0VSQSA9IHJlY29yZC5nZXQoJ0YyU0VSQScpDQogICAgSGFzaHRhYmxlIHRlbXBUYWJsZSA9IG5ldyBIYXNodGFibGUgPCBTdHJpbmcsDQogICAgU3RyaW5nID4gKCkNCiAgICB0ZW1wVGFibGUucHV0KCdGMlJFUE4nLCBGMlJFUE4pDQogICAgdGVtcFRhYmxlLnB1dCgnRjJSRUxQJywgRjJSRUxQKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyUlBRVCcsIEYyUlBRVCkNCiAgICB0ZW1wVGFibGUucHV0KCdGMklWUVQnLCBGMklWUVQpDQogICAgdGVtcFRhYmxlLnB1dCgnRjJSUFFBJywgRjJSUFFBKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0YySVZRQScsIEYySVZRQSkNCiAgICB0ZW1wVGFibGUucHV0KCdGMkNBV0UnLCBGMkNBV0UpDQogICAgdGVtcFRhYmxlLnB1dCgnRjJJVkNXJywgRjJJVkNXKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyUkNBQycsIEYyUkNBQykNCiAgICB0ZW1wVGFibGUucHV0KCdGMklDQUMnLCBGMklDQUMpDQogICAgdGVtcFRhYmxlLnB1dCgnRjJTQ09QJywgRjJTQ09QKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyU0NPQycsIEYyU0NPQykNCiAgICB0ZW1wVGFibGUucHV0KCdGMklNU1QnLCBGMklNU1QpDQogICAgdGVtcFRhYmxlLnB1dCgnRjJUUkRUJywgRjJUUkRUKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyU0VSQScsIEYyU0VSQSkNCiAgICBsaW5lUmVjZWlwdExpc3QuYWRkKHRlbXBUYWJsZSkNCg0KICB9DQoNCiAgLyoqDQogICAqIGNhbGN1bGF0ZSBQTyBsaW5lIHJlY2VpcHQgcXVhbnRpdGllcw0KICAgKiANCiAgICovDQoNCiAgcHVibGljIGNhbGN1bGF0ZVJlY2VpcHRRdWFudGl0aWVzKEhhc2h0YWJsZSBlYWNoTGluZVJlY2VpcHQsIEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIFN0cmluZyBQUFVOID0gZWFjaExpbmUuZ2V0KCdQUFVOJykNCiAgICBTdHJpbmcgUFVVTiA9IGVhY2hMaW5lLmdldCgnUFVVTicpDQogICAgU3RyaW5nIFVOTVMgPSBlYWNoTGluZS5nZXQoJ1VOTVMnKQ0KICAgIFN0cmluZyBDV1VOID0gZWFjaExpbmUuZ2V0KCdDV1VOJykNCg0KICAgIFN0cmluZyBGMlJFUE4gPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJFUE4nKQ0KICAgIFN0cmluZyBGMlJFTFAgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJFTFAnKQ0KICAgIFN0cmluZyBGMlJQUVQgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJQUVQnKQ0KICAgIHJlY2VpcHRRdWFudGl0eSA9IEYyUlBRVA0KDQogICAgU3RyaW5nIEYySVZRVCA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YySVZRVCcpDQogICAgU3RyaW5nIEYyUlBRQSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUlBRQScpDQogICAgU3RyaW5nIEYySVZRQSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YySVZRQScpDQogICAgU3RyaW5nIEYyQ0FXRSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyQ0FXRScpDQogICAgU3RyaW5nIEYySVZDVyA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YySVZDVycpDQogICAgU3RyaW5nIEYyUkNBQyA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUkNBQycpDQogICAgU3RyaW5nIEYySUNBQyA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YySUNBQycpDQogICAgU3RyaW5nIEYyU0NPUCA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyU0NPUCcpDQogICAgU3RyaW5nIEYyU0NPQyA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyU0NPQycpDQogICAgU3RyaW5nIEYySU1TVCA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YySU1TVCcpDQogICAgU3RyaW5nIEYyVFJEVCA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyVFJEVCcpDQogICAgU3RyaW5nIEYyU0VSQSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyU0VSQScpDQoNCiAgICBQUFVOID0gUFBVTiA9PSBudWxsID8gIiIgOiBQUFVOLnRyaW0oKQ0KICAgIFBVVU4gPSBQVVVOID09IG51bGwgPyAiIiA6IFBVVU4udHJpbSgpDQogICAgVU5NUyA9IFVOTVMgPT0gbnVsbCA/ICIiIDogVU5NUy50cmltKCkNCiAgICBDV1VOID0gQ1dVTiA9PSBudWxsID8gIiIgOiBDV1VOLnRyaW0oKQ0KICAgIHByaWNlVW1Db2ZhID0gcHJpY2VVbUNvZmEgPT0gbnVsbCA/ICIxIiA6IHByaWNlVW1Db2ZhLnRyaW0oKQ0KICAgIHByaWNlVW1EbWNmID0gcHJpY2VVbURtY2YgPT0gbnVsbCA/ICIxIiA6IHByaWNlVW1EbWNmLnRyaW0oKQ0KDQogICAgU3RyaW5nIHJlY2VpdmVkUXVhbnRpdHlBbHRVbSA9ICIiDQogICAgU3RyaW5nIG9wZVF1YW50aXR5T3JkZXJVbSA9ICIiDQogICAgU3RyaW5nIG9wZW5DYXRjaFdlaWdodCA9ICIiDQogICAgU3RyaW5nIG9wZW5RdWFudGl0eVB1cmNoYXNlT3JkZXJQcmljZVVtID0gIiINCg0KICAgIFN0cmluZyBvcGVuQW1vdW50T3JkZXJVbSA9ICIiDQogICAgU3RyaW5nIHJlY2VpdmVkUXVhbnRpdHkgPSAiIg0KDQogICAgQmlnRGVjaW1hbCBkRnJwcXQyID0gbmV3IEJpZ0RlY2ltYWwoMC4wZCkNCiAgICBCaWdEZWNpbWFsIGRGaXZxdDIgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKQ0KICAgIEJpZ0RlY2ltYWwgZEZycHFhMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpDQogICAgQmlnRGVjaW1hbCBkRml2cWEyID0gbmV3IEJpZ0RlY2ltYWwoMC4wZCkNCiAgICBCaWdEZWNpbWFsIGRGY2F3ZTIgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKQ0KICAgIEJpZ0RlY2ltYWwgZEZpdmN3MiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpDQogICAgQmlnRGVjaW1hbCBkRnJjYWMyID0gbmV3IEJpZ0RlY2ltYWwoMC4wZCkNCiAgICBCaWdEZWNpbWFsIGRGaWNhYzIgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKQ0KICAgIEJpZ0RlY2ltYWwgZEZzY29wMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpDQogICAgQmlnRGVjaW1hbCBkRnNjb2MyID0gbmV3IEJpZ0RlY2ltYWwoMC4wZCkNCiAgICBCaWdEZWNpbWFsIGRGc2VyYTIgPSBuZXcgQmlnRGVjaW1hbCgwLjBkKQ0KDQogICAgQmlnRGVjaW1hbCBkY29mYSA9IG5ldyBCaWdEZWNpbWFsKHByaWNlVW1Db2ZhKQ0KDQogICAgaW50IGludE9yZGVyVW1EY2NkID0gbnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKQ0KICAgIGludCBpbnRQcmljZVVtRGNjZCA9IG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCkNCiAgICBpbnQgaW50QmFzaWNVbURjY2QgPSBudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpDQoNCiAgICBpZiAoRjJDQVdFICE9IG51bGwgJiYgIUYyQ0FXRS50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGY2F3ZTIgPSBuZXcgQmlnRGVjaW1hbChGMkNBV0UudHJpbSgpKQ0KICAgIGlmIChGMlJQUVQgIT0gbnVsbCAmJiAhRjJSUFFULnRyaW0oKS5lcXVhbHMoIiIpKQ0KICAgICAgZEZycHF0MiA9IG5ldyBCaWdEZWNpbWFsKEYyUlBRVC50cmltKCkpDQogICAgaWYgKEYySVZRVCAhPSBudWxsICYmICFGMklWUVQudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRml2cXQyID0gbmV3IEJpZ0RlY2ltYWwoRjJJVlFULnRyaW0oKSkNCiAgICBpZiAoRjJSUFFBICE9IG51bGwgJiYgIUYyUlBRQS50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGcnBxYTIgPSBuZXcgQmlnRGVjaW1hbChGMlJQUUEudHJpbSgpKQ0KICAgIGlmIChGMklWUUEgIT0gbnVsbCAmJiAhRjJJVlFBLnRyaW0oKS5lcXVhbHMoIiIpKQ0KICAgICAgZEZpdnFhMiA9IG5ldyBCaWdEZWNpbWFsKEYySVZRQS50cmltKCkpDQogICAgaWYgKEYySVZDVyAhPSBudWxsICYmICFGMklWQ1cudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRml2Y3cyID0gbmV3IEJpZ0RlY2ltYWwoRjJJVkNXLnRyaW0oKSkNCiAgICBpZiAoRjJSQ0FDICE9IG51bGwgJiYgIUYyUkNBQy50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGcmNhYzIgPSBuZXcgQmlnRGVjaW1hbChGMlJDQUMudHJpbSgpKQ0KICAgIGlmIChGMklDQUMgIT0gbnVsbCAmJiAhRjJJQ0FDLnRyaW0oKS5lcXVhbHMoIiIpKQ0KICAgICAgZEZpY2FjMiA9IG5ldyBCaWdEZWNpbWFsKEYySUNBQy50cmltKCkpDQogICAgaWYgKEYyU0NPUCAhPSBudWxsICYmICFGMlNDT1AudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRnNjb3AyID0gbmV3IEJpZ0RlY2ltYWwoRjJTQ09QLnRyaW0oKSkNCiAgICBpZiAoRjJTQ09DICE9IG51bGwgJiYgIUYyU0NPQy50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRGc2NvYzIgPSBuZXcgQmlnRGVjaW1hbChGMlNDT0MudHJpbSgpKQ0KICAgIGlmIChGMlNFUkEgIT0gbnVsbCAmJiAhRjJTRVJBLnRyaW0oKS5lcXVhbHMoIiIpKQ0KICAgICAgZEZzZXJhMiA9IG5ldyBCaWdEZWNpbWFsKEYyU0VSQS50cmltKCkpDQogICAgaWYgKG9yZGVyVW1EY2NkICE9IG51bGwgJiYgIW9yZGVyVW1EY2NkLnRyaW0oKS5lcXVhbHMoIiIpKQ0KICAgICAgaW50T3JkZXJVbURjY2QgPSBJbnRlZ2VyLnZhbHVlT2Yob3JkZXJVbURjY2QudHJpbSgpKQ0KICAgIGlmIChwcmljZVVtRGNjZCAhPSBudWxsICYmICFwcmljZVVtRGNjZC50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGludFByaWNlVW1EY2NkID0gSW50ZWdlci52YWx1ZU9mKHByaWNlVW1EY2NkLnRyaW0oKSkNCiAgICBpZiAoYmFzaWNVbURjY2QgIT0gbnVsbCAmJiAhYmFzaWNVbURjY2QudHJpbSgpLmVxdWFscygiIikpDQogICAgICBpbnRCYXNpY1VtRGNjZCA9IEludGVnZXIudmFsdWVPZihiYXNpY1VtRGNjZC50cmltKCkpDQoNCiAgICBpZiAoZEZjYXdlMi5jb21wYXJlVG8obmV3IEJpZ0RlY2ltYWwoMC4wZCkpICE9IDApIHsNCg0KICAgICAgb3BlbkNhdGNoV2VpZ2h0ID0gZEZjYXdlMi5zdWJ0cmFjdChkRml2Y3cyKS5zZXRTY2FsZShudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQoNCiAgICB9DQoNCiAgICByZWNlaXZlZFF1YW50aXR5QWx0VW0gPSBkRnJwcWEyLnN1YnRyYWN0KGRGaXZxYTIpLnNldFNjYWxlKGludE9yZGVyVW1EY2NkLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQogICAgcmVjZWl2ZWRRdWFudGl0eSA9IGRGcnBxdDIuc3VidHJhY3QoZEZpdnF0Mikuc2V0U2NhbGUoaW50QmFzaWNVbURjY2QsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCkNCiAgICBvcGVRdWFudGl0eU9yZGVyVW0gPSBkRnJwcWEyLnN1YnRyYWN0KGRGaXZxYTIpLnNldFNjYWxlKGludEJhc2ljVW1EY2NkLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQoNCiAgICBCaWdEZWNpbWFsIGRPcGVuQW1vdW50TG9jYWxDdXJyZW5jeSA9IGRGcmNhYzIuc3VidHJhY3QoZEZpY2FjMikNCiAgICBvcGVuQW1vdW50TG9jYWxDdXJyZW5jeSA9IGRPcGVuQW1vdW50TG9jYWxDdXJyZW5jeS50b1BsYWluU3RyaW5nKCkNCg0KICAgIGlmIChvRG1jdS5lcXVhbHMoIjEiKSkgew0KICAgICAgb3BlbkFtb3VudE9yZGVyVW0gPSBkT3BlbkFtb3VudExvY2FsQ3VycmVuY3kuZGl2aWRlKGRGc2VyYTIsIG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCkNCg0KICAgIH0gZWxzZSBpZiAob0RtY3UuZXF1YWxzKCIyIikpIHsNCiAgICAgIG9wZW5BbW91bnRPcmRlclVtID0gZE9wZW5BbW91bnRMb2NhbEN1cnJlbmN5Lm11bHRpcGx5KGRGc2VyYTIpLnNldFNjYWxlKG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCkNCg0KICAgIH0NCg0KICAgIGVhY2hMaW5lUmVjZWlwdC5wdXQoJ3JlY2VpdmVkUXVhbnRpdHlBbHRVbScsIHJlY2VpdmVkUXVhbnRpdHlBbHRVbSkNCiAgICBlYWNoTGluZVJlY2VpcHQucHV0KCdvcGVRdWFudGl0eU9yZGVyVW0nLCBvcGVRdWFudGl0eU9yZGVyVW0pDQogICAgZWFjaExpbmVSZWNlaXB0LnB1dCgnb3BlbkNhdGNoV2VpZ2h0Jywgb3BlbkNhdGNoV2VpZ2h0KQ0KICAgIGVhY2hMaW5lUmVjZWlwdC5wdXQoJ29wZW5RdWFudGl0eVB1cmNoYXNlT3JkZXJQcmljZVVtJywgb3BlblF1YW50aXR5UHVyY2hhc2VPcmRlclByaWNlVW0pDQogICAgZWFjaExpbmVSZWNlaXB0LnB1dCgnb3BlbkFtb3VudExvY2FsQ3VycmVuY3knLCBvcGVuQW1vdW50TG9jYWxDdXJyZW5jeSkNCiAgICBlYWNoTGluZVJlY2VpcHQucHV0KCdvcGVuQW1vdW50T3JkZXJVbScsIG9wZW5BbW91bnRPcmRlclVtKQ0KICAgIGVhY2hMaW5lUmVjZWlwdC5wdXQoJ3JlY2VpdmVkUXVhbnRpdHknLCByZWNlaXZlZFF1YW50aXR5KQ0KICB9DQoNCiAgLyoqDQogICAqIGNoZWNrIG9wZW4gcmVjZWlwdCBsaW5lDQogICAqIA0KICAgKi8NCg0KICBwdWJsaWMgYm9vbGVhbiBpZk9wZW5SZWNlaXB0KEhhc2h0YWJsZSBlYWNoTGluZVJlY2VpcHQpIHsNCiAgICBvcGVuTGluZVJlY2VpcHRMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpDQogICAgU3RyaW5nIGlGaW1zdDIgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMklNU1QnKQ0KICAgIFN0cmluZyBpT3BlblF1YW50aXR5T3JkZXJVbSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ29wZVF1YW50aXR5T3JkZXJVbScpDQogICAgaUZpbXN0MiA9IGlGaW1zdDIgPT0gbnVsbCA/ICIiIDogaUZpbXN0Mi50cmltKCkNCiAgICBpT3BlblF1YW50aXR5T3JkZXJVbSA9IGlPcGVuUXVhbnRpdHlPcmRlclVtID09IG51bGwgPyAiIiA6IGlPcGVuUXVhbnRpdHlPcmRlclVtLnRyaW0oKQ0KICAgIGlPcGVuUXVhbnRpdHlPcmRlclVtID0gaU9wZW5RdWFudGl0eU9yZGVyVW0uZXF1YWxzKCIiKSA/ICIwIiA6IGlPcGVuUXVhbnRpdHlPcmRlclVtLnJlcGxhY2UoJywnLCAnLicpDQogICAgRG91YmxlIGRPcGVuUXVhbnRpdHlPcmRlclVtID0gRG91YmxlLnBhcnNlRG91YmxlKGlPcGVuUXVhbnRpdHlPcmRlclVtKQ0KDQogICAgcmV0dXJuICghaUZpbXN0Mi5lcXVhbHMoIjkiKSAmJiAoRG91YmxlLmNvbXBhcmUoZE9wZW5RdWFudGl0eU9yZGVyVW0sIDAuMDAwMWQpID4gMCB8fCBEb3VibGUuY29tcGFyZShkT3BlblF1YW50aXR5T3JkZXJVbSwgLTAuMDAwMWQpIDwgMCkpDQogIH0NCg0KICAvKioNCiAgICogc2VuZCBQTyBsaW5lIHJlY2VpcHQgZGV0YWlscyB0byBvdXRwdXQNCiAgICogDQogICAqLw0KDQogIHB1YmxpYyB3cml0ZVJlY2VpcHRzKFN0cmluZyBlYWNoUHVubywgSGFzaHRhYmxlIGVhY2hPcGVuTGluZVJlY2VpcHQsIEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIHN0YW5kYXJkVW5pdE1lYXN1cmUgPSBlYWNoTGluZS5nZXQoJ3N0YW5kYXJkVW0nKS50b1N0cmluZygpDQogICAgdW5pdE1lYXN1cmUgPSBlYWNoTGluZS5nZXQoJ1VOTVMnKS50b1N0cmluZygpDQogICAgYWx0ZXJuYXRlVW5pdE1lYXN1cmUgPSBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKQ0KICAgIFN0cmluZyBSUUFVTSA9IGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdyZWNlaXZlZFF1YW50aXR5QWx0VW0nKQ0KICAgIFN0cmluZyBPQUxDID0gZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ29wZW5BbW91bnRMb2NhbEN1cnJlbmN5JykudG9TdHJpbmcoKQ0KICAgIGRvdWJsZSBSUUFNID0gRG91YmxlLnBhcnNlRG91YmxlKFJRQVVNKQ0KDQogICAgZG91YmxlIGFscHJDYXRjaFdlaWdodCA9IDAuMA0KICAgIGRvdWJsZSBhbHRwQ2F0Y2hXZWlnaHQgPSAwLjANCiAgICBpZiAoIWVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdvcGVuQ2F0Y2hXZWlnaHQnKS50b1N0cmluZygpLmVxdWFscygiIikpIHsNCiAgICAgIGFscHJDYXRjaFdlaWdodCA9IERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKSAvIERvdWJsZS5wYXJzZURvdWJsZShlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnb3BlbkNhdGNoV2VpZ2h0JykudG9TdHJpbmcoKSkNCiAgICAgIGFsdHBDYXRjaFdlaWdodCA9IERvdWJsZS5wYXJzZURvdWJsZShlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnb3BlbkFtb3VudE9yZGVyVW0nKS50b1N0cmluZygpKSAvIERvdWJsZS5wYXJzZURvdWJsZShlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnb3BlbkNhdGNoV2VpZ2h0JykudG9TdHJpbmcoKSkNCg0KICAgIH0NCiAgICBTdHJpbmcgY29udmVydGVkUHJpY2UgPSAiIg0KDQogICAgaWYgKFJRQU0gIT0gMC4wKSB7DQoNCiAgICAgIGRvdWJsZSBjb252ZXJ0ZWQgPSBEb3VibGUucGFyc2VEb3VibGUoZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ29wZW5BbW91bnRPcmRlclVtJykudG9TdHJpbmcoKSkgLyBEb3VibGUucGFyc2VEb3VibGUoZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ3JlY2VpdmVkUXVhbnRpdHlBbHRVbScpLnRvU3RyaW5nKCkpDQoNCiAgICAgIERlY2ltYWxGb3JtYXQgZGVjT2JqZWN0ID0gbmV3IERlY2ltYWxGb3JtYXQoIiMuIyMjIyMjIikNCiAgICAgIGNvbnZlcnRlZFByaWNlID0gZGVjT2JqZWN0LmZvcm1hdChjb252ZXJ0ZWQpDQogICAgfSBlbHNlIHsNCg0KICAgICAgZG91YmxlIGNvbnZlcnRlZCA9IDAuMDAwMDAwDQogICAgICBEZWNpbWFsRm9ybWF0IGRlY09iamVjdCA9IG5ldyBEZWNpbWFsRm9ybWF0KCIjLiMjIyMjIyIpDQogICAgICBjb252ZXJ0ZWRQcmljZSA9IGRlY09iamVjdC5mb3JtYXQoY29udmVydGVkKQ0KICAgIH0NCiAgICBkb3VibGUgdmFsdWVSZWNRdHkgPSBEb3VibGUucGFyc2VEb3VibGUoZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ3JlY2VpdmVkUXVhbnRpdHlBbHRVbScpLnRvU3RyaW5nKCkpDQoNCiAgICBpZiAodmFsdWVSZWNRdHkgPiAwIHx8IHZhbHVlUmVjUXR5IDwgMCkgew0KICAgICAgaWYgKGVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkgPCAnODUnICYmICFvSWFwYy5lcXVhbHMoIjEiKSAmJiAoIWVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkuZXF1YWxzKCc0MCcpICYmICFlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpLmVxdWFscygnNDUnKSkpIHsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAnTFInKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVOTycsIGVhY2hQdW5vKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIGVhY2hMaW5lLmdldCgnUE5MSScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBlYWNoTGluZS5nZXQoJ0lUTk8nKS50b1N0cmluZygpKQ0KDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxJJywgZWFjaExpbmUuZ2V0KCdQTkxJJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnVFJEVCcsIGVhY2hMaW5lLmdldCgnVFJEVCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdMV0hMJywgZWFjaExpbmUuZ2V0KCdXSExPJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBlYWNoTGluZS5nZXQoJ0lUTk8nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUElURCcsIGVhY2hMaW5lLmdldCgnUElURCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQSVRUJywgZWFjaExpbmUuZ2V0KCdQSVRUJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NJVEUnLCBlYWNoTGluZS5nZXQoJ1NJVEUnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0FRQScsIGVhY2hMaW5lLmdldCgnQ0FRQScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdSSlFBJywgZWFjaExpbmUuZ2V0KCdSSlFBJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NEUUEnLCBlYWNoTGluZS5nZXQoJ1NEUUEnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRQScsIGVhY2hMaW5lLmdldCgnT1JRQScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdJVlFBJywgZWFjaExpbmUuZ2V0KCdJVlFBJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JWUUEnLCBlYWNoTGluZS5nZXQoJ1JWUUEnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0ZRQScsIGVhY2hMaW5lLmdldCgnQ0ZRQScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdPUVBVJywgZWFjaExpbmUuZ2V0KCdvcGVuUXVhbnRpdHlQcmljZVVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUkMnLCBlYWNoTGluZS5nZXQoJ1BVUkMnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnTEJVWScsIGVhY2hMaW5lLmdldCgnQlVZRScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdTVFVNJywgZWFjaExpbmUuZ2V0KCdzdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOTVMnLCBlYWNoTGluZS5nZXQoJ1VOTVMnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxVTScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKQ0KICAgICAgICBpZiAoZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ29wZW5DYXRjaFdlaWdodCcpLnRvU3RyaW5nKCkgIT0gIiIpIHsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ1dVTicsIGVhY2hMaW5lLmdldCgnQ1dVTicpLnRvU3RyaW5nKCkpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NXVU4nLCAiIikNCiAgICAgICAgfQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnTE5BTScsIGVhY2hMaW5lLmdldCgnTE5BTScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVVBSJywgZWFjaExpbmUuZ2V0KCdwcmljZVBlclBpZWNlU3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVVFUJywgZWFjaExpbmUuZ2V0KCdQVVFUJykudG9TdHJpbmcoKSkNCg0KICAgICAgICBpZiAoIWVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdvcGVuQ2F0Y2hXZWlnaHQnKS50b1N0cmluZygpLmVxdWFscygiIikpIHsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxQUicsIGFsdHBDYXRjaFdlaWdodC50b1N0cmluZygpKQ0KDQogICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxQUicsICIiKQ0KICAgICAgICB9DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSkNCiAgICAgICAgaWYgKGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkubGVuZ3RoKCkgPT0gMSkgew0KDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCAnMCcgKyBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKQ0KICAgICAgICB9IGVsc2Ugew0KDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKQ0KICAgICAgICB9DQogICAgICAgIG1pLm91dERhdGEucHV0KCdHUk1UJywgZWFjaExpbmUuZ2V0KCdHUk1UJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xNT0QnLCBlYWNoTGluZS5nZXQoJ01PREwnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFRFRCcsIGVhY2hMaW5lLmdldCgnVEVETCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVMJywgZWFjaExpbmUuZ2V0KCdURUwxJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU0wnLCBlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFBTVCcsIGVhY2hMaW5lLmdldCgnUFVTVCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdQT1BOJywgZWFjaExpbmUuZ2V0KCdwb3BuRWExMycpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdST1JDJywgZWFjaExpbmUuZ2V0KCdST1JDJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUk4nLCBlYWNoTGluZS5nZXQoJ1JPUk4nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STCcsIGVhY2hMaW5lLmdldCgnUk9STCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdST1JYJywgZWFjaExpbmUuZ2V0KCdST1JYJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVRE8nLCBlYWNoTGluZS5nZXQoJ1NVRE8nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSQycsIGVhY2hMaW5lLmdldCgnRlJSQycpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdGUlJFJywgZWFjaExpbmUuZ2V0KCdGUlJFJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FEUUEnLCBlYWNoTGluZS5nZXQoJ0FEUUEnKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRVCcsIGVhY2hMaW5lLmdldCgnT1JRVCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgZWFjaExpbmUuZ2V0KCdhbW91bnRPcGVuJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIGNvbnZlcnRlZFByaWNlKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5JVCcsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgZWFjaExpbmUuZ2V0KCdpbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdRVE9SJywgZWFjaExpbmUuZ2V0KCdvcmRlcmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUUlYnLCBlYWNoTGluZS5nZXQoJ3JlY2VpdmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUXVhbnRpdHlPcGVuJykudG9TdHJpbmcoKSkNCg0KICAgICAgICBpZiAoIWFsdHBDYXRjaFdlaWdodC5lcXVhbHMoIjAuMCIpKSB7DQogICAgICAgICAgaWYgKCFlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgncmVjZWl2ZWRRdWFudGl0eUFsdFVtJykudG9TdHJpbmcoKS5lcXVhbHMoIiIpKSB7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUUCcsIGFsdHBDYXRjaFdlaWdodC50b1N0cmluZygpKQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ3JlY2VpdmVkUXVhbnRpdHlBbHRVbScpLnRvU3RyaW5nKCkuZXF1YWxzKCIiKSkgew0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFAnLCAiIikNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFAnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKQ0KICAgICAgICB9DQogICAgICAgIG1pLm91dERhdGEucHV0KCdSRUxQJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ0YyUkVMUCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdSUE5NJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ0YyUkVQTicpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdSUERUJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ0YyVFJEVCcpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdSUFFUJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ3JlY2VpdmVkUXVhbnRpdHknKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlFBTCcsIGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdyZWNlaXZlZFF1YW50aXR5QWx0VW0nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT0FPVScsIGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdvcGVuQW1vdW50T3JkZXJVbScpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCdPQUxDJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ29wZW5BbW91bnRMb2NhbEN1cnJlbmN5JykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09QQ1cnLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnb3BlbkNhdGNoV2VpZ2h0JykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09RT1UnLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgncmVjZWl2ZWRRdWFudGl0eUFsdFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09RUE0nLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnb3BlblF1YW50aXR5UHVyY2hhc2VPcmRlclByaWNlVW0nKS50b1N0cmluZygpKQ0KICAgICAgICBtaS53cml0ZSgpDQogICAgICB9DQogICAgfQ0KDQogIH0NCg0KICAvKioNCiAgICogcmV0cml2ZSByZWNlaXB0IGNoYXJnZXMgZnJvbSB0YWJsZSBGR1JQQ0wNCiAgICogDQogICAqLw0KDQogIHB1YmxpYyBnYXRoZXJSZWNlaXB0Q2hhcmdlcyhTdHJpbmcgZWFjaFB1bm8sIEhhc2h0YWJsZSBlYWNoTGluZVJlY2VpcHQsIEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIGxpbmVDaGFyZ2VSZWNlaXB0TGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKQ0KICAgIERCQWN0aW9uIHF1ZXJ5RmdycGNsID0gZGF0YWJhc2UudGFibGUoIkZHUlBDTCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiRjNDT05PIiwgIkYzRElWSSIsICJGM1BVTk8iLCAiRjNQTkxJIiwgIkYzUE5MUyIsICJGM1JFUE4iLCAiRjNSRUxQIiwgIkYzQ0RTRSIsICJGM0NFSUQiLCAiRjNFWFRZIiwgIkYzU0NPQyIsICJGM1NDT1AiLCAiRjNJVlFUIiwgIkYzSVZRQSIsICJGM1JDQUMiLCAiRjNJQ0FDIikuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIHJlY29yZEZncnBjbCA9IHF1ZXJ5RmdycGNsLmdldENvbnRhaW5lcigpDQogICAgcmVjb3JkRmdycGNsLnNldCgiRjNDT05PIiwgSW50ZWdlci5wYXJzZUludChDT05PLnRyaW0oKSkpDQogICAgcmVjb3JkRmdycGNsLnNldCgiRjNESVZJIiwgb0RpdmkudHJpbSgpKQ0KICAgIHJlY29yZEZncnBjbC5zZXQoIkYzUFVOTyIsIGVhY2hQdW5vLnRyaW0oKSkNCiAgICByZWNvcmRGZ3JwY2wuc2V0KCJGM1BOTEkiLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpLnRvSW50ZWdlcigpKQ0KICAgIHJlY29yZEZncnBjbC5zZXQoIkYzUE5MUyIsIGVhY2hMaW5lLmdldCgnUE5MUycpLnRvU3RyaW5nKCkudG9JbnRlZ2VyKCkpDQogICAgcmVjb3JkRmdycGNsLnNldCgnRjNSRVBOJywgTG9uZy5wYXJzZUxvbmcoZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSRVBOJykudG9TdHJpbmcoKSkpDQogICAgcmVjb3JkRmdycGNsLnNldCgnRjNSRUxQJywgSW50ZWdlci5wYXJzZUludChlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJFTFAnKS50b1N0cmluZygpKSkNCg0KICAgIGludCByZWFkcyA9IHF1ZXJ5RmdycGNsLnJlYWRBbGwocmVjb3JkRmdycGNsLCA3LCBnZXRGZ3JwY2xSZWNvcmRzKQ0KICB9DQoNCiAgQ2xvc3VyZSA8ID8gPiBnZXRGZ3JwY2xSZWNvcmRzID0gew0KICAgIERCQ29udGFpbmVyIHJlY29yZCAtPg0KICAgIEhhc2h0YWJsZSB0ZW1wVGFibGUgPSBuZXcgSGFzaHRhYmxlIDwgU3RyaW5nLA0KICAgIFN0cmluZyA+ICgpDQogICAgdGVtcFRhYmxlLnB1dCgnY2RzZUxjcicsIHJlY29yZC5nZXQoJ0YzQ0RTRScpLnRvU3RyaW5nKCkpDQogICAgdGVtcFRhYmxlLnB1dCgnY2VpZExjcicsIHJlY29yZC5nZXQoJ0YzQ0VJRCcpLnRvU3RyaW5nKCkpDQogICAgdGVtcFRhYmxlLnB1dCgnZXh0eUxjcicsIHJlY29yZC5nZXQoJ0YzRVhUWScpLnRvU3RyaW5nKCkpDQogICAgdGVtcFRhYmxlLnB1dCgnc2NvY0xjcicsIHJlY29yZC5nZXQoJ0YzU0NPQycpLnRvU3RyaW5nKCkpDQogICAgdGVtcFRhYmxlLnB1dCgnc2NvcExjcicsIHJlY29yZC5nZXQoJ0YzU0NPUCcpLnRvU3RyaW5nKCkpDQogICAgdGVtcFRhYmxlLnB1dCgnaXZxdExjcicsIHJlY29yZC5nZXQoJ0YzSVZRVCcpLnRvU3RyaW5nKCkpDQogICAgdGVtcFRhYmxlLnB1dCgncHVub0xjcicsIHJlY29yZC5nZXQoJ0YzUFVOTycpLnRvU3RyaW5nKCkgKyByZWNvcmQuZ2V0KCdGM1BOTEknKS50b1N0cmluZygpICsgcmVjb3JkLmdldCgnRjNQTkxTJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdpdnFhTGNyJywgcmVjb3JkLmdldCgnRjNJVlFBJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdyY2FjTGNyJywgcmVjb3JkLmdldCgnRjNSQ0FDJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGUucHV0KCdpY2FjTGNyJywgcmVjb3JkLmdldCgnRjNJQ0FDJykudG9TdHJpbmcoKSkNCiAgICB0ZW1wVGFibGVDaGFyZ2VzLnB1dChyZWNvcmQuZ2V0KCdGM1BVTk8nKS50b1N0cmluZygpLnRyaW0oKSArIHJlY29yZC5nZXQoJ0YzUE5MSScpLnRvU3RyaW5nKCkudHJpbSgpICsgcmVjb3JkLmdldCgnRjNQTkxTJykudG9TdHJpbmcoKS50cmltKCkgKyByZWNvcmQuZ2V0KCdGM0NEU0UnKS50b1N0cmluZygpLnRyaW0oKSwgcmVjb3JkLmdldCgnRjNJVlFBJykudG9TdHJpbmcoKS50cmltKCkpDQogICAgdGVtcFRhYmxlQ2hhcmdlczEucHV0KHJlY29yZC5nZXQoJ0YzUFVOTycpLnRvU3RyaW5nKCkudHJpbSgpLCByZWNvcmQuZ2V0KCdGM1BOTEknKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICBsaW5lQ2hhcmdlUmVjZWlwdExpc3QuYWRkKHRlbXBUYWJsZSkNCg0KICB9DQoNCiAgLyoqIHJldHJpdmUgY2hhcmdlIHRleHQgdXNpbmcgUFBTMjgwTUkuR2V0RWxlbWVudA0KICAgKiANCiAgICovDQoNCiAgcHVibGljIGdldENoYXJnZVRleHQoSGFzaHRhYmxlIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdCkgew0KICAgIFN0cmluZyBDRUlEID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnY2VpZExjcicpDQogICAgU3RyaW5nIFRYMzAgPSAiIg0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZQ0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKQ0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBUWDMwID0gcmVzdWx0cy5nZXQoJ1RYMzAnKQ0KDQogICAgICB9DQogICAgICBlYWNoTGluZUNoYXJnZVJlY2VpcHQucHV0KCd0eDMwTGNyJywgVFgzMCkNCg0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJDRUlEIjogQ0VJRC50cmltKCldDQogICAgbWlDYWxsZXIuY2FsbCgiUFBTMjgwTUkiLCAiR2V0RWxlbWVudCIsIHBhcmFtcywgY2FsbGJhY2spDQogIH0NCg0KICAvKiogY2FsY3VsYXRlIHJlY2VpcHQgY2hhcmdlIHF1YW50aXRpZXMNCiAgICovDQogIHB1YmxpYyBjYWxjdWxhdGVSZWNlaXB0Q2hhcmdlUXVhbnRpdGllcyhIYXNodGFibGUgZWFjaExpbmUsIEhhc2h0YWJsZSBlYWNoTGluZVJlY2VpcHQsIEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZVJlY2VpcHQpIHsNCiAgICBTdHJpbmcgUFVVTiA9IGVhY2hMaW5lLmdldCgnUFVVTicpDQogICAgU3RyaW5nIFBQVU4gPSBlYWNoTGluZS5nZXQoJ1BQVU4nKQ0KICAgIFN0cmluZyBGMkNBV0UgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMkNBV0UnKQ0KICAgIFN0cmluZyBSUFFBID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSUFFBJykNCiAgICBTdHJpbmcgRjJSUFFUID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSUFFUJykNCiAgICBTdHJpbmcgRjNJVlFUID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnaXZxdExjcicpDQogICAgU3RyaW5nIEYyUlBRQSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUlBRQScpDQogICAgU3RyaW5nIEYzSVZRQSA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ2l2cWFMY3InKQ0KICAgIGludlF0eSA9IEYzSVZRQQ0KDQogICAgU3RyaW5nIEYySVZDVyA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YySVZDVycpDQogICAgU3RyaW5nIEYzUkNBQyA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ3JjYWNMY3InKQ0KICAgIFN0cmluZyBGM0lDQUMgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdpY2FjTGNyJykNCiAgICBTdHJpbmcgRjNTQ09QID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnc2NvcExjcicpDQogICAgU3RyaW5nIEYzU0NPQyA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ3Njb2NMY3InKQ0KICAgIFN0cmluZyBGMlNFUkEgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlNFUkEnKQ0KDQogICAgUFVVTiA9IFBVVU4gPT0gbnVsbCA/ICIiIDogUFVVTi50cmltKCkNCiAgICBQUFVOID0gUFBVTiA9PSBudWxsID8gIiIgOiBQUFVOLnRyaW0oKQ0KICAgIEYyQ0FXRSA9IEYyQ0FXRSA9PSBudWxsID8gIiIgOiBGMkNBV0UudHJpbSgpDQogICAgUlBRQSA9IFJQUUEgPT0gbnVsbCA/ICIiIDogUlBRQS50cmltKCkNCiAgICBGMlJQUVQgPSBGMlJQUVQgPT0gbnVsbCA/ICIiIDogRjJSUFFULnRyaW0oKQ0KICAgIEYzSVZRVCA9IEYzSVZRVCA9PSBudWxsID8gIiIgOiBGM0lWUVQudHJpbSgpDQogICAgRjJSUFFBID0gRjJSUFFBID09IG51bGwgPyAiIiA6IEYyUlBRQS50cmltKCkNCiAgICBGM0lWUUEgPSBGM0lWUUEgPT0gbnVsbCA/ICIiIDogRjNJVlFBLnRyaW0oKQ0KICAgIEYySVZDVyA9IEYySVZDVyA9PSBudWxsID8gIiIgOiBGMklWQ1cudHJpbSgpDQogICAgRjNSQ0FDID0gRjNSQ0FDID09IG51bGwgPyAiIiA6IEYzUkNBQy50cmltKCkNCiAgICBGM0lDQUMgPSBGM0lDQUMgPT0gbnVsbCA/ICIiIDogRjNJQ0FDLnRyaW0oKQ0KICAgIEYzU0NPUCA9IEYzU0NPUCA9PSBudWxsID8gIiIgOiBGM1NDT1AudHJpbSgpDQogICAgRjNTQ09DID0gRjNTQ09DID09IG51bGwgPyAiIiA6IEYzU0NPQy50cmltKCkNCiAgICBGMlNFUkEgPSBGMlNFUkEgPT0gbnVsbCA/ICIiIDogRjJTRVJBLnRyaW0oKQ0KICAgIG9EbWN1ID0gb0RtY3UgPT0gbnVsbCA/ICIiIDogb0RtY3UudHJpbSgpDQogICAgb3JkZXJVbURjY2QgPSBvcmRlclVtRGNjZCA9PSBudWxsID8gIiIgOiBvcmRlclVtRGNjZC50cmltKCkNCiAgICBiYXNpY1VtRGNjZCA9IGJhc2ljVW1EY2NkID09IG51bGwgPyAiIiA6IGJhc2ljVW1EY2NkLnRyaW0oKQ0KDQogICAgRG91YmxlIGRGY2F3ZTIgPSBEb3VibGUucGFyc2VEb3VibGUoRjJDQVdFLmlzRW1wdHkoKSA/ICIwIiA6IEYyQ0FXRS50cmltKCkpDQogICAgRG91YmxlIGRGcnBxdDIgPSBEb3VibGUucGFyc2VEb3VibGUoRjJSUFFULmlzRW1wdHkoKSA/ICIwIiA6IEYyUlBRVC50cmltKCkpDQogICAgRG91YmxlIGRGaXZxdDMgPSBEb3VibGUucGFyc2VEb3VibGUoRjNJVlFULmlzRW1wdHkoKSA/ICIwIiA6IEYzSVZRVC50cmltKCkpDQogICAgRG91YmxlIGRGcnBxYTIgPSBEb3VibGUucGFyc2VEb3VibGUoRjJSUFFBLmlzRW1wdHkoKSA/ICIwIiA6IEYyUlBRQS50cmltKCkpDQogICAgRG91YmxlIGRGcmNhYzMgPSBEb3VibGUucGFyc2VEb3VibGUoRjNSQ0FDLmlzRW1wdHkoKSA/ICIwIiA6IEYzUkNBQy50cmltKCkpDQogICAgRG91YmxlIGRGc2VyYTIgPSBEb3VibGUucGFyc2VEb3VibGUoRjJTRVJBLmlzRW1wdHkoKSA/ICIwIiA6IEYyU0VSQS50cmltKCkpDQoNCiAgICBpbnQgaW50QmFzaWNVbURjY2QgPSBJbnRlZ2VyLnZhbHVlT2YoYmFzaWNVbURjY2QudHJpbSgpKQ0KICAgIGludCBpbnRPcmRlclVtRGNjZCA9IG9yZGVyVW1EY2NkLmlzRW1wdHkoKSA/IGludEJhc2ljVW1EY2NkIDogSW50ZWdlci52YWx1ZU9mKG9yZGVyVW1EY2NkLnRyaW0oKSkNCg0KICAgIERvdWJsZSBkUmVjZWl2ZWRRdWFudGl0eSA9IDAuMGQNCiAgICBEb3VibGUgZFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5ID0gMC4wZA0KDQogICAgaWYgKG9EbWN1LmVxdWFscygiMSIpKSB7DQogICAgICBkRnNlcmEyID0gMWQgLyBkRnNlcmEyDQogICAgfQ0KICAgIGRSZWNlaXZlZFF1YW50aXR5ID0gZEZycHFhMg0KICAgIGRSZWNlaXZlZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9IERvdWJsZS5jb21wYXJlKGRGcnBxdDIsIDAuMGQpID09IDAgPyAwLjBkIDogKERvdWJsZSkoKGRGcnBxYTIgLyBkRnJwcXQyKSAqIGRGcmNhYzMgKiBkRnNlcmEyKQ0KICAgIHJlY2VpdmVkUXVhbnRpdHlPcmRlclVtID0gRG91YmxlLnRvU3RyaW5nKG5ldyBCaWdEZWNpbWFsKGRSZWNlaXZlZFF1YW50aXR5KS5zZXRTY2FsZShpbnRPcmRlclVtRGNjZCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLmRvdWJsZVZhbHVlKCkpDQogICAgcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5ID0gRG91YmxlLnRvU3RyaW5nKG5ldyBCaWdEZWNpbWFsKGRSZWNlaXZlZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSkuc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLmRvdWJsZVZhbHVlKCkpDQogICAgb3BlUXVhbnRpdHlPcmRlclVtID0gRG91YmxlLnRvU3RyaW5nKG5ldyBCaWdEZWNpbWFsKChkRnJwcXQyIC0gZEZpdnF0MykpLnNldFNjYWxlKGludEJhc2ljVW1EY2NkLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkuZG91YmxlVmFsdWUoKSkNCg0KICAgIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5wdXQoJ3JlY2VpdmVkUXVhbnRpdHlPcmRlclVtJywgcmVjZWl2ZWRRdWFudGl0eU9yZGVyVW0pDQogICAgZWFjaExpbmVDaGFyZ2VSZWNlaXB0LnB1dCgncmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5JywgcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5KQ0KICAgIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5wdXQoJ29wZVF1YW50aXR5T3JkZXJVbScsIG9wZVF1YW50aXR5T3JkZXJVbSkNCiAgfQ0KDQogIC8qKiBDaGVjayBpZiByZWNlaXB0IGNoYXJnZXMgb3Blbg0KICAgKi8NCiAgcHVibGljIGlmUmVjZWlwdENoYXJnZU9wZW4oSGFzaHRhYmxlIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdCkgew0KICAgIFN0cmluZyBvcGVRdWFudGl0eU9yZGVyVW0gPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdvcGVRdWFudGl0eU9yZGVyVW0nKQ0KICAgIFN0cmluZyByZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3kgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdyZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3knKQ0KDQogICAgb3BlUXVhbnRpdHlPcmRlclVtID0gb3BlUXVhbnRpdHlPcmRlclVtID09IG51bGwgPyAiIiA6IG9wZVF1YW50aXR5T3JkZXJVbS50cmltKCkNCiAgICBvcGVRdWFudGl0eU9yZGVyVW0gPSBvcGVRdWFudGl0eU9yZGVyVW0uZXF1YWxzKCIiKSA/ICIwIiA6IG9wZVF1YW50aXR5T3JkZXJVbS5yZXBsYWNlKCcsJywgJy4nKQ0KDQogICAgQmlnRGVjaW1hbCBvcGVuUXVhbnRpdHlPcmRlclVtID0gbmV3IEJpZ0RlY2ltYWwob3BlUXVhbnRpdHlPcmRlclVtKQ0KDQogICAgcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5ID0gcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5ID09IG51bGwgPyAiIiA6IHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeS50cmltKCkNCiAgICByZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3kgPSByZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3kuZXF1YWxzKCIiKSA/ICIwIiA6IHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeS5yZXBsYWNlKCcsJywgJy4nKQ0KDQogICAgQmlnRGVjaW1hbCByZWNlaXZlZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9IG5ldyBCaWdEZWNpbWFsKHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSkNCg0KICAgIFN0cmluZyBleHBvcnRFbXB0eUNoYXJnZXMgPSBleHBvcnRFbXB0eSA9PSBudWxsID8gIiIgOiBleHBvcnRFbXB0eS50cmltKCkNCg0KICAgIGJvb2xlYW4gb3BlblF1YW50aXR5ID0gb3BlblF1YW50aXR5T3JkZXJVbS5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSAhPSAwDQoNCiAgICBib29sZWFuIG9wZW5BbW91bnQgPSByZWNlaXZlZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeS5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSAhPSAwDQoNCiAgICBpZiAoIWV4cG9ydEVtcHR5Q2hhcmdlcy5lcXVhbHMoIjEiKSAmJiAhb3BlbkFtb3VudCAmJiBvcGVuUXVhbnRpdHkpIHsNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gb3BlblF1YW50aXR5DQogICAgfQ0KICB9DQogIC8qKiBjaGVjayBQTyBsaW5lIGNoYXJnZSBvcmRlciBwcmljZSBhbmQgQmFzaWMgdW5pdA0KICAgKi8NCiAgcHVibGljIGNoZWNrQ2hhcmdlT3JkZXJQcmljZUFuZEJhc2VVbml0KEhhc2h0YWJsZSBlYWNoTGluZSwgSGFzaHRhYmxlIGVhY2hMaW5lUmVjZWlwdCwgSGFzaHRhYmxlIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdCkgew0KICAgIFN0cmluZyBQVVVOID0gZWFjaExpbmUuZ2V0KCdQVVVOJykNCiAgICBTdHJpbmcgVU5NUyA9IGVhY2hMaW5lLmdldCgnVU5NUycpDQogICAgU3RyaW5nIENXVU4gPSBlYWNoTGluZS5nZXQoJ0NXVU4nKQ0KICAgIFN0cmluZyBQUFVOID0gZWFjaExpbmUuZ2V0KCdQUFVOJykNCiAgICBTdHJpbmcgT1JRQSA9IGVhY2hMaW5lLmdldCgnT1JRQScpDQogICAgU3RyaW5nIE9SUVQgPSBlYWNoTGluZS5nZXQoJ09SUVQnKQ0KICAgIFN0cmluZyBSUFFBID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSUFFBJykNCiAgICByZXBRdHkgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJQUUEnKQ0KICAgIFN0cmluZyBSUFFUID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSUFFUJykNCiAgICBTdHJpbmcgSVZRQSA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ2l2cWFMY3InKQ0KICAgIFN0cmluZyBJVlFUID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnaXZxdExjcicpDQoNCiAgICBpZiAoUFVVTi50cmltKCkuZXF1YWxzKFVOTVMudHJpbSgpKSkgew0KICAgICAgZWFjaExpbmVDaGFyZ2VSZWNlaXB0LnJlcGxhY2UoJ2l2cXRMY3InLCBJVlFBKQ0KICAgIH0gZWxzZSB7DQogICAgICBCaWdEZWNpbWFsIGRibEl2cWEgPSBuZXcgQmlnRGVjaW1hbChJVlFBKQ0KICAgICAgQmlnRGVjaW1hbCBkYmxDb2ZhID0gbmV3IEJpZ0RlY2ltYWwob3JkZXJVbUNvZmEpDQoNCiAgICAgIGlmIChvcmRlclVtRG1jZi5lcXVhbHMoIjEiKSkgew0KICAgICAgICBJVlFUID0gZGJsSXZxYS5tdWx0aXBseShkYmxDb2ZhKS5zZXRTY2FsZSg4LCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQoNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIElWUVQgPSBkYmxJdnFhLmRpdmlkZShkYmxDb2ZhKS5zZXRTY2FsZSg4LCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQogICAgICB9DQogICAgICBlYWNoTGluZUNoYXJnZVJlY2VpcHQucmVwbGFjZSgnaXZxdExjcicsIElWUVQpDQogICAgfQ0KDQogICAgaWYgKFBQVU4udHJpbSgpLmVxdWFscyhQVVVOLnRyaW0oKSkpIHsNCiAgICAgIE9SUUEgPSBPUlFBID09IG51bGwgPyAiIiA6IE9SUUEudHJpbSgpDQogICAgICBSUFFBID0gUlBRQSA9PSBudWxsID8gIiIgOiBSUFFBLnRyaW0oKQ0KICAgICAgSVZRQSA9IElWUUEgPT0gbnVsbCA/ICIiIDogSVZRQS50cmltKCkNCg0KICAgICAgb3JkZXJkUXVhbnRpdHlQcmljZVVtID0gT1JRQQ0KICAgICAgcmVjZWl2ZWRRdWFudGl0eVByaWNlVW0gPSBSUFFBDQogICAgICBpbnZvaWNlZFF1YW50aXR5UHJpY2VVbSA9IElWUUENCg0KICAgICAgQmlnRGVjaW1hbCBkYmxScHFhID0gbmV3IEJpZ0RlY2ltYWwoUlBRQSkNCiAgICAgIEJpZ0RlY2ltYWwgZGJsSXZxYSA9IG5ldyBCaWdEZWNpbWFsKElWUUEpDQoNCiAgICAgIG9wZW5RdWFudGl0eVByaWNlVW0gPSAoZGJsUnBxYSAtIGRibEl2cWEpLnNldFNjYWxlKDQsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCkNCiAgICB9DQoNCiAgICBpZiAoUFBVTi50cmltKCkuZXF1YWxzKFVOTVMudHJpbSgpKSAmJiAhUFBVTi50cmltKCkuZXF1YWxzKFBVVU4udHJpbSgpKSkgew0KICAgICAgT1JRVCA9IE9SUVQgPT0gbnVsbCA/ICIiIDogT1JRVC50cmltKCkNCiAgICAgIFJQUVQgPSBSUFFUID09IG51bGwgPyAiIiA6IFJQUVQudHJpbSgpDQogICAgICBJVlFUID0gSVZRVCA9PSBudWxsID8gIiIgOiBJVlFULnRyaW0oKQ0KDQogICAgICBvcmRlcmRRdWFudGl0eVByaWNlVW0gPSBPUlFUDQogICAgICByZWNlaXZlZFF1YW50aXR5UHJpY2VVbSA9IFJQUVQNCiAgICAgIGludm9pY2VkUXVhbnRpdHlQcmljZVVtID0gSVZRVA0KDQogICAgICBCaWdEZWNpbWFsIGRibFJwcXQgPSBuZXcgQmlnRGVjaW1hbChSUFFUKQ0KICAgICAgQmlnRGVjaW1hbCBkYmxJdnF0ID0gbmV3IEJpZ0RlY2ltYWwoSVZRVCkNCg0KICAgICAgb3BlblF1YW50aXR5UHJpY2VVbSA9IChkYmxScHF0IC0gZGJsSXZxdCkuc2V0U2NhbGUoNCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKQ0KICAgIH0NCiAgICBpZiAoIVBQVU4udHJpbSgpLmVxdWFscyhVTk1TLnRyaW0oKSkgJiYgIVBQVU4udHJpbSgpLmVxdWFscyhQVVVOLnRyaW0oKSkpIHsNCiAgICAgIElWUVQgPSBJVlFUID09IG51bGwgPyAiIiA6IElWUVQudHJpbSgpDQogICAgICBPUlFUID0gT1JRVCA9PSBudWxsID8gIiIgOiBPUlFULnRyaW0oKQ0KICAgICAgUlBRVCA9IFJQUVQgPT0gbnVsbCA/ICIiIDogUlBRVC50cmltKCkNCiAgICAgIFN0cmluZyBEQ0NEID0gcHJpY2VVbURjY2QgPT0gbnVsbCA/ICIiIDogcHJpY2VVbURjY2QudHJpbSgpDQogICAgICBTdHJpbmcgRE1DRiA9IHByaWNlVW1EbWNmID09IG51bGwgPyAiIiA6IHByaWNlVW1EbWNmLnRyaW0oKQ0KICAgICAgU3RyaW5nIENPRkEgPSBwcmljZVVtQ29mYSA9PSBudWxsID8gIiIgOiBwcmljZVVtQ29mYS50cmltKCkNCg0KICAgICAgQmlnRGVjaW1hbCBkYmxJdnF0ID0gbmV3IEJpZ0RlY2ltYWwoSVZRVCkNCiAgICAgIEJpZ0RlY2ltYWwgZGJsQ29mYSA9IG5ldyBCaWdEZWNpbWFsKENPRkEpDQogICAgICBCaWdEZWNpbWFsIGRibE9ycXQgPSBuZXcgQmlnRGVjaW1hbChPUlFUKQ0KICAgICAgQmlnRGVjaW1hbCBkYmxScHF0ID0gbmV3IEJpZ0RlY2ltYWwoUlBRVCkNCg0KICAgICAgaWYgKEFVVFBBLmVxdWFscygiMSIpKSB7DQogICAgICAgIGlmIChETUNGLmVxdWFscygiMSIpKSB7DQoNCiAgICAgICAgICBvcmRlcmRRdWFudGl0eVByaWNlVW0gPSBkYmxPcnF0LmRpdmlkZShkYmxDb2ZhKS5zZXRTY2FsZShJbnRlZ2VyLnBhcnNlSW50KERDQ0QpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQogICAgICAgICAgcmVjZWl2ZWRRdWFudGl0eVByaWNlVW0gPSBkYmxScHF0LmRpdmlkZShkYmxDb2ZhKS5zZXRTY2FsZShJbnRlZ2VyLnBhcnNlSW50KERDQ0QpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQogICAgICAgICAgb3BlblF1YW50aXR5UHJpY2VVbSA9IChkYmxScHF0IC0gZGJsSXZxdCkuZGl2aWRlKGRibENvZmEpLnNldFNjYWxlKEludGVnZXIucGFyc2VJbnQoRENDRCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCkNCg0KICAgICAgICB9IGVsc2Ugew0KDQogICAgICAgICAgb3JkZXJkUXVhbnRpdHlQcmljZVVtID0gZGJsT3JxdC5tdWx0aXBseShkYmxDb2ZhKS5zZXRTY2FsZShJbnRlZ2VyLnBhcnNlSW50KERDQ0QpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQogICAgICAgICAgcmVjZWl2ZWRRdWFudGl0eVByaWNlVW0gPSBkYmxScHF0Lm11bHRpcGx5KGRibENvZmEpLnNldFNjYWxlKEludGVnZXIucGFyc2VJbnQoRENDRCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCkNCiAgICAgICAgICBvcGVuUXVhbnRpdHlQcmljZVVtID0gKGRibFJwcXQgLSBkYmxJdnF0KS5tdWx0aXBseShkYmxDb2ZhKS5zZXRTY2FsZShJbnRlZ2VyLnBhcnNlSW50KERDQ0QpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChBVVRQQS5lcXVhbHMoIjIiKSkgew0KICAgICAgICBpZiAoRE1DRi5lcXVhbHMoIjEiKSkgew0KDQogICAgICAgICAgb3JkZXJkUXVhbnRpdHlQcmljZVVtID0gZGJsT3JxdC5kaXZpZGUoZGJsQ29mYSkuc2V0U2NhbGUoMiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKQ0KICAgICAgICAgIHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID0gZGJsUnBxdC5kaXZpZGUoZGJsQ29mYSkuc2V0U2NhbGUoMiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKQ0KICAgICAgICAgIG9wZW5RdWFudGl0eVByaWNlVW0gPSAoZGJsUnBxdCAtIGRibEl2cXQpLmRpdmlkZShkYmxDb2ZhKS5zZXRTY2FsZSgyLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQoNCiAgICAgICAgfSBlbHNlIHsNCg0KICAgICAgICAgIG9yZGVyZFF1YW50aXR5UHJpY2VVbSA9IGRibE9ycXQubXVsdGlwbHkoZGJsQ29mYSkuc2V0U2NhbGUoMiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKQ0KICAgICAgICAgIHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID0gZGJsUnBxdC5tdWx0aXBseShkYmxDb2ZhKS5zZXRTY2FsZSgyLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQogICAgICAgICAgb3BlblF1YW50aXR5UHJpY2VVbSA9IChkYmxScHF0IC0gZGJsSXZxdCkubXVsdGlwbHkoZGJsQ29mYSkuc2V0U2NhbGUoMiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgUlBRQSA9IFJQUUEgPT0gbnVsbCA/ICIiIDogUlBRQS50cmltKCkNCiAgICBJVlFBID0gSVZRQSA9PSBudWxsID8gIiIgOiBJVlFBLnRyaW0oKQ0KICAgIG9yZGVyVW1EY2NkID0gb3JkZXJVbURjY2QgPT0gbnVsbCA/ICIiIDogb3JkZXJVbURjY2QudHJpbSgpDQoNCiAgICBCaWdEZWNpbWFsIGRibFJwcWEgPSBuZXcgQmlnRGVjaW1hbChSUFFBKQ0KICAgIEJpZ0RlY2ltYWwgZGJsSXZxYSA9IG5ldyBCaWdEZWNpbWFsKElWUUEpDQogICAgQmlnRGVjaW1hbCBkYmxJbnZRdHkgPSBuZXcgQmlnRGVjaW1hbChpbnZRdHkpDQogICAgaW50IGludE9yZGVyVW1EY2NkID0gSW50ZWdlci52YWx1ZU9mKG9yZGVyVW1EY2NkKQ0KDQogICAgb3BlUXVhbnRpdHlPcmRlclVtID0gZGJsUnBxYS5zdWJ0cmFjdChkYmxJdnFhKS5zZXRTY2FsZShpbnRPcmRlclVtRGNjZCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKQ0KICAgIG9wZW5RdWFudGl0eU9yZGVyVW1hID0gZGJsUnBxYS5zdWJ0cmFjdChkYmxJbnZRdHkpLnNldFNjYWxlKGludE9yZGVyVW1EY2NkLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpDQoNCiAgICBvcGVRdWFudGl0eU9yZGVyVW0gPSBvcGVRdWFudGl0eU9yZGVyVW0gPT0gbnVsbCA/ICIiIDogb3BlUXVhbnRpdHlPcmRlclVtLnRyaW0oKQ0KICAgIHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9IHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9PSBudWxsID8gIiIgOiByZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3kudHJpbSgpDQogICAgcmVjZWl2ZWRRdWFudGl0eVByaWNlVW0gPSByZWNlaXZlZFF1YW50aXR5UHJpY2VVbSA9PSBudWxsID8gIiIgOiByZWNlaXZlZFF1YW50aXR5UHJpY2VVbS50cmltKCkNCiAgICByZWNlaXZlZFF1YW50aXR5T3JkZXJVbSA9IHJlY2VpdmVkUXVhbnRpdHlPcmRlclVtID09IG51bGwgPyAiIiA6IHJlY2VpdmVkUXVhbnRpdHlPcmRlclVtLnRyaW0oKQ0KICAgIG9wZW5RdWFudGl0eVByaWNlVW0gPSBvcGVuUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IG9wZW5RdWFudGl0eVByaWNlVW0udHJpbSgpDQoNCiAgICBCaWdEZWNpbWFsIGRibE9wZW5RdWFudGl0eU9yZGVyVW0gPSBuZXcgQmlnRGVjaW1hbChvcGVRdWFudGl0eU9yZGVyVW0pDQogICAgQmlnRGVjaW1hbCBkYmxSZWNlaXZlZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9IG5ldyBCaWdEZWNpbWFsKHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSkNCiAgICBCaWdEZWNpbWFsIGRibFJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID0gbmV3IEJpZ0RlY2ltYWwocmVjZWl2ZWRRdWFudGl0eVByaWNlVW0pDQogICAgQmlnRGVjaW1hbCBkYmxSZWNlaXZlZFF1YW50aXR5T3JkZXJVbSA9IG5ldyBCaWdEZWNpbWFsKHJlY2VpdmVkUXVhbnRpdHlPcmRlclVtKQ0KICAgIEJpZ0RlY2ltYWwgZGJsT3BlblF1YW50aXR5UHJpY2VVbSA9IG5ldyBCaWdEZWNpbWFsKG9wZW5RdWFudGl0eVByaWNlVW0pDQoNCiAgICBCaWdEZWNpbWFsIGRibFByaWNlUGVyUGllY2VPcmRlclVtID0gZGJsUmVjZWl2ZWRRdWFudGl0eU9yZGVyVW0uY29tcGFyZVRvKDAuMCkgPT0gMCA/IDAuMCA6IGRibFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5IC8gZGJsUmVjZWl2ZWRRdWFudGl0eU9yZGVyVW0NCiAgICBCaWdEZWNpbWFsIGRibFByaWNlUGVyUGllY2VQcmljZVVtID0gZGJsUmVjZWl2ZWRRdWFudGl0eVByaWNlVW0uY29tcGFyZVRvKDAuMCkgPT0gMCA/IDAuMCA6IChkYmxSZWNlaXZlZFF1YW50aXR5T3JkZXJVbSAvIGRibFJlY2VpdmVkUXVhbnRpdHlQcmljZVVtKSAqIGRibFByaWNlUGVyUGllY2VPcmRlclVtDQoNCiAgICBhbW91bnRSZWNlaXZlZFByaWNlVW0gPSBkYmxSZWNlaXZlZFF1YW50aXR5UHJpY2VVbS5tdWx0aXBseShkYmxQcmljZVBlclBpZWNlUHJpY2VVbSkuc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKQ0KICAgIGFtb3VudE9wZW5QcmljZVVtID0gZGJsT3BlblF1YW50aXR5UHJpY2VVbS5tdWx0aXBseShkYmxQcmljZVBlclBpZWNlUHJpY2VVbSkuc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKQ0KICAgIGFtb3VudE9wZW5PcmRlclVtID0gZGJsT3BlblF1YW50aXR5T3JkZXJVbS5tdWx0aXBseShkYmxQcmljZVBlclBpZWNlT3JkZXJVbSkuc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKQ0KDQogICAgcHJpY1BlclBpZWNlUHJpY2VVbSA9IGRibFByaWNlUGVyUGllY2VQcmljZVVtLnNldFNjYWxlKG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCkNCiAgICBwcmljUGVyUGllY2VPcmRlclVtID0gZGJsUHJpY2VQZXJQaWVjZU9yZGVyVW0uc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKQ0KDQogIH0NCg0KICAvKiogYWRkIFBPIGxpbmUgb3BlbiBjaGFyZ2UgdG8gcmVjZWlwdCBsaXN0DQogICAqLw0KICBwdWJsaWMgYWRkVG9MaW5lT3BlbkNoYXJnZVJlY2VpcHRMaXN0KFN0cmluZyBlYWNoUHVubywgSGFzaHRhYmxlIGVhY2hMaW5lLCBIYXNodGFibGUgZWFjaExpbmVSZWNlaXB0LCBIYXNodGFibGUgZWFjaExpbmVDaGFyZ2VSZWNlaXB0KSB7DQogICAgU3RyaW5nIFBOTEkgPSBlYWNoTGluZS5nZXQoJ1BOTEknKQ0KICAgIFN0cmluZyBQTkxTID0gZWFjaExpbmUuZ2V0KCdQTkxTJykNCiAgICBTdHJpbmcgQ0RTRSA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ2Nkc2VMY3InKQ0KICAgIFN0cmluZyBDRUlEID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnY2VpZExjcicpDQogICAgU3RyaW5nIFJFUE4gPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJFUE4nKQ0KICAgIFN0cmluZyBSRUxQID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSRUxQJykNCiAgICBTdHJpbmcgVFgzMCA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ3R4MzBMY3InKQ0KICAgIFN0cmluZyBFWFRZID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnZXh0eUxjcicpDQogICAgU3RyaW5nIElUTk8gPSBlYWNoTGluZS5nZXQoJ0lUTk8nKQ0KICAgIFN0cmluZyBQUFVOID0gZWFjaExpbmUuZ2V0KCdQUFVOJykNCiAgICBTdHJpbmcgUFVVTiA9IGVhY2hMaW5lLmdldCgnUFVVTicpDQoNCiAgICBIYXNodGFibGUgdGVtcFRhYmxlID0gbmV3IEhhc2h0YWJsZSA8IFN0cmluZywgU3RyaW5nID4gKCkNCiAgICB0ZW1wVGFibGUucHV0KCJQVU5PIiwgZWFjaFB1bm8pDQogICAgdGVtcFRhYmxlLnB1dCgiUE5MSSIsIFBOTEkpDQogICAgdGVtcFRhYmxlLnB1dCgiUE5MUyIsIFBOTFMpDQogICAgdGVtcFRhYmxlLnB1dCgic2VxdWVuY2VOdW1iZXIiLCBDRFNFKQ0KICAgIHRlbXBUYWJsZS5wdXQoImNvc3RpbmdFbGVtZW50IiwgQ0VJRCkNCiAgICB0ZW1wVGFibGUucHV0KCJyZWNlaXB0TnVtYmVyIiwgUkVQTikNCiAgICB0ZW1wVGFibGUucHV0KCJjb3N0aW5nRWxlbWVudERlc2NyaXB0aW9uIiwgVFgzMCkNCiAgICB0ZW1wVGFibGUucHV0KCJjaGFyZ2VUeXBlIiwgRVhUWSkNCiAgICB0ZW1wVGFibGUucHV0KCJpdGVtTnVtYmVyIiwgSVROTykNCiAgICB0ZW1wVGFibGUucHV0KCdGMlJFTFAnLCBSRUxQKQ0KDQogICAgdGVtcFRhYmxlLnB1dCgiYW1vdW50T3BlbiIsIGFtb3VudE9wZW5QcmljZVVtKQ0KICAgIHRlbXBUYWJsZS5wdXQoImFtb3VudE9yZGVyZWQiLCBhbW91bnRSZWNlaXZlZFByaWNlVW0pDQogICAgdGVtcFRhYmxlLnB1dCgiUHJpY2UiLCBwcmljUGVyUGllY2VQcmljZVVtKQ0KICAgIHRlbXBUYWJsZS5wdXQoIlVuaXQiLCBQUFVOKQ0KICAgIHRlbXBUYWJsZS5wdXQoInF1YW50aXR5T3BlbiIsIG9wZW5RdWFudGl0eVByaWNlVW0pDQogICAgdGVtcFRhYmxlLnB1dCgicXR5SW52b2ljZWQiLCBpbnZvaWNlZFF1YW50aXR5UHJpY2VVbSkNCiAgICB0ZW1wVGFibGUucHV0KCJxdWFudGl0eU9yZGVyZWQiLCBvcmRlcmRRdWFudGl0eVByaWNlVW0pDQogICAgdGVtcFRhYmxlLnB1dCgicXVhbnRpdHlSZWNlaXZlZCIsIHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtKQ0KDQogICAgaWYgKFBVVU4uZXF1YWxzKFBQVU4udHJpbSgpKSkgew0KICAgICAgdGVtcFRhYmxlLnB1dCgiYWx0ZXJuYXRpdmVVbml0IiwgIi0iKQ0KICAgICAgdGVtcFRhYmxlLnB1dCgiYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4iLCAiMC4wIikNCiAgICAgIHRlbXBUYWJsZS5wdXQoImFsdGVybmF0aXZlUHJpY2UiLCAiMC4wIikNCiAgICB9IGVsc2Ugew0KICAgICAgdGVtcFRhYmxlLnB1dCgiYWx0ZXJuYXRpdmVVbml0IiwgUFVVTikNCiAgICAgIHRlbXBUYWJsZS5wdXQoImFsdGVybmF0aXZlUXVhbnRpdHlPcGVuIiwgb3BlUXVhbnRpdHlPcmRlclVtKQ0KICAgICAgdGVtcFRhYmxlLnB1dCgiYWx0ZXJuYXRpdmVQcmljZSIsIHByaWNQZXJQaWVjZU9yZGVyVW0pDQogICAgfQ0KICAgIGxpbmVPcGVuQ2hhcmdlUmVjZWlwdExpc3QuYWRkKHRlbXBUYWJsZSkNCg0KICB9DQogIC8qKiBnZXQgbGluZSBjaGFyZ2VzIGZyb20gdGFibGUgTVBPRVhQDQogICAqLw0KICBwcml2YXRlIGdldExpbmVDaGFyZ2VzKFN0cmluZyBlYWNoUHVubywgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgdGVtcExpbmVDaGFyZ2VMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpDQogICAgbGluZUNoYXJnZUxpc3QgPSBuZXcgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gKCkNCiAgICBEQkFjdGlvbiBxdWVyeU1wb2V4cCA9IGRhdGFiYXNlLnRhYmxlKCJNUE9FWFAiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklWQ09OTyIsICJJVlBVTk8iLCAiSVZQTkxJIiwgIklWUE5MUyIsICJJVkNEU0UiLCAiSVZSRVBOIiwgIklWRVhUWSIsICJJVkNFSUQiLCAiSVZFWElDIiwgIklWV1NPUCIsICJJVkNVQ0QiLCAiSVZDRVZBIiwgIklWQ0VWSiIsICJJVlRIUFIiLCAiSVZJVkNRIiwgIklWQUNJTiIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciByZWNvcmRNcG9leHAgPSBxdWVyeU1wb2V4cC5nZXRDb250YWluZXIoKQ0KICAgIHJlY29yZE1wb2V4cC5zZXQoIklWQ09OTyIsIEludGVnZXIucGFyc2VJbnQoQ09OTy50cmltKCkpKQ0KICAgIHJlY29yZE1wb2V4cC5zZXQoIklWUFVOTyIsIGVhY2hQdW5vLnRyaW0oKSkNCiAgICByZWNvcmRNcG9leHAuc2V0KCJJVlBOTEkiLCBJbnRlZ2VyLnBhcnNlSW50KGVhY2hMaW5lLmdldCgnUE5MSScpLnRvU3RyaW5nKCkpKQ0KICAgIHJlY29yZE1wb2V4cC5zZXQoIklWUE5MUyIsIEludGVnZXIucGFyc2VJbnQoZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKSkpDQoNCiAgICBpbnQgcmVhZHMgPSBxdWVyeU1wb2V4cC5yZWFkQWxsKHJlY29yZE1wb2V4cCwgNCwgZ2V0TXBvZXhwTGluZVJlY29yZHMpDQoNCiAgfQ0KDQogIENsb3N1cmUgPCA/ID4gZ2V0TXBvZXhwTGluZVJlY29yZHMgPSB7DQogICAgREJDb250YWluZXIgcmVjb3JkIC0+DQogICAgU3RyaW5nIFBOTEkgPSByZWNvcmQuZ2V0KCdJVlBOTEknKQ0KICAgIFN0cmluZyBQTkxTID0gcmVjb3JkLmdldCgnSVZQTkxTJykNCiAgICBTdHJpbmcgQ0RTRSA9IHJlY29yZC5nZXQoJ0lWQ0RTRScpDQogICAgU3RyaW5nIFJFUE4gPSByZWNvcmQuZ2V0KCdJVlJFUE4nKQ0KICAgIFN0cmluZyBFWFRZID0gcmVjb3JkLmdldCgnSVZFWFRZJykNCiAgICBTdHJpbmcgQ0VJRCA9IHJlY29yZC5nZXQoJ0lWQ0VJRCcpDQogICAgU3RyaW5nIEVYSUMgPSByZWNvcmQuZ2V0KCdJVkVYSUMnKQ0KICAgIFN0cmluZyBXU09QID0gcmVjb3JkLmdldCgnSVZXU09QJykNCiAgICBTdHJpbmcgQ1VDRCA9IHJlY29yZC5nZXQoJ0lWQ1VDRCcpDQogICAgU3RyaW5nIENFVkEgPSByZWNvcmQuZ2V0KCdJVkNFVkEnKQ0KICAgIFN0cmluZyBDRVZKID0gcmVjb3JkLmdldCgnSVZDRVZKJykNCiAgICBTdHJpbmcgVEhQUiA9IHJlY29yZC5nZXQoJ0lWVEhQUicpDQogICAgU3RyaW5nIElWQ1EgPSByZWNvcmQuZ2V0KCdJVklWQ1EnKQ0KICAgIFN0cmluZyBBQ0lOID0gcmVjb3JkLmdldCgnSVZBQ0lOJykNCiAgICBIYXNodGFibGUgdGVtcFRhYmxlID0gbmV3IEhhc2h0YWJsZSA8IFN0cmluZywNCiAgICBTdHJpbmcgPiAoKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ1BOTEknLCBQTkxJKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ1BOTFMnLCBQTkxTKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0NEU0UnLCBDRFNFKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ1JFUE4nLCBSRVBOKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0VYVFknLCBFWFRZKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0NFSUQnLCBDRUlEKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0VYSUMnLCBFWElDKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ1dTT1AnLCBXU09QKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0NVQ0QnLCBDVUNEKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0NFVkEnLCBDRVZBKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0NFVkonLCBDRVZKKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ1RIUFInLCBUSFBSKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0lWQ1EnLCBJVkNRKQ0KICAgIHRlbXBUYWJsZS5wdXQoJ0FDSU4nLCBBQ0lOKQ0KICAgIHRlbXBMaW5lQ2hhcmdlTGlzdC5hZGQodGVtcFRhYmxlKQ0KDQogIH0NCiAgLyoqIGdldCBsaW5lIGNoYXJnZSB0ZXh0IHVzaW5nIFBQUzI4ME1JLkdldEVsZW1lbnQNCiAgICovDQogIHByaXZhdGUgZ2V0TGluZUNoYXJnZVRleHQoU3RyaW5nIGVhY2hQdW5vLCBIYXNodGFibGUgZWFjaFRlbXBMaW5lQ2hhcmdlLCBIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBTdHJpbmcgQ0VJRCA9IGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ0NFSUQnKQ0KICAgIFN0cmluZyBpUFVOTyA9IGVhY2hQdW5vDQogICAgU3RyaW5nIGlQTkxJID0gZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnUE5MSScpDQogICAgU3RyaW5nIGlQTkxTID0gZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnUE5MUycpDQogICAgU3RyaW5nIGlDRFNFID0gZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnQ0RTRScpDQogICAgU3RyaW5nIGlDRUlEID0gZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnQ0VJRCcpDQogICAgU3RyaW5nIGlXU09QID0gZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnV1NPUCcpDQogICAgU3RyaW5nIFRYMzAgPSAiIg0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZQ0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKQ0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBUWDMwID0gcmVzdWx0cy5nZXQoJ1RYMzAnKQ0KDQogICAgICB9DQoNCiAgICAgIFN0cmluZyBFWFRZID0gZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnRVhUWScpDQoNCiAgICAgIGlmICh2YWxpZENoYXJnZVR5cGVzLmNvbnRhaW5zKEVYVFkudHJpbSgpKSkgew0KDQogICAgICAgIGxpbmVPcGVuQ2hhcmdlUmVjZWlwdExpc3QuZWFjaCB7DQoNCiAgICAgICAgICBsaW5lT3BlbkNoYXJnZVJlY2VpcHQgLT4NCiAgICAgICAgICAgIEhhc2h0YWJsZSBodE9wZW5SZWNlaXB0Q2hhcmdlID0gbGluZU9wZW5DaGFyZ2VSZWNlaXB0DQoNCiAgICAgICAgICBTdHJpbmcgcHVubyA9IGh0T3BlblJlY2VpcHRDaGFyZ2UuY29udGFpbnNLZXkoIlBVTk8iKSA/IGh0T3BlblJlY2VpcHRDaGFyZ2UNCiAgICAgICAgICAgIC5nZXQoIlBVTk8iKSA6IG51bGwNCiAgICAgICAgICBTdHJpbmcgcG5saSA9IGh0T3BlblJlY2VpcHRDaGFyZ2UuY29udGFpbnNLZXkoIlBOTEkiKSA/IGh0T3BlblJlY2VpcHRDaGFyZ2UNCiAgICAgICAgICAgIC5nZXQoIlBOTEkiKSA6IG51bGwNCiAgICAgICAgICBTdHJpbmcgcG5scyA9IGh0T3BlblJlY2VpcHRDaGFyZ2UuY29udGFpbnNLZXkoIlBOTFMiKSA/IGh0T3BlblJlY2VpcHRDaGFyZ2UNCiAgICAgICAgICAgIC5nZXQoIlBOTFMiKSA6IG51bGwNCiAgICAgICAgICBTdHJpbmcgY2RzZSA9IGh0T3BlblJlY2VpcHRDaGFyZ2UuY29udGFpbnNLZXkoInNlcXVlbmNlTnVtYmVyIikgPyBodE9wZW5SZWNlaXB0Q2hhcmdlDQogICAgICAgICAgICAuZ2V0KCJzZXF1ZW5jZU51bWJlciIpIDogbnVsbA0KICAgICAgICAgIFN0cmluZyBjZWlkID0gaHRPcGVuUmVjZWlwdENoYXJnZS5jb250YWluc0tleSgiY29zdGluZ0VsZW1lbnQiKSA/IGh0T3BlblJlY2VpcHRDaGFyZ2UNCiAgICAgICAgICAgIC5nZXQoImNvc3RpbmdFbGVtZW50IikgOiBudWxsDQogICAgICAgICAgcHVubyA9IHB1bm8gPT0gbnVsbCA/ICIiIDogcHVuby50cmltKCkNCiAgICAgICAgICBwbmxpID0gcG5saSA9PSBudWxsID8gIiIgOiBwbmxpLnRyaW0oKQ0KICAgICAgICAgIHBubHMgPSBwbmxzID09IG51bGwgPyAiIiA6IHBubHMudHJpbSgpDQogICAgICAgICAgY2RzZSA9IGNkc2UgPT0gbnVsbCA/ICIiIDogY2RzZS50cmltKCkNCiAgICAgICAgICBjZWlkID0gY2VpZCA9PSBudWxsID8gIiIgOiBjZWlkLnRyaW0oKQ0KICAgICAgICAgIGlmIChwdW5vLmVxdWFscyhpUFVOTykgJiYgcG5saS5lcXVhbHMoaVBOTEkpICYmIHBubHMuZXF1YWxzKGlQTkxTKSAmJg0KICAgICAgICAgICAgY2RzZS5lcXVhbHMoaUNEU0UpICYmIGNlaWQuZXF1YWxzKGlDRUlEKSkgew0KDQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiT3BlcmF0b3IiLCBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdXU09QJykpDQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiY29zdGluZ0VsZW1lbnREZXNjcmlwdGlvbiIsIFRYMzApDQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgidGhpcmRQYXJ0eUNvc3RzIiwgZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnVEhQUicpKQ0KICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoImludm9pY2VDb3N0cyIsIGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ0lWQ1EnKSkNCiAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJhY2NJbnZvaWNlQ29zdHMiLCBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdBQ0lOJykpDQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiQ3VycmVuY3kiLCBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdDVUNEJykpDQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiY29zdGluZ0VsZW1lbnRBbW91bnQiLCBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdDRVZBJykpDQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiYWRqdXN0ZWRDb3N0aW5nRWxlbWVudEFtb3VudCIsIGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ0NFVkonKSkNCiAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJ2YXRDb2RlIiwgZWFjaExpbmUuZ2V0KCdWVENEJykpDQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiY2hhcmdlRmFjdG9yIiwgZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnRVhJQycpKQ0KICAgICAgICAgICAgYm9vbGVhbiBhZGRDaGFyZ2UgPSB0cnVlDQogICAgICAgICAgICBpV1NPUCA9ICIyMCINCiAgICAgICAgICAgIGlmIChmaXhlZENoYXJnZVR5cGVzLmNvbnRhaW5zKGlXU09QKSkgew0KDQogICAgICAgICAgICAgIEJpZ0RlY2ltYWwgcXVhbnRpdHlJbnZvaWNlZCA9IG5ldyBCaWdEZWNpbWFsKGh0T3BlblJlY2VpcHRDaGFyZ2UuZ2V0KCJxdHlJbnZvaWNlZCIpLnRvU3RyaW5nKCkpDQoNCiAgICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoInF1YW50aXR5T3BlbiIsICIxIikNCiAgICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoInF0eUludm9pY2VkIiwgIjEiKQ0KICAgICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgicXVhbnRpdHlPcmRlcmVkIiwgIjEiKQ0KICAgICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgicXVhbnRpdHlSZWNlaXZlZCIsICIxIikNCiAgICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoIlByaWNlIiwgaHRPcGVuUmVjZWlwdENoYXJnZS5nZXQoImFtb3VudE9yZGVyZWQiKSkNCg0KICAgICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4iLCAiMSIpDQogICAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJhbHRlcm5hdGl2ZVByaWNlIiwgaHRPcGVuUmVjZWlwdENoYXJnZS5nZXQoImFtb3VudE9yZGVyZWQiKSkNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGFkZENoYXJnZSkgew0KDQogICAgICAgICAgICAgIGxpbmVDaGFyZ2VMaXN0LmFkZChodE9wZW5SZWNlaXB0Q2hhcmdlKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ0VJRCI6IENFSUQudHJpbSgpXQ0KICAgIG1pQ2FsbGVyLmNhbGwoIlBQUzI4ME1JIiwgIkdldEVsZW1lbnQiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KICB9DQogIC8qKiBzZW5kIGxpbmUgY2hhcmdlIGRldGFpbHMgdG8gb3V0cHV0DQogICAqLw0KICBwcml2YXRlIHdyaXRlTGluZUNoYXJnZXMoU3RyaW5nIFBVTk8sIEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZSwgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIG9PcmRlck51bWJlciA9IFBVTk8NCiAgICBTdHJpbmcgb0xpbmVOdW1iZXIgPSBlYWNoTGluZUNoYXJnZS5nZXQoIlBOTEkiKQ0KICAgIFN0cmluZyBvU3ViTGluZU51bWJlciA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiUE5MUyIpDQogICAgU3RyaW5nIG9TZXF1ZW5jZU51bWJlciA9IGVhY2hMaW5lQ2hhcmdlLmdldCgic2VxdWVuY2VOdW1iZXIiKQ0KICAgIHRlbXBUYWJsZUNoYXJnZXMuZ2V0KG9PcmRlck51bWJlciArIG9MaW5lTnVtYmVyICsgb1N1YkxpbmVOdW1iZXIgKyBvU2VxdWVuY2VOdW1iZXIpDQogICAgU3RyaW5nIGludlF0eSA9IHRlbXBUYWJsZUNoYXJnZXMuZ2V0KG9PcmRlck51bWJlciArIG9MaW5lTnVtYmVyICsgb1N1YkxpbmVOdW1iZXIgKyBvU2VxdWVuY2VOdW1iZXIpDQogICAgU3RyaW5nIG9Db3N0aW5nRWxlbWVudCA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiY29zdGluZ0VsZW1lbnQiKQ0KICAgIFN0cmluZyBvUmVjZWlwdE51bWJlciA9IGVhY2hMaW5lQ2hhcmdlLmdldCgicmVjZWlwdE51bWJlciIpDQogICAgU3RyaW5nIG9Db3N0aW5nRWxlbWVudERlc2NyaXB0aW9uID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJjb3N0aW5nRWxlbWVudERlc2NyaXB0aW9uIikNCiAgICBTdHJpbmcgb0NoYXJnZVR5cGUgPSBlYWNoTGluZUNoYXJnZS5nZXQoImNoYXJnZVR5cGUiKQ0KICAgIFN0cmluZyBvT3BlcmF0b3IgPSBlYWNoTGluZUNoYXJnZS5nZXQoIk9wZXJhdG9yIikNCiAgICBTdHJpbmcgb0l0ZW1OdW1iZXIgPSBlYWNoTGluZUNoYXJnZS5nZXQoIml0ZW1OdW1iZXIiKQ0KICAgIFN0cmluZyBvVGhpcmRQYXJ0eUNvc3RzID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJ0aGlyZFBhcnR5Q29zdHMiKQ0KICAgIFN0cmluZyBvSW52b2ljZUNvc3RzID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJpbnZvaWNlQ29zdHMiKQ0KICAgIFN0cmluZyBvQ3VycmVuY3kgPSBlYWNoTGluZUNoYXJnZS5nZXQoIkN1cnJlbmN5IikNCiAgICBTdHJpbmcgb0Nvc3RpbmdFbGVtZW50QW1vdW50ID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJjb3N0aW5nRWxlbWVudEFtb3VudCIpDQogICAgU3RyaW5nIG9BY2NJbnZvaWNlQ29zdHMgPSBlYWNoTGluZUNoYXJnZS5nZXQoImFjY0ludm9pY2VDb3N0cyIpDQogICAgU3RyaW5nIG9BZGp1c3RlZENvc3RpbmdFbGVtZW50QW1vdW50ID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJhZGp1c3RlZENvc3RpbmdFbGVtZW50QW1vdW50IikNCiAgICBTdHJpbmcgb1ZhdENvZGUgPSBlYWNoTGluZUNoYXJnZS5nZXQoInZhdENvZGUiKQ0KICAgIFN0cmluZyBvQ2hhcmdlRmFjdG9yID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJjaGFyZ2VGYWN0b3IiKQ0KICAgIFN0cmluZyBvQW1vdW50T3BlbiA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiYW1vdW50T3BlbiIpDQogICAgU3RyaW5nIG9BbW91bnRPcmRlcmVkID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJhbW91bnRPcmRlcmVkIikNCiAgICBTdHJpbmcgb1ByaWNlID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJQcmljZSIpDQogICAgU3RyaW5nIG9Vbml0ID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJVbml0IikNCiAgICBTdHJpbmcgb1F1YW50aXR5T3BlbiA9IGVhY2hMaW5lQ2hhcmdlLmdldCgicXVhbnRpdHlPcGVuIikNCiAgICBTdHJpbmcgb1F1YW50aXR5SW52b2ljZWQgPSBlYWNoTGluZUNoYXJnZS5nZXQoInF0eUludm9pY2VkIikNCiAgICBTdHJpbmcgb1F1YW50aXR5T3JkZXJlZCA9IGVhY2hMaW5lQ2hhcmdlLmdldCgicXVhbnRpdHlPcmRlcmVkIikNCiAgICBTdHJpbmcgb1F1YW50aXR5UmVjZWl2ZWQgPSBlYWNoTGluZUNoYXJnZS5nZXQoInF1YW50aXR5UmVjZWl2ZWQiKQ0KICAgIFN0cmluZyBvQWx0ZXJuYXRpdmVVbml0ID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJhbHRlcm5hdGl2ZVVuaXQiKQ0KICAgIFN0cmluZyBvQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4gPSBlYWNoTGluZUNoYXJnZS5nZXQoImFsdGVybmF0aXZlUXVhbnRpdHlPcGVuIikNCiAgICBTdHJpbmcgb0FsdGVybmF0aXZlUHJpY2UgPSBlYWNoTGluZUNoYXJnZS5nZXQoImFsdGVybmF0aXZlUHJpY2UiKQ0KICAgIFN0cmluZyBGMlJFTFAgPSBlYWNoTGluZUNoYXJnZS5nZXQoIkYyUkVMUCIpDQoNCiAgICBvQW1vdW50T3BlbiA9IG9BbW91bnRPcGVuID09IG51bGwgPyBvQ29zdGluZ0VsZW1lbnRBbW91bnQgOiBvQW1vdW50T3Blbg0KICAgIG9BbW91bnRPcmRlcmVkID0gb0Ftb3VudE9yZGVyZWQgPT0gbnVsbCA/ICIxIiA6IG9BbW91bnRPcmRlcmVkDQogICAgb1ByaWNlID0gb1ByaWNlID09IG51bGwgPyBvQ29zdGluZ0VsZW1lbnRBbW91bnQgOiBvUHJpY2UNCiAgICBvVW5pdCA9IG9Vbml0ID09IG51bGwgPyAiICIgOiBvVW5pdA0KICAgIG9RdWFudGl0eU9wZW4gPSBvUXVhbnRpdHlPcGVuID09IG51bGwgPyAiMSIgOiBvUXVhbnRpdHlPcGVuDQogICAgb1F1YW50aXR5SW52b2ljZWQgPSBvUXVhbnRpdHlJbnZvaWNlZCA9PSBudWxsID8gIiAiIDogb1F1YW50aXR5SW52b2ljZWQNCiAgICBvUXVhbnRpdHlPcmRlcmVkID0gb1F1YW50aXR5T3JkZXJlZCA9PSBudWxsID8gIiAiIDogb1F1YW50aXR5T3JkZXJlZA0KICAgIG9RdWFudGl0eVJlY2VpdmVkID0gb1F1YW50aXR5UmVjZWl2ZWQgPT0gbnVsbCA/ICIgIiA6IG9RdWFudGl0eVJlY2VpdmVkDQogICAgb0FsdGVybmF0aXZlVW5pdCA9IG9BbHRlcm5hdGl2ZVVuaXQgPT0gbnVsbCA/ICIgIiA6IG9BbHRlcm5hdGl2ZVVuaXQNCiAgICBvQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4gPSBvQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4gPT0gbnVsbCA/ICIgIiA6IG9BbHRlcm5hdGl2ZVF1YW50aXR5T3Blbg0KICAgIG9BbHRlcm5hdGl2ZVByaWNlID0gb0FsdGVybmF0aXZlUHJpY2UgPT0gbnVsbCA/ICIgIiA6IG9BbHRlcm5hdGl2ZVByaWNlDQogICAgU3RyaW5nIHByaWMgPSAiIg0KICAgIFN0cmluZyBvcGVuUXR5ID0gIiINCg0KICAgIFN0cmluZyBhY0ludm9pY2VDb3N0ID0gRG91YmxlLnBhcnNlRG91YmxlKG9Db3N0aW5nRWxlbWVudEFtb3VudCkgLSBEb3VibGUucGFyc2VEb3VibGUob0FjY0ludm9pY2VDb3N0cykNCiAgICBpZiAoaW52UXR5ICE9IG51bGwpIHsNCiAgICAgIG9wZW5RdHkgPSBEb3VibGUucGFyc2VEb3VibGUocmVwUXR5KSAtIERvdWJsZS5wYXJzZURvdWJsZShpbnZRdHkpDQogICAgfQ0KICAgIGlmICghb3BlblF0eS5lcXVhbHMoIjAuMCIpICYmICFvcGVuUXR5LmVxdWFscygiIikpIHsNCiAgICAgIGRvdWJsZSBjb252ZXJ0ZWQgPSBEb3VibGUucGFyc2VEb3VibGUoYWNJbnZvaWNlQ29zdCkgLyBEb3VibGUucGFyc2VEb3VibGUob3BlblF0eSkNCg0KICAgICAgRGVjaW1hbEZvcm1hdCBkZWNPYmplY3QgPSBuZXcgRGVjaW1hbEZvcm1hdCgiIy4jIyMjIyMiKQ0KICAgICAgcHJpYyA9IGRlY09iamVjdC5mb3JtYXQoY29udmVydGVkKQ0KICAgIH0gZWxzZSB7DQogICAgICBkb3VibGUgY29udmVydGVkID0gMC4wMDAwMDANCg0KICAgICAgRGVjaW1hbEZvcm1hdCBkZWNPYmplY3QgPSBuZXcgRGVjaW1hbEZvcm1hdCgiIy4jIyMjIyMiKQ0KICAgICAgcHJpYyA9IGRlY09iamVjdC5mb3JtYXQoY29udmVydGVkKQ0KICAgIH0NCiAgICBkb3VibGUgb3BRdHkgPSAwLjBkDQogICAgaWYgKGludlF0eSAhPSBudWxsKSB7DQogICAgICBvcFF0eSA9IERvdWJsZS5wYXJzZURvdWJsZShyZXBRdHkpIC0gRG91YmxlLnBhcnNlRG91YmxlKGludlF0eSkNCiAgICB9DQogICAgaWYgKGVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkgPT0gJzQwJyB8fCBlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpID09ICc0NScgJiYgKGVhY2hMaW5lQ2hhcmdlLmdldCgidGhpcmRQYXJ0eUNvc3RzIikgPT0gMSkpIHsNCg0KICAgICAgaWYgKCghZWFjaExpbmVDaGFyZ2UuZ2V0KCJjb3N0aW5nRWxlbWVudEFtb3VudCIpLmVxdWFscygiMC4wMCIpICYmIGVhY2hMaW5lQ2hhcmdlLmdldCgiUHJpY2UiKSA9PSBudWxsKSB8fCBlYWNoTGluZUNoYXJnZS5nZXQoIlByaWNlIikgIT0gbnVsbCkgew0KICAgICAgICBpZiAob3BRdHkgPiAwIHx8IG9wUXR5IDwgMCkgew0KICAgICAgICAgIGlmICgoIW9BY2NJbnZvaWNlQ29zdHMuZXF1YWxzKCIiKSB8fCAhb0FjY0ludm9pY2VDb3N0cy5lcXVhbHMoIjAuMCIpKSAmJiAhb0NoYXJnZUZhY3Rvci5lcXVhbHMoIjEiKSkgew0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAiTEMiKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVTk8nLCBvT3JkZXJOdW1iZXIpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIG9MaW5lTnVtYmVyKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBvU3ViTGluZU51bWJlcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRFNFJywgb1NlcXVlbmNlTnVtYmVyKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFSUQnLCBvQ29zdGluZ0VsZW1lbnQpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlBOTScsIG9SZWNlaXB0TnVtYmVyKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09BT1UnLCBhY0ludm9pY2VDb3N0KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09BTEMnLCBvcGVuQW1vdW50TG9jYWxDdXJyZW5jeSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUU9VJywgb3BlblF0eSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRUxEJywgb0Nvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24pDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRVhUWScsIG9DaGFyZ2VUeXBlKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1dTT1AnLCBvT3BlcmF0b3IpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVEhQUicsIG9UaGlyZFBhcnR5Q29zdHMpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ1VDRCcsIG9DdXJyZW5jeSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdJVkNTJywgb0ludm9pY2VDb3N0cykNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDSEZDJywgb0NoYXJnZUZhY3RvcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRVZBJywgb0Nvc3RpbmdFbGVtZW50QW1vdW50KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFVkonLCBvQWRqdXN0ZWRDb3N0aW5nRWxlbWVudEFtb3VudCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgb1ZhdENvZGUpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVROTycsIG9JdGVtTnVtYmVyKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1AnLCBvQW1vdW50T3BlbikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9SJywgb0Ftb3VudE9yZGVyZWQpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIHByaWMpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5JVCcsIG9Vbml0KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09QUVQnLCBvUXVhbnRpdHlPcGVuKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUSVYnLCBvUXVhbnRpdHlJbnZvaWNlZCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVE9SJywgb1F1YW50aXR5T3JkZXJlZCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVFJWJywgb1F1YW50aXR5UmVjZWl2ZWQpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUVScsIG9BbHRlcm5hdGl2ZVVuaXQpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxRTycsIG9BbHRlcm5hdGl2ZVF1YW50aXR5T3BlbikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgb0FsdGVybmF0aXZlUHJpY2UpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkVMUCcsIEYyUkVMUCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSUFFUJywgcmVjZWlwdFF1YW50aXR5KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JRQUwnLCByZWNlaXB0UXVhbnRpdHkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIGVhY2hMaW5lLmdldCgnUE5MSScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MUycsIGVhY2hMaW5lLmdldCgnUE5MUycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVFJEVCcsIGVhY2hMaW5lLmdldCgnVFJEVCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFdITCcsIGVhY2hMaW5lLmdldCgnV0hMTycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVROTycsIGVhY2hMaW5lLmdldCgnSVROTycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUElURCcsIGVhY2hMaW5lLmdldCgnUElURCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUElUVCcsIGVhY2hMaW5lLmdldCgnUElUVCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU0lURScsIGVhY2hMaW5lLmdldCgnU0lURScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0FRQScsIGVhY2hMaW5lLmdldCgnQ0FRQScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkpRQScsIGVhY2hMaW5lLmdldCgnUkpRQScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU0RRQScsIGVhY2hMaW5lLmdldCgnU0RRQScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRQScsIGVhY2hMaW5lLmdldCgnT1JRQScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVZRQScsIGludlF0eSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSVlFBJywgZWFjaExpbmUuZ2V0KCdSVlFBJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRlFBJywgZWFjaExpbmUuZ2V0KCdDRlFBJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUVBVJywgZWFjaExpbmUuZ2V0KCdvcGVuUXVhbnRpdHlQcmljZVVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVVJDJywgZWFjaExpbmUuZ2V0KCdQVVJDJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMQlVZJywgZWFjaExpbmUuZ2V0KCdCVVlFJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTVFVNJywgZWFjaExpbmUuZ2V0KCdzdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdVTk1TJywgZWFjaExpbmUuZ2V0KCdVTk1TJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFVNJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ1dVTicsICIiKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xOQU0nLCBlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUFInLCBlYWNoTGluZS5nZXQoJ3ByaWNlUGVyUGllY2VTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVVFUJywgZWFjaExpbmUuZ2V0KCdQVVFUJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFBSJywgIiIpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFRDRCcsIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBpZiAoZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKS5sZW5ndGgoKSA9PSAxKSB7DQoNCiAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCAnMCcgKyBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0dSTVQnLCBlYWNoTGluZS5nZXQoJ0dSTVQnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xNT0QnLCBlYWNoTGluZS5nZXQoJ01PREwnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUQnLCBlYWNoTGluZS5nZXQoJ1RFREwnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUwnLCBlYWNoTGluZS5nZXQoJ1RFTDEnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU0wnLCBlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU1QnLCBlYWNoTGluZS5nZXQoJ1BVU1QnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BPUE4nLCBlYWNoTGluZS5nZXQoJ3BvcG5FYTEzJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JDJywgZWFjaExpbmUuZ2V0KCdST1JDJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JOJywgZWFjaExpbmUuZ2V0KCdST1JOJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JMJywgZWFjaExpbmUuZ2V0KCdST1JMJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JYJywgZWFjaExpbmUuZ2V0KCdST1JYJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTVURPJywgZWFjaExpbmUuZ2V0KCdTVURPJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdGUlJDJywgZWFjaExpbmUuZ2V0KCdGUlJDJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdGUlJFJywgZWFjaExpbmUuZ2V0KCdGUlJFJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBRFFBJywgZWFjaExpbmUuZ2V0KCdBRFFBJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUlFUJywgZWFjaExpbmUuZ2V0KCdPUlFUJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgZWFjaExpbmUuZ2V0KCdhbW91bnRPcGVuJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9SJywgb0Nvc3RpbmdFbGVtZW50QW1vdW50KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBwcmljKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUFFUJywgZWFjaExpbmUuZ2V0KCdvcGVuUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgZWFjaExpbmUuZ2V0KCdpbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIGVhY2hMaW5lLmdldCgnb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIGVhY2hMaW5lLmdldCgncmVjZWl2ZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFFPJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGl2ZVF1YW50aXR5T3BlbicpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUUCcsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVQcmljZScpLnRvU3RyaW5nKCkpDQoNCiAgICAgICAgICAgIG1pLndyaXRlKCkNCg0KICAgICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgIkxDIikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgb09yZGVyTnVtYmVyKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBvTGluZU51bWJlcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgb1N1YkxpbmVOdW1iZXIpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0RTRScsIG9TZXF1ZW5jZU51bWJlcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRUlEJywgb0Nvc3RpbmdFbGVtZW50KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQTk0nLCBvUmVjZWlwdE51bWJlcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPQU9VJywgYWNJbnZvaWNlQ29zdCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPQUxDJywgb3BlbkFtb3VudExvY2FsQ3VycmVuY3kpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FPVScsIG9wZW5RdHkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VMRCcsIG9Db3N0aW5nRWxlbWVudERlc2NyaXB0aW9uKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0VYVFknLCBvQ2hhcmdlVHlwZSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdXU09QJywgb09wZXJhdG9yKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1RIUFInLCBvVGhpcmRQYXJ0eUNvc3RzKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NVQ0QnLCBvQ3VycmVuY3kpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVZDUycsIG9JbnZvaWNlQ29zdHMpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0hGQycsIG9DaGFyZ2VGYWN0b3IpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VWQScsIG9Db3N0aW5nRWxlbWVudEFtb3VudCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRVZKJywgb0FkanVzdGVkQ29zdGluZ0VsZW1lbnRBbW91bnQpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsIG9WYXRDb2RlKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBvSXRlbU51bWJlcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgb0Ftb3VudE9wZW4pDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUicsIG9BbW91bnRPcmRlcmVkKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBwcmljKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBvVW5pdCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUFFUJywgb1F1YW50aXR5T3BlbikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgb1F1YW50aXR5SW52b2ljZWQpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIG9RdWFudGl0eU9yZGVyZWQpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIG9RdWFudGl0eVJlY2VpdmVkKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBvQWx0ZXJuYXRpdmVVbml0KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBvQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4pDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUUCcsIG9BbHRlcm5hdGl2ZVByaWNlKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JFTFAnLCBGMlJFTFApDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlBRVCcsIHJlY2VpcHRRdWFudGl0eSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSUUFMJywgcmVjZWlwdFF1YW50aXR5KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1RSRFQnLCBlYWNoTGluZS5nZXQoJ1RSRFQnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xXSEwnLCBlYWNoTGluZS5nZXQoJ1dITE8nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBlYWNoTGluZS5nZXQoJ0lUTk8nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVEQnLCBlYWNoTGluZS5nZXQoJ1BJVEQnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVFQnLCBlYWNoTGluZS5nZXQoJ1BJVFQnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NJVEUnLCBlYWNoTGluZS5nZXQoJ1NJVEUnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NBUUEnLCBlYWNoTGluZS5nZXQoJ0NBUUEnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JKUUEnLCBlYWNoTGluZS5nZXQoJ1JKUUEnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NEUUEnLCBlYWNoTGluZS5nZXQoJ1NEUUEnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09SUUEnLCBlYWNoTGluZS5nZXQoJ09SUUEnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWUUEnLCBpbnZRdHkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlZRQScsIGVhY2hMaW5lLmdldCgnUlZRQScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0ZRQScsIGVhY2hMaW5lLmdldCgnQ0ZRQScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FQVScsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5UHJpY2VVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVSQycsIGVhY2hMaW5lLmdldCgnUFVSQycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTEJVWScsIGVhY2hMaW5lLmdldCgnQlVZRScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1RVTScsIGVhY2hMaW5lLmdldCgnc3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5NUycsIGVhY2hMaW5lLmdldCgnVU5NUycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxVTScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NXVU4nLCAiIikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMTkFNJywgZWFjaExpbmUuZ2V0KCdMTkFNJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVVBSJywgZWFjaExpbmUuZ2V0KCdwcmljZVBlclBpZWNlU3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVRVCcsIGVhY2hMaW5lLmdldCgnUFVRVCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxQUicsICIiKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgaWYgKGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkubGVuZ3RoKCkgPT0gMSkgew0KDQogICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgJzAnICsgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdHUk1UJywgZWFjaExpbmUuZ2V0KCdHUk1UJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMTU9EJywgZWFjaExpbmUuZ2V0KCdNT0RMJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVEJywgZWFjaExpbmUuZ2V0KCdURURMJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVMJywgZWFjaExpbmUuZ2V0KCdURUwxJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNMJywgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNUJywgZWFjaExpbmUuZ2V0KCdQVVNUJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQT1BOJywgZWFjaExpbmUuZ2V0KCdwb3BuRWExMycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SQycsIGVhY2hMaW5lLmdldCgnUk9SQycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STicsIGVhY2hMaW5lLmdldCgnUk9STicpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STCcsIGVhY2hMaW5lLmdldCgnUk9STCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SWCcsIGVhY2hMaW5lLmdldCgnUk9SWCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1VETycsIGVhY2hMaW5lLmdldCgnU1VETycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSQycsIGVhY2hMaW5lLmdldCgnRlJSQycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSRScsIGVhY2hMaW5lLmdldCgnRlJSRScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQURRQScsIGVhY2hMaW5lLmdldCgnQURRQScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRVCcsIGVhY2hMaW5lLmdldCgnT1JRVCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIGVhY2hMaW5lLmdldCgnYW1vdW50T3BlbicpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUicsIG9Db3N0aW5nRWxlbWVudEFtb3VudCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgcHJpYykNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdVTklUJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRJVicsIGVhY2hMaW5lLmdldCgnaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUT1InLCBlYWNoTGluZS5nZXQoJ29yZGVyZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUUlYnLCBlYWNoTGluZS5nZXQoJ3JlY2VpdmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRVJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxRTycsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFAnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKQ0KDQogICAgICAgICAgICBtaS53cml0ZSgpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgaWYgKChlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpID4gJzQ1JykgJiYgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSA8ICc4NScgfHwgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSA9PSAnODUnKSB7DQoNCiAgICAgIGlmICgoIWVhY2hMaW5lQ2hhcmdlLmdldCgiY29zdGluZ0VsZW1lbnRBbW91bnQiKS5lcXVhbHMoIjAuMDAiKSAmJiBlYWNoTGluZUNoYXJnZS5nZXQoIlByaWNlIikgPT0gbnVsbCkgfHwgZWFjaExpbmVDaGFyZ2UuZ2V0KCJQcmljZSIpICE9IG51bGwpIHsNCiAgICAgICAgaWYgKG9wUXR5ID4gMCB8fCBvcFF0eSA8IDApIHsNCiAgICAgICAgICBpZiAoKCFvQWNjSW52b2ljZUNvc3RzLmVxdWFscygiIikgfHwgIW9BY2NJbnZvaWNlQ29zdHMuZXF1YWxzKCIwLjAiKSkgJiYgIW9DaGFyZ2VGYWN0b3IuZXF1YWxzKCIxIikpIHsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgIkxDIikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgb09yZGVyTnVtYmVyKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBvTGluZU51bWJlcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgb1N1YkxpbmVOdW1iZXIpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0RTRScsIG9TZXF1ZW5jZU51bWJlcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRUlEJywgb0Nvc3RpbmdFbGVtZW50KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQTk0nLCBvUmVjZWlwdE51bWJlcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPQU9VJywgYWNJbnZvaWNlQ29zdCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPQUxDJywgb3BlbkFtb3VudExvY2FsQ3VycmVuY3kpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FPVScsIG9wZW5RdHkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VMRCcsIG9Db3N0aW5nRWxlbWVudERlc2NyaXB0aW9uKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0VYVFknLCBvQ2hhcmdlVHlwZSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdXU09QJywgb09wZXJhdG9yKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1RIUFInLCBvVGhpcmRQYXJ0eUNvc3RzKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NVQ0QnLCBvQ3VycmVuY3kpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVZDUycsIG9JbnZvaWNlQ29zdHMpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0hGQycsIG9DaGFyZ2VGYWN0b3IpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VWQScsIG9Db3N0aW5nRWxlbWVudEFtb3VudCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRVZKJywgb0FkanVzdGVkQ29zdGluZ0VsZW1lbnRBbW91bnQpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsIG9WYXRDb2RlKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBvSXRlbU51bWJlcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgb0Ftb3VudE9wZW4pDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUicsIG9BbW91bnRPcmRlcmVkKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBwcmljKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBvVW5pdCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUFFUJywgb1F1YW50aXR5T3BlbikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgb1F1YW50aXR5SW52b2ljZWQpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIG9RdWFudGl0eU9yZGVyZWQpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIG9RdWFudGl0eVJlY2VpdmVkKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBvQWx0ZXJuYXRpdmVVbml0KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBvQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4pDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUUCcsIG9BbHRlcm5hdGl2ZVByaWNlKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JFTFAnLCBGMlJFTFApDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlBRVCcsIHJlY2VpcHRRdWFudGl0eSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSUUFMJywgcmVjZWlwdFF1YW50aXR5KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1RSRFQnLCBlYWNoTGluZS5nZXQoJ1RSRFQnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xXSEwnLCBlYWNoTGluZS5nZXQoJ1dITE8nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBlYWNoTGluZS5nZXQoJ0lUTk8nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVEQnLCBlYWNoTGluZS5nZXQoJ1BJVEQnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVFQnLCBlYWNoTGluZS5nZXQoJ1BJVFQnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NJVEUnLCBlYWNoTGluZS5nZXQoJ1NJVEUnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NBUUEnLCBlYWNoTGluZS5nZXQoJ0NBUUEnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JKUUEnLCBlYWNoTGluZS5nZXQoJ1JKUUEnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NEUUEnLCBlYWNoTGluZS5nZXQoJ1NEUUEnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09SUUEnLCBlYWNoTGluZS5nZXQoJ09SUUEnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWUUEnLCBpbnZRdHkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlZRQScsIGVhY2hMaW5lLmdldCgnUlZRQScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0ZRQScsIGVhY2hMaW5lLmdldCgnQ0ZRQScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FQVScsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5UHJpY2VVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVSQycsIGVhY2hMaW5lLmdldCgnUFVSQycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTEJVWScsIGVhY2hMaW5lLmdldCgnQlVZRScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1RVTScsIGVhY2hMaW5lLmdldCgnc3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5NUycsIGVhY2hMaW5lLmdldCgnVU5NUycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxVTScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NXVU4nLCAiIikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMTkFNJywgZWFjaExpbmUuZ2V0KCdMTkFNJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVVBSJywgZWFjaExpbmUuZ2V0KCdwcmljZVBlclBpZWNlU3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVRVCcsIGVhY2hMaW5lLmdldCgnUFVRVCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxQUicsICIiKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgaWYgKGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkubGVuZ3RoKCkgPT0gMSkgew0KDQogICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgJzAnICsgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdHUk1UJywgZWFjaExpbmUuZ2V0KCdHUk1UJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMTU9EJywgZWFjaExpbmUuZ2V0KCdNT0RMJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVEJywgZWFjaExpbmUuZ2V0KCdURURMJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVMJywgZWFjaExpbmUuZ2V0KCdURUwxJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNMJywgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNUJywgZWFjaExpbmUuZ2V0KCdQVVNUJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQT1BOJywgZWFjaExpbmUuZ2V0KCdwb3BuRWExMycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SQycsIGVhY2hMaW5lLmdldCgnUk9SQycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STicsIGVhY2hMaW5lLmdldCgnUk9STicpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STCcsIGVhY2hMaW5lLmdldCgnUk9STCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SWCcsIGVhY2hMaW5lLmdldCgnUk9SWCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1VETycsIGVhY2hMaW5lLmdldCgnU1VETycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSQycsIGVhY2hMaW5lLmdldCgnRlJSQycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSRScsIGVhY2hMaW5lLmdldCgnRlJSRScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQURRQScsIGVhY2hMaW5lLmdldCgnQURRQScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRVCcsIGVhY2hMaW5lLmdldCgnT1JRVCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIGVhY2hMaW5lLmdldCgnYW1vdW50T3BlbicpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUicsIG9Db3N0aW5nRWxlbWVudEFtb3VudCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgcHJpYykNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdVTklUJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRJVicsIGVhY2hMaW5lLmdldCgnaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUT1InLCBlYWNoTGluZS5nZXQoJ29yZGVyZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUUlYnLCBlYWNoTGluZS5nZXQoJ3JlY2VpdmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRVJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxRTycsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFAnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkud3JpdGUoKQ0KICAgICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgIkxDIikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgb09yZGVyTnVtYmVyKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBvTGluZU51bWJlcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgb1N1YkxpbmVOdW1iZXIpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0RTRScsIG9TZXF1ZW5jZU51bWJlcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRUlEJywgb0Nvc3RpbmdFbGVtZW50KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQTk0nLCBvUmVjZWlwdE51bWJlcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPQU9VJywgYWNJbnZvaWNlQ29zdCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPQUxDJywgb3BlbkFtb3VudExvY2FsQ3VycmVuY3kpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FPVScsIG9wZW5RdHkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VMRCcsIG9Db3N0aW5nRWxlbWVudERlc2NyaXB0aW9uKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0VYVFknLCBvQ2hhcmdlVHlwZSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdXU09QJywgb09wZXJhdG9yKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1RIUFInLCBvVGhpcmRQYXJ0eUNvc3RzKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NVQ0QnLCBvQ3VycmVuY3kpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVZDUycsIG9JbnZvaWNlQ29zdHMpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0hGQycsIG9DaGFyZ2VGYWN0b3IpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VWQScsIG9Db3N0aW5nRWxlbWVudEFtb3VudCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRVZKJywgb0FkanVzdGVkQ29zdGluZ0VsZW1lbnRBbW91bnQpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsIG9WYXRDb2RlKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBvSXRlbU51bWJlcikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgb0Ftb3VudE9wZW4pDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUicsIG9BbW91bnRPcmRlcmVkKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBwcmljKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBvVW5pdCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUFFUJywgb1F1YW50aXR5T3BlbikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgb1F1YW50aXR5SW52b2ljZWQpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIG9RdWFudGl0eU9yZGVyZWQpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIG9RdWFudGl0eVJlY2VpdmVkKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBvQWx0ZXJuYXRpdmVVbml0KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBvQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4pDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUUCcsIG9BbHRlcm5hdGl2ZVByaWNlKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JFTFAnLCBGMlJFTFApDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlBRVCcsIHJlY2VpcHRRdWFudGl0eSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSUUFMJywgcmVjZWlwdFF1YW50aXR5KQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1RSRFQnLCBlYWNoTGluZS5nZXQoJ1RSRFQnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xXSEwnLCBlYWNoTGluZS5nZXQoJ1dITE8nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBlYWNoTGluZS5nZXQoJ0lUTk8nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVEQnLCBlYWNoTGluZS5nZXQoJ1BJVEQnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVFQnLCBlYWNoTGluZS5nZXQoJ1BJVFQnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NJVEUnLCBlYWNoTGluZS5nZXQoJ1NJVEUnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NBUUEnLCBlYWNoTGluZS5nZXQoJ0NBUUEnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JKUUEnLCBlYWNoTGluZS5nZXQoJ1JKUUEnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NEUUEnLCBlYWNoTGluZS5nZXQoJ1NEUUEnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09SUUEnLCBlYWNoTGluZS5nZXQoJ09SUUEnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWUUEnLCBpbnZRdHkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlZRQScsIGVhY2hMaW5lLmdldCgnUlZRQScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0ZRQScsIGVhY2hMaW5lLmdldCgnQ0ZRQScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FQVScsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5UHJpY2VVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVSQycsIGVhY2hMaW5lLmdldCgnUFVSQycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTEJVWScsIGVhY2hMaW5lLmdldCgnQlVZRScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1RVTScsIGVhY2hMaW5lLmdldCgnc3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5NUycsIGVhY2hMaW5lLmdldCgnVU5NUycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxVTScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NXVU4nLCAiIikNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMTkFNJywgZWFjaExpbmUuZ2V0KCdMTkFNJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVVBSJywgZWFjaExpbmUuZ2V0KCdwcmljZVBlclBpZWNlU3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVRVCcsIGVhY2hMaW5lLmdldCgnUFVRVCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxQUicsICIiKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgaWYgKGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkubGVuZ3RoKCkgPT0gMSkgew0KDQogICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgJzAnICsgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdHUk1UJywgZWFjaExpbmUuZ2V0KCdHUk1UJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMTU9EJywgZWFjaExpbmUuZ2V0KCdNT0RMJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVEJywgZWFjaExpbmUuZ2V0KCdURURMJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVMJywgZWFjaExpbmUuZ2V0KCdURUwxJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNMJywgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNUJywgZWFjaExpbmUuZ2V0KCdQVVNUJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQT1BOJywgZWFjaExpbmUuZ2V0KCdwb3BuRWExMycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SQycsIGVhY2hMaW5lLmdldCgnUk9SQycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STicsIGVhY2hMaW5lLmdldCgnUk9STicpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STCcsIGVhY2hMaW5lLmdldCgnUk9STCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SWCcsIGVhY2hMaW5lLmdldCgnUk9SWCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1VETycsIGVhY2hMaW5lLmdldCgnU1VETycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSQycsIGVhY2hMaW5lLmdldCgnRlJSQycpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSRScsIGVhY2hMaW5lLmdldCgnRlJSRScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQURRQScsIGVhY2hMaW5lLmdldCgnQURRQScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRVCcsIGVhY2hMaW5lLmdldCgnT1JRVCcpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIGVhY2hMaW5lLmdldCgnYW1vdW50T3BlbicpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUicsIG9Db3N0aW5nRWxlbWVudEFtb3VudCkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgcHJpYykNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdVTklUJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRJVicsIGVhY2hMaW5lLmdldCgnaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUT1InLCBlYWNoTGluZS5nZXQoJ29yZGVyZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUUlYnLCBlYWNoTGluZS5nZXQoJ3JlY2VpdmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRVJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxRTycsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFAnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkud3JpdGUoKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICB9DQoNCn0=\"}}}"}